var TEST_MODE=!1,LEGACY_EVENTS=!0,TICK_INTERVAL=100,DEV_MODE=!1,VIEWABLE_IMPRESSION=!0,TESTING=!0,ftPID;!function(){function a(b,c){c=c||window;var d=this,e=c.navigator.userAgent,f=c.navigator.platform,g=!1,h=function(){g||(g=!0,d.initAdVisibility(b))};if(d.window=c,d.document=c.document,d.FF=/fox/.test(e),d.IE=/MSIE/.test(e),d.edgeVersion=+(/edge.(\d+)/i.exec(e)||["","0"]).pop(),d.ios=/iP(ad|od|hone)/.test(e),d.safari=d.ios||/safari/i.test(e)&&!/chrome/i.test(e)&&!/android/i.test(e)&&!/edge/i.test(e)&&!/phantomjs/i.test(e),d.safariVersion=d.safari?+(/Version.(\d+)/.exec(navigator.userAgent)||["0"]).pop():0,d.isMobile=function(){var a=function(a){return(RegExp(a+"[/ ](\\d+(?:[\\._]\\d+)*)").exec(e)||[""]).pop().replace(/_/g,".")||!1},b="iP"===f.slice(0,2)&&a("OS"),c=~e.search(/MSIE|Trident|Edge/);return!!(!c&&a("Android")||b||c&&~e.indexOf("Windows Phone"))},d.statBaseURL=b.statBaseURL,d.guid=b.guid||b.GUID,d.confID=b.confID,d.iframe=c!==c.top,d.xdom=!1,d.iframe)try{c.top.document.getElementsByTagName("head")}catch(a){d.xdom=!0}if(d.viewableConversion=b.viewableConversion,d.api=b.api&&!(b.api.bridge===b.api.fallbackAPI||b.api._BRIDGE===b.api.fallbackAPI),d.impressionTypes={viewable:"202",undetectable:"270",rendered:"271"},d.replaceMacros=function(a){return b.replaceMacros(a)},d.viewableImpressionURL=d.viewableConversion?b.viewableImpressionURL:"",d.width=d.currentWidth=parseInt(b.width,10),d.height=d.currentHeight=parseInt(b.height,10),d.isMobile()?d.viewableImpressionThreshold=.5:d.width*d.height<242500?d.viewableImpressionThreshold=b.viewableImpressionThreshold:d.viewableImpressionThreshold=.6*b.viewableImpressionThreshold,d.viewableImpressionTime=0,d.apiListenersAdded=!1,d.viewableImpressionMAX=b.viewableImpressionTime,d.customDefinition=b.customDefinition,d.pixelModifiers=d.getPixelModifiers(d.viewableImpressionThreshold),d.visibleCount=0,d.visibleFired=!1,d.fired310=!1,d.target=d.xdom?c.document.getElementById(b.adId):c.parent.document.getElementById(b.adId)||c.frameElement,d.initialVisibility=d.visibility.HIDDEN,d.lastVisibility=d.initialVisibility,d.currentStep=0,d.lastStep=(new Date).getTime(),d.lastTick=(new Date).getTime(),d.backgroundTimeSinceLastStep=0,d.backgroundTimeSinceLastTick=0,d.timeSentToBackground=0,d.secure=b.secure,d.firedImpressions={},d.viewableImpression=!1,d.undetectableImpression=!1,d.previousVisibility=0,d.currentStepInfo={visible:0,partial:0,hidden:0,undetectable:0},d.active=!0,d.dispatchEvent=function(a,c){b.dispatchEvent(a,c)},b.firedRenderedImpression&&(d.firedImpressions[d.impressionTypes.rendered]=!0),d.ios&&this.listen(c,"scroll",function(){a.prototype.lastScroll=Date.now()}),d.fireImpression(d.impressionTypes.rendered),d.xdom)if(void 0!==c.IntersectionObserver)d.ioInitialise(),d.detect=d.ioDetect;else if(c.document.documentMode>=8||d.edgeVersion&&d.edgeVersion<14)d.detect=d.ieXDomDetect;else{if(!d.FF&&!d.safari)return d.undetectableImpression=!0,d.fireStat(this.event.AD_UNDETECTABLE),d.fireImpression(d.impressionTypes.undetectable),void d.dispatchEvent("advisibility",!1);d.rafInitialise(),d.detect=d.rafDetect}b.addEventListener("adonpage",h),b.addEventListener("backup",h)}a.prototype.event={AD_STARTS_VISIBLE:"301",AD_STARTS_PARTIAL_VISIBLE:"302",AD_MOVES_PARTIAL_TO_VISIBLE:"303",AD_STARTS_NOT_VISIBLE:"304",AD_MOVES_NOT_VISIBLE_TO_PARTIAL:"305",AD_MOVES_NOT_VISIBLE_TO_VISIBLE:"306",AD_MOVES_NOT_VISIBLE_TO_PART_VISIBLE_TO_VISIBLE:"307",AD_UNDETECTABLE:"308",AD_VISIBLE_TIME:"310",AD_PARTIALLY_VISIBLE_TIME:"311",AD_INVISIBLE_TIME:"312"},a.prototype.visibility={VISIBLE:2,PARTIAL:1,HIDDEN:0},a.prototype.lastScroll=0,a.prototype.INTERVAL_ARRAY=[50,175,300,600,1200,3e3],a.prototype.initAdVisibility=function(a,b,c){b=b||this.document||document,c=c||this.window||window;var d=this;d.target=d.target||(d.xdom?b.getElementById(a.adId):c.parent.document.getElementById(a.adId)||c.frameElement);var e=this.detect(),f=this.event.AD_STARTS_NOT_VISIBLE;1!==e||d.customDefinition?e>0&&(f=this.event.AD_STARTS_PARTIAL_VISIBLE):f=this.event.AD_STARTS_VISIBLE,this.fireStat(f),this.lastVisibility=this.initialVisibility=this.getReadableVisibility(e),a.api&&"loading"===a.api.getState()?a.api.addEventListener("ready",function(){d.addListeners(a)}):this.addListeners(a)},a.prototype.pageFoldRepeater=function(){var a=this,b=(new Date).getTime(),c=b-this.lastStep-this.backgroundTimeSinceLastStep,d=b-this.lastTick-this.backgroundTimeSinceLastTick,e=this.detect(),f=this.getReadableVisibility(e);d>250&&(b-this.lastScroll<d?a.ios&&(e=Math.min(this.previousVisibility,e)):(this.viewableImpressionTime=0,a.backgroundTimeSinceLastStep+=Math.max(0,b-this.lastTick),a.backgroundTimeSinceLastTick+=Math.max(0,b-this.lastTick),c=b-this.lastStep-this.backgroundTimeSinceLastStep,d=b-this.lastTick-this.backgroundTimeSinceLastTick)),a.active&&a.target.parentNode&&(this.dispatchEvent("advisibility",100*e),LEGACY_EVENTS&&(this.undetectableImpression?this.currentStepInfo.undetectable+=d:1==e?this.currentStepInfo.visible+=d:e>0?this.currentStepInfo.partial+=d:this.currentStepInfo.hidden+=d,this.customDefinition&&(f===this.visibility.VISIBLE?this.visibleCount+=d:this.visibleCount<this.viewableImpressionMAX&&(this.visibleCount=0),!this.visibleFired&&this.visibleCount>=this.viewableImpressionMAX&&(this.initialVisibility===this.visibility.PARTIAL?this.fireStat(this.event.AD_MOVES_PARTIAL_TO_VISIBLE):this.fireStat(this.event.AD_MOVES_NOT_VISIBLE_TO_PART_VISIBLE_TO_VISIBLE),this.visibleFired=!0)),f>this.lastVisibility&&this.updateVisibility(f),this.currentStep<this.INTERVAL_ARRAY.length&&this.formatTime(c)>=this.INTERVAL_ARRAY[this.currentStep]&&(this.fire310(),this.lastStep=b,this.backgroundTimeSinceLastStep=0,this.currentStep++)),a.viewableConversion&&!this.viewableImpression&&this.viewableImpressionURL&&(e>=this.viewableImpressionThreshold?this.viewableImpressionTime+=d:this.viewableImpressionTime=0,this.viewableImpressionTime>=this.viewableImpressionMAX&&((this.window||window).viewableImpFired=!0,this.fireImpression(this.impressionTypes.viewable))),this.lastTick=b,this.backgroundTimeSinceLastTick=0,this.previousVisibility=e),a.target.parentNode&&(!a.api||a.api&&(a.viewableConversion&&!a.viewableImpression||!a.viewableConversion&&!a.fired310))&&a.active&&setTimeout(function(){a.pageFoldRepeater()},TICK_INTERVAL)},a.prototype.pageVisible=function(a){return"yes"===a||"no"!==a&&(!0===this.xdom||!0===this.ios)},a.prototype.log=function(a){var b=this.window||window;DEV_MODE&&b.console&&b.console.log&&b.console.log(a)},a.prototype.error=function(a){if(DEV_MODE)throw Error(a)},a.prototype.listen=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)},a.prototype.removeListener=function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)},a.prototype.addListeners=function(a){var b=this;b.timeSentToBackground=b.pageVisible(a.pageVisible)?0:(new Date).getTime(),b.pageVisible(a.pageVisible)&&b.pageFoldRepeater(),a.addEventListener("visibilitychange",function(a){b.active=b.pageVisible(a),b.active?(b.backgroundTimeSinceLastStep+=b.timeSentToBackground?Math.max(0,(new Date).getTime()-b.timeSentToBackground):0,b.backgroundTimeSinceLastTick+=b.timeSentToBackground?Math.max(0,(new Date).getTime()-b.timeSentToBackground):0):(b.timeSentToBackground=(new Date).getTime(),b.viewableImpressionTime=0),"no"!==a&&b.fireImpression(b.impressionTypes.rendered),b.pageFoldRepeater()})},a.prototype.updateVisibility=function(a){var b;this.lastVisibility===this.visibility.HIDDEN?a===this.visibility.PARTIAL?b=this.event.AD_MOVES_NOT_VISIBLE_TO_PARTIAL:a===this.visibility.VISIBLE&&(b=this.event.AD_MOVES_NOT_VISIBLE_TO_VISIBLE):this.lastVisibility===this.visibility.PARTIAL&&(a!==this.visibility.VISIBLE||this.customDefinition||(b=this.event.AD_MOVES_PARTIAL_TO_VISIBLE,this.initialVisibility===this.visibility.HIDDEN&&(b=this.event.AD_MOVES_NOT_VISIBLE_TO_PART_VISIBLE_TO_VISIBLE))),this.lastVisibility=a,void 0!==b&&this.fireStat(b)},a.prototype.getReadableVisibility=function(a){var b=this.visibility.HIDDEN;return this.customDefinition&&a>=this.viewableImpressionThreshold?b=this.visibility.VISIBLE:1===a?b=this.visibility.VISIBLE:a>0&&(b=this.visibility.PARTIAL),b},a.prototype.fractionOf=function(a,b){return Math.max(Math.floor(a/b*100)/100,0)},a.prototype.formatTime=function(a){return Math.max(0,Math.ceil(a/100))},a.prototype.detect=function(){var a=this.getAdPos(this.target),b=this.getWindowDetails();return this.compare(a,b)},a.prototype.getClipping=function(a,b,c){var d=/swf/i.test(a.id)&&/ftin/i.test(a.parentNode.id)&&a.parentNode.style.clip.replace(/^.*\(|px|\)/g,"");return d=d?d.split(" "):[0,b,c,0],{top:parseInt(d[0],10),left:parseInt(d[3],10),right:parseInt(d[1],10),bottom:parseInt(d[2],10)}},a.prototype.getAdSize=function(a){var b=a.getBoundingClientRect(),c=this.getClipping(a,b.right-b.left,b.bottom-b.top);return{top:b.top+c.top,left:b.left+c.left,right:c.right+b.left,bottom:c.bottom+b.top}},a.prototype.getAdPos=function(a,b){b=b||this.window||window;var c=this.getAdSize(a),d=this.xdom?b.document.documentElement.getBoundingClientRect():b.parent.document.documentElement.getBoundingClientRect(),e=this.getWindowDetails(),f=e.scrollLeft&&d.left||0,g=e.scrollTop&&d.top||0;return b.attachEvent?{x:c.left+e.scrollLeft,y:c.top+e.scrollTop,width:c.right-c.left,height:c.bottom-c.top}:{x:c.left-f,y:c.top-g,width:c.right-c.left,height:c.bottom-c.top}},a.prototype.getWindowDetails=function(a){a=a||this.window||window;var b={scrollLeft:0,scrollTop:0,height:0,width:0},c=this.xdom?a:a.parent;return c.innerWidth?(b.width=c.innerWidth,b.height=c.innerHeight,b.scrollLeft=c.pageXOffset,b.scrollTop=c.pageYOffset):c.document.documentElement&&c.document.documentElement.clientHeight?(b.width=c.document.documentElement.clientWidth,b.height=c.document.documentElement.clientHeight,b.scrollLeft=c.document.documentElement.scrollLeft,b.scrollTop=c.document.documentElement.scrollTop):c.document.body&&(b.width=c.document.body.clientWidth,b.height=c.document.body.clientHeight,b.scrollLeft=c.document.body.scrollLeft,b.scrollTop=c.document.body.scrollTop),b},a.prototype.compare=function(a,b){function c(a,b){switch(!0){case a.top>b.bottom:case a.left>b.right:case a.right<b.left:case a.bottom<b.top:return!0;default:return!1}}function d(a,b){var c=Math.max(a.left,b.left),d=Math.min(a.right,b.right),e=Math.max(a.top,b.top);return(d-c)*(Math.min(a.bottom,b.bottom)-e)}var e={left:b.scrollLeft,right:b.scrollLeft+b.width,top:b.scrollTop,bottom:b.scrollTop+b.height},f={left:a.x,right:a.x+a.width,top:a.y,bottom:a.y+a.height};return function(a,b){var e=(b.right-b.left)*(b.bottom-b.top),f=0;return c(a,b)||(f=d(a,b)),Math.floor(f/e*100)/100}(e,f)},window.ftPageFold_v4=function(b){!0!==b.breakingOut&&new a(b,window)},a.prototype.ffDetect=function(){var a=this.ffGetAdPos(),b=this.ffGetWindowDetails();return Math.min(this.detectOriginal(),this.compare(a,b))},a.prototype.ffGetAdPos=function(a){a=a||this.window||window;var b=this.getAdSize(this.target);return{x:a.mozInnerScreenX+b.left,y:a.mozInnerScreenY+b.top,width:b.right-b.left,height:b.bottom-b.top}},a.prototype.ffGetWindowDetails=function(a){return a=a||this.window||window,{scrollLeft:a.screenX,scrollTop:a.screenY+98,height:a.outerHeight-71,width:a.outerWidth}},a.prototype.ieXDomDetect=function(a){function b(a,b){return b<1?0:b<a?.1:b<e?f:1}var c=0,d=this.getPointCheckArray(!0),e=.5===this.viewableImpressionThreshold?9:12,f=this.viewableImpressionThreshold;for(var g in d)c+=document.elementFromPoint(d[g].left,d[g].top)?1:0;return.5===f?b(5,c):f>.5?b(8,c):f>.39?b(6,c):b(4,c)},a.prototype.ioInitialise=function(){var a=this,b=function(b,c){a.ioIntersectionRatio=b[0].intersectionRatio},c=new window.IntersectionObserver(b,{threshold:[1,this.viewableImpressionThreshold,0]});this.ioIntersectionRatio=0,c.observe(this.target)},a.prototype.ioDetect=function(){return this.ioIntersectionRatio},a.prototype.fire310=function(){var a=[this.formatTime(this.currentStepInfo.visible)];a.push(this.formatTime(this.currentStepInfo.partial)),a.push(this.formatTime(this.currentStepInfo.hidden)),a.push(this.formatTime(this.currentStepInfo.undetectable)),this.fireStat("310",a.join("x")),this.currentStepInfo.visible=0,this.currentStepInfo.partial=0,this.currentStepInfo.hidden=0,this.currentStepInfo.undetectable=0,this.fired310=!0},a.prototype.fireImpression=function(a){var b=this;!b.firedImpressions[a]&&b.viewableConversion&&((new Image).src=b.replaceMacros(b.viewableImpressionURL.replace(";271;",";"+a+";")),b.firedImpressions[a]=!0,a===b.impressionTypes.undetectable&&(b.viewableImpressionFired=!0))},a.prototype.fireStat=function(a,b){var c=[""+this.statBaseURL+this.confID];c.push(a),c.push("0"),c.push(this.guid),c.push(this.random()),b&&c.push(b),this.statBaseURL&&((new Image).src=c.join("-"))},a.prototype.random=function(a){var b=a||1e9;return~~(Math.random()*b)},a.prototype.getPixelModifiers=function(a){var b=Math.sqrt(a),c=a;return.5===a?[0,.2,.4,.5,.6,.8,1]:[0,1-b,1-c,.5,c,b,1].sort()},a.prototype.getPointCheckArray=function(a){var b=this.getAdSize(this.target),c=this.getClipping(this.target,b.right-b.left,b.bottom-b.top),d=c.left,e=c.top,f=this.currentWidth=b.right-b.left-1,g=this.currentHeight=b.bottom-b.top-1,h=this.pixelModifiers.map(function(a){return f*a}),i=this.pixelModifiers.map(function(a){return g*a}),j=[{id:"0",left:h[0],top:i[1]},{id:"1",left:h[0],top:i[5]},{id:"2",left:h[1],top:i[0]},{id:"3",left:h[1],top:i[6]},{id:"4",left:h[2],top:i[2]},{id:"5",left:h[2],top:i[4]},{id:"6",left:h[3],top:i[3]},{id:"7",left:h[4],top:i[2]},{id:"8",left:h[4],top:i[4]},{id:"9",left:h[5],top:i[0]},{id:"10",left:h[5],top:i[6]},{id:"11",left:h[6],top:i[1]},{id:"12",left:h[6],top:i[5]}];return j=a?j.map(function(a){return a.left+=b.left,a.top+=b.top,a}):j.map(function(a){return a.left+=d,a.top+=e,a})},a.prototype.visiblePercentageFromPixelSample=function(a){var b=this,c=this.pointArray,d=0,e=0,f=b.currentWidth,g=b.currentHeight,h=a.length;if(!h)return 0;if(h<3)return.01;for(;h--;)d=Math.max(d,c[parseInt(a[h],10)].left),f=Math.min(f,c[parseInt(a[h],10)].left),e=Math.max(e,c[parseInt(a[h],10)].top),g=Math.min(g,c[parseInt(a[h],10)].top);var i=d-f,j=e-g;return Math.floor(i*j/(b.currentWidth*b.currentHeight)*100)/100},a.prototype.rafInitialise=function(a){function b(){c.removeListener(d,"readystatechange",b),c.setupRAFPixels(a)}var c=this,d=this.document||document;c.pointArray=[],c.RAF_THRESHOLD=500,d.body?c.setupRAFPixels(a):c.listen(d,"readystatechange",b)},a.prototype.setupRAFPixels=function(a){function b(a,c,e){d.rafPixel[a][0].contentWindow.requestAnimationFrame(function(c){b(a,c,1^e)}),d.rafPixelTimestamps[a][e]=c}function c(a){function b(b,f){e[b]=f,e[0]&&e[1]&&(c(a),d.rafPixelTimestamps[a]=e)}var e=[],f=d.rafPixel[a];f[0].contentWindow.requestAnimationFrame(function(a){b(0,a)}),f[1].contentWindow.requestAnimationFrame(function(a){b(1,a)})}var d=this;d.rafPixel=[],d.rafPixelTimestamps=[],d.pointArray=d.getPointCheckArray();for(var e=0;e<d.pointArray.length;e++)!function(e){function f(){var a=d.rafPixel[e][0].contentWindow;"loaded"===a.document.readyState||"complete"===a.document.readyState?(d.rafPixelTimestamps[d.pointArray[e].id]=[a.performance.now()],d.safariVersion>9?c(e):a.requestAnimationFrame(function(a){b(e,a,0)})):d.listen(d.rafPixel[e][0],"load",f)}d.outputRAFPixel(d.pointArray[e],a),f()}(e)},a.prototype.rafDetect=function(){var a=this,b=[];for(var c in a.rafPixelTimestamps)if(a.safariVersion>9){var d=a.rafPixel[c],e=a.rafPixelTimestamps[c];d[0].contentWindow.performance.now()-e[0]<a.RAF_THRESHOLD&&d[1].contentWindow.performance.now()-e[1]<a.RAF_THRESHOLD&&b.push(c)}else{var f=(a.rafPixelTimestamps[c][0]+a.rafPixelTimestamps[c][1])/2;a.rafPixel[c][0].contentWindow.performance.now()-f<a.RAF_THRESHOLD&&b.push(c)}return a.pointArray=a.checkFlashPixelPositioning(a.getPointCheckArray()),a.visiblePercentageFromPixelSample(b)},a.prototype.checkFlashPixelPositioning=function(a){for(var b=this,c=b.pointArray,d=a.length;d--;){var e=b.rafPixel[d][0].parentNode;a[d].top!==c[d].top&&(e.style.top=a[d].top+"px"),a[d].left!==c[d].left&&(e.style.left=a[d].left+"px")}return a},a.prototype.outputRAFPixel=function(a,b){var c,d=this,e=this.document||document,f="border:none;width:1px;height:1px;position:absolute;",g="position:absolute;height:1px;width:1px;z-index:-1;overflow:hidden;";g+="top:"+a.top+"px;",g+="left:"+a.left+"px;",pixelElement=e.createElement("div"),pixelElement.style.cssText=g,d.safariVersion>9&&(f+="height:8px;",c=pixelElement.appendChild(document.createElement("iframe")),c.style.cssText=f+"top:-7px");var h=pixelElement.appendChild(document.createElement("iframe"));h.style.cssText=f+"top:0",d.rafPixel[a.id]=[h,c],d.target.parentNode.appendChild(pixelElement)}}();