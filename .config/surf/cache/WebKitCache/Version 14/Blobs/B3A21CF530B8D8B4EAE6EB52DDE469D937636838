(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,n){"use strict";function r(e,t){return e+t}var a={}.hasOwnProperty;function i(e,t){return a.call(t,e)}function o(){return(o=Object.assign||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach(function(t){for(var n in t)i(n,t)&&(e[n]=t[n])}),e}).apply(void 0,arguments)}function c(e,t){var n;return(n=[]).concat.apply(n,t.map(e))}var s=Array.isArray;function u(e){return"object"===typeof e&&null!==e&&!s(e)}function l(e,t){return Object.keys(t).reduce(function(n,r){return n[r]=e(t[r]),n},{})}function d(e){return s(e)?e.map(d):u(e)?l(d,e):e}var p=function(e){for(var t=e,n=!1,r=!1,a=!1,i=0;i<t.length;i++){var o=t[i];n&&/[a-zA-Z]/.test(o)&&o.toUpperCase()===o?(t=t.slice(0,i)+"-"+t.slice(i),n=!1,a=r,r=!0,i++):r&&a&&/[a-zA-Z]/.test(o)&&o.toLowerCase()===o?(t=t.slice(0,i-1)+"-"+t.slice(i-1),a=r,r=!1,n=!0):(n=o.toLowerCase()===o,a=r,r=o.toUpperCase()===o)}return t};function f(e){var t=e.trim();return 0===t.length?"":1===t.length?t.toLowerCase():/^[a-z\d]+$/.test(t)?t:(t!==t.toLowerCase()&&(t=p(t)),t=t.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,function(e,t){return t.toUpperCase()}))}function m(e){return s(e)?e.filter(function(e){return null!==e&&void 0!==e}):Object.keys(e).reduce(function(t,n){var r=e[n];return null!==r&&void 0!==r&&(t[n]=r),t},{})}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function v(e,t){var n;return function(){clearTimeout(n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];n=setTimeout.apply(void 0,[t,e].concat(a))}}function b(e){return null===e||void 0===e}function g(e){return function(t){return b(t)?e:t}}function y(e,t){return t.slice(0,-e)}function j(e){return s(e)?e:[e]}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(e(r))return r}}function x(e,t){for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1}function _(e,t){return O(function(n){return e(t[n])},Object.keys(t))}function w(e,t){for(var n=t.length-1;n>=0;n--)if(e(t[n]))return t[n]}function C(e,t,n){for(var r=t;r>=0;r--)if(e(n[r]))return r;return-1}function E(e,t){return C(e,t.length-1,t)}function I(e,t){for(var n=[];e--;)n.push(t);return n}function S(e){return e}function k(e,t){return Object.keys(t).forEach(function(n){e(t[n],n)})}var T=function(e){return e.reduce(function(e,t){var n=t[0],r=t[1];return e[n]=r,e},{})};function A(){return Math.random().toString(36).substring(2)}function P(e){var t=A();return i(t,e)?P(e):t}function M(e,t){for(var n="string"===typeof e?e.split("."):e,r=0,a=t;a&&r<n.length;)a=a[n[r++]];return a}function N(e,t,n){var r=M(t,n);return void 0!==r&&null!==r?r:e}function z(e,t){return Object.keys(t).reduce(function(n,r){var a=e(r);return n[a]=n[a]||{},n[a][r]=t[r],n},{})}function R(e,t){return-1!==t.indexOf(e)}function D(e){return 0===(s(e)?e:Object.keys(e)).length}var L=function(e){return u(e)&&"function"===typeof e.then};function B(e,t){return t.reduce(function(t,n){return t[n[e]]=n,t},{})}function q(e){return e.length>0?e[e.length-1]:null}function U(e,t){return Object.keys(t).reduce(function(n,r){return n[e(r)]=t[r],n},{})}function F(e,t){return Object.keys(t).reduce(function(n,r){return n[r]=e(t[r],r),n},{})}function V(e,t){if(D(t))return e;var n={};return k(function(r,a){i(a,t)?u(e[a])&&u(t[a])?n[a]=V(e[a],t[a]):n[a]=t[a]:n[a]=e[a]},e),k(function(e,r){i(r,n)||(n[r]=t[r])},t),n}function G(e){if(0===e.length)return{};var t=e[0];return e.slice(1).reduce(function(e,t){return V(e,t)},t)}function H(e){return function(e,t){var n={};return function(){var r=e.apply(void 0,arguments);if(i(r,n))return n[r];var a=t.apply(void 0,arguments);return n[r]=a,a}}(S,e)}function W(e){var t,n,r=!1;return function(){return r&&(arguments.length<=0?void 0:arguments[0])===n?t:(r=!0,n=arguments.length<=0?void 0:arguments[0],t=e.apply(void 0,arguments))}}function Y(){}function J(e){return Object.keys(e).map(function(t){return e[t]})}function Q(e,t){var n="function"===typeof e?e:function(t){return M(e,t)};return(s(t)?[].concat(t):J(t)).sort(function(e,t){return n(e)-n(t)})}function K(e,t){return Object.keys(t).reduce(function(n,r){return e(t[r],r)||(n[r]=t[r]),n},{})}function Z(e,t){return K(function(t,n){return-1!==e.indexOf(n)},t)}function X(e,t){return Object.keys(t).reduce(function(n,r){return e(t[r])||(n[r]=t[r]),n},{})}function $(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(void 0,arguments))}}function ee(e,t){return[e,t]}function te(e,t){return Object.keys(t).reduce(function(n,r){return n[e(t[r])?0:1][r]=t[r],n},[{},{}])}function ne(e,t){return e.reduce(function(e,n){return e[n]=t[n],e},{})}function re(e,t){return Object.keys(t).reduce(function(n,r){return e(t[r])&&(n[r]=t[r]),n},{})}function ae(e,t){return Object.keys(t).reduce(function(n,r){return e(t[r],r)&&(n[r]=t[r]),n},{})}function ie(e,t){return e.reduce(function(e,n){return i(n,t)&&(e[n]=t[n]),e},{})}function oe(e){for(var t=[],n=0;n<=e;)t.push(n++);return t}function ce(e,t){return t.filter(function(t){return!e(t)})}function se(e,t){var n=[].concat(t);return n.splice(e,1),n}var ue=n(4);function le(e,t,n){var r,a=e.split?e.split("."):e,o=a[0],c=t;if(a.length>1){var s=null!=n&&i(o,n)?n[o]:{};c=le(a.slice(1),t,s)}return Object(ue.a)({},n,((r={})[o]=c,r))}function de(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function pe(e,t){if(de(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!i(n[a],t)||!de(e[n[a]],t[n[a]]))return!1;return!0}function fe(e){return e.some(S)}function me(e,t){return[t.slice(0,e),t.slice(e,t.length)]}function he(e,t,n){for(var r=!1,a=n.length;a>0;a--){var i=e(n[a-1],t);if(r=i[0],t=i[1],r)return me(a-1,n)}return[[],n]}function ve(e){return e.reduce(r,0)}function be(e,t,n){var r=C(function(t){return!e(t)},t,n);return r===t?[]:n.slice(r+1,t+1)}function ge(e,t){var n,r=Date.now()-2*e,a=function(){r=Date.now(),t.apply(void 0,arguments)};return function(){for(var t=Date.now(),i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];t-r>=e?a.apply(void 0,o):(clearTimeout(n),n=setTimeout.apply(void 0,[a,r-t+e].concat(o)))}}var ye=function(e){return Object.keys(e).map(function(t){return[t,e[t]]})};function je(e,t){var n,r=Date.now()-2*e,a=function(){return r=Date.now(),t.apply(void 0,arguments)};return function(){var t=Date.now();t-r>=e&&(r=Date.now()),clearTimeout(n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];n=setTimeout.apply(void 0,[a,r-t+e].concat(o))}}function Oe(e,t){var n=0;return function(){Date.now()-n>=e&&(n=Date.now(),t.apply(void 0,arguments))}}var xe=/^\s+/;function _e(e){return e.replace(xe,"")}var we=/\s+$/;function Ce(e){return e.replace(we,"")}function Ee(e,t){var n=[];return t.filter(function(t){var r=e(t);return-1===n.indexOf(r)&&(n.push(r),!0)})}function Ie(e,t,n){return[].concat(n.slice(0,e),[t],n.slice(e+1,n.length))}function Se(e,t,n){return t.map(function(t,r){return e(t,n[r])})}function ke(e,t){return Se(ee,e,t)}n.d(t,"a",function(){return o}),n.d(t,"c",function(){return d}),n.d(t,"b",function(){return f}),n.d(t,"d",function(){return m}),n.d(t,"e",function(){return h}),n.d(t,"f",function(){return v}),n.d(t,"g",function(){return g}),n.d(t,"h",function(){return y}),n.d(t,"i",function(){return j}),n.d(t,"k",function(){return O}),n.d(t,"l",function(){return x}),n.d(t,"m",function(){return _}),n.d(t,"n",function(){return w}),n.d(t,"o",function(){return E}),n.d(t,"j",function(){return I}),n.d(t,"p",function(){return c}),n.d(t,"q",function(){return k}),n.d(t,"r",function(){return T}),n.d(t,"s",function(){return A}),n.d(t,"t",function(){return P}),n.d(t,"u",function(){return M}),n.d(t,"v",function(){return N}),n.d(t,"w",function(){return z}),n.d(t,"x",function(){return i}),n.d(t,"y",function(){return S}),n.d(t,"z",function(){return R}),n.d(t,"A",function(){return s}),n.d(t,"B",function(){return D}),n.d(t,"C",function(){return b}),n.d(t,"D",function(){return u}),n.d(t,"E",function(){return L}),n.d(t,"F",function(){return B}),n.d(t,"G",function(){return q}),n.d(t,"I",function(){return U}),n.d(t,"J",function(){return l}),n.d(t,"K",function(){return F}),n.d(t,"N",function(){return V}),n.d(t,"O",function(){return G}),n.d(t,"L",function(){return H}),n.d(t,"M",function(){return W}),n.d(t,"P",function(){return Y}),n.d(t,"Q",function(){return Q}),n.d(t,"R",function(){return Z}),n.d(t,"S",function(){return X}),n.d(t,"T",function(){return K}),n.d(t,"U",function(){return $}),n.d(t,"V",function(){return te}),n.d(t,"W",function(){return ne}),n.d(t,"X",function(){return re}),n.d(t,"Y",function(){return ae}),n.d(t,"Z",function(){return ie}),n.d(t,"ab",function(){return oe}),n.d(t,"bb",function(){return ce}),n.d(t,"cb",function(){return se}),n.d(t,"db",function(){return le}),n.d(t,"eb",function(){return pe}),n.d(t,"fb",function(){return fe}),n.d(t,"gb",function(){return he}),n.d(t,"hb",function(){return ve}),n.d(t,"ib",function(){return be}),n.d(t,"jb",function(){return ge}),n.d(t,"kb",function(){return ye}),n.d(t,"lb",function(){return je}),n.d(t,"H",function(){return Oe}),n.d(t,"nb",function(){return _e}),n.d(t,"mb",function(){return Ce}),n.d(t,"ob",function(){return Ee}),n.d(t,"pb",function(){return Ie}),n.d(t,"qb",function(){return J}),n.d(t,"rb",function(){return ke}),n.d(t,"sb",function(){return Se})},12:function(e,t,n){"use strict";var r=n(1),a=function(e){return Object(r.kb)(e).map(function(e){return e.map(encodeURIComponent).join("=")}).join("&")},i=function(e){var t=e.split("&").map(function(e){return e.split("=").map(decodeURIComponent)});return Object(r.r)(t)},o=/(?:[^:]+:\/\/)?([^\/\s]+)/;function c(e){var t=e.match(o);return t&&t[1]}var s=/[^:]+:\/\/[^(\/|\?)\s]+/,u=function(e){var t=e.match(s);return t&&t[0]},l=/.*\?(.+)/,d=function(e){var t=e.match(l);return t?"?"+t[1]:""},p=function(e){return e.replace(/^\?/,"")},f=function(e){var t=p(d(e));return i(t||e)},m=function(e,t){return f(t)[e]},h=/^((http(s)?\:)?\/\/)/,v=function(e){return e.replace(h,"")},b=/^((http(s)?\:)?\/\/)/,g=function(e){var t=e.match(b);return t?t[2]:null};n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"f",function(){return m}),n.d(t,"g",function(){return f}),n.d(t,"h",function(){return v}),n.d(t,"e",function(){return g})},207:function(e,t,n){e.exports=n.p+"static/media/new_message.c597c3a2.mp3"},208:function(e,t,n){e.exports=n.p+"static/media/new_message.a37211a6.ogg"},218:function(e,t,n){e.exports=n.p+"static/media/moment_default_icon.ac8a7636.svg"},219:function(e,t,n){"use strict";var r=n(20),a=n.n(r),i=n(44),o=n(1),c=n(23),s=n(31),u=n.n(s),l=n(42),d=n.n(l),p=n(114),f=n(38),m=n(43),h=n.n(m),v=n(66),b=n(77),g="handshake",y="response",j=n(115),O=n(59),x=n(56),_=n(147),w=n(41),C=n(33),E=function(e){return!!e.data&&e.data["@@livechat/postmessenger"]},I=Object(o.U)(function(){return Object(f.a)(a()(function(e){return e.data.origin=e.origin,e.data})(u()(E)(Object(C.a)(window,"message"))))});function S(e){return function(t){return Object(w.a)(a()(e)(t))}}var k=0,T=function(e,t,n){return Object(O.a)(function(){var r=k++;return n.request=r,t(n),h()(1)(S(function(e){if(!e.data.error)return Object(x.a)(function(){return e.data.result});var t=e.data.result,n=t.real,r=t.error;if(!n)return Object(_.a)(r);var a=new Error(r.message);return Object(o.x)("code",r)&&(a.code=r.code),Object(_.a)(a)})(u()(function(e){return e.type===y&&e.request===r})(e)))})},A=function(e,t,n,r,a){return void 0===a&&(a=null),Object(j.a)({},e,{call:function(e){for(var a=arguments.length,o=new Array(a>1?a-1:0),c=1;c<a;c++)o[c-1]=arguments[c];return Object(i.a)(T(t,r,n("call",{method:e,args:o})))},emit:function(e,t){r(n("emit",{event:e,arg:t}))},data:a})},P=n(76),M=n.n(P);function N(){var e=M()();return[e,function(){var t=new Error("Destroyed.");t.code="DESTROYED",e(2,t)}]}var z=function(e,t,n,r){var a;return(a={})["@@livechat/postmessenger"]=!0,a.owner=e,a.instance=t,a.type=n,a.data=r,a},R=n(78),D=function(e,t,n,r){return function(a){switch(a.type){case"call":return void Object(R.a)(function(){var t=a.data,n=t.method,i=t.args;return r[n].apply(e,i)}).then(function(e){a.type=y,a.data={error:!1,result:e},n(a)},function(e){var t;a.type=y,e instanceof Error?(t={real:!0,error:{message:e.message}},Object(o.x)("code",e)&&(t.error.code=e.code)):t={real:!1,error:e},a.data={error:!0,result:t},n(a)});case"emit":var i=a.data,c=i.event,s=i.arg;return void t(c,s);default:return}}},L=function(e){return Object(o.V)(function(e){return"function"===typeof e},e)},B=Object(o.s)(),q=0,U=function(e){var t=document.createElement("a");return t.href=e,t.origin?"null"===t.origin?"*":t.origin:(t.protocol.length>4?t.protocol:window.location.protocol)+"//"+(t.host.length?"80"===t.port||"443"===t.port?t.hostname:t.host:window.location.host)};function F(e,t){void 0===t&&(t={});var n=L(t),r=n[0],a=n[1],i=N(),o=i[0],s=i[1],l=q++,m=e.contentWindow,y=U(e.src),j=Object(c.a)(),O=function(e,t){return z(B,l,e,t)},x=function(e){m.postMessage(e,y)},_=Object(f.a)(u()(function(e){return e.owner===B&&e.instance===l})(Object(v.a)(o)(I()))),w=A(j,_,O,x),C=Object(f.a)(h()(1)(Object(p.a)(5)(Object(b.a)(500)(Object(v.a)(o)(T(_,x,O(g,a))))))),E=D(w,j.emit,x,r);return d()(E)(S(function(){return _})(C)),{api:w,destroy:s,handshake$:C}}var V=n(25),G=function(e,t){var n=document.createElement("iframe");return e.appendChild(n),n.src=t,n};var H=n(217),W=n(74),Y=n.n(W),J=function(e){if(e.frame)return e.frame;var t=e.container,n=e.url;return G(t,n)};function Q(e,t){var n,r=e.onConnected,o=Object(H.a)(e,["onConnected"]),c=!o.frame,s=J(o),u=N(),l=u[0],f=u[1],m=function(){c&&Object(V.f)(s),n?n.destroy():f()};return d()(function(e){e.destroy=m,e.frame=s,r(e)})(Object(v.a)(l)(Object(p.a)()(S(function(){return Y()(function(e,r){var o=function(e,t){var n=F(e.frame,t),r=n.api,o=n.destroy,c=n.handshake$;return{destroy:o,promise:Object(i.a)(a()(function(e){return r.data=e,r.destroy=o,r})(c))}}({frame:s},t);return o.promise.then(e,r),n=o,o.destroy})})(Object(C.a)(s,"load"))))),{destroy:m,frame:s}}n.d(t,"a",function(){return Q})},23:function(e,t,n){"use strict";var r=n(4),a=n(201).a;t.a=function(){var e=Object.create(null),t=a(e);return Object(r.a)({},t,{off:function(n,r){n?t.off(n,r):Object.keys(e).forEach(function(t){delete e[t]})},once:function(e,n){t.on(e,function r(a,i){t.off(e,r),n(a,i)})}})}},25:function(e,t,n){"use strict";var r=n(1),a=function(e,t){Object(r.q)(function(e,n){"style"!==n?t.setAttribute(n,e):function(e,t){Object(r.q)(function(e,n){t.style[n]=e},e)}(e,t)},e)},i=!!document.documentElement.currentStyle,o=function(e,t){var n=window.getComputedStyle(t),a="border-box"===n.boxSizing,o=Object(r.W)(e,n);if(i&&a&&Object(r.x)("width",o)&&null!==o.width){var c=[o.width,n.paddingLeft,n.paddingRight,n.borderLeftWidth,n.borderRightWidth];o.width=Object(r.hb)(c.map(parseFloat))+"px"}if(i&&a&&Object(r.x)("height",o)&&null!==o.height){var s=[o.height,n.paddingTop,n.paddingBottom,n.borderTopWidth,n.borderBottomWidth];o.height=Object(r.hb)(s.map(parseFloat))+"px"}return o};function c(){return new Promise(function(e){!function t(){document.body?e(document.body):setTimeout(t,100)}()})}function s(e,t){return void 0===t&&(t=0),Math.abs(e.scrollTop+e.clientHeight-e.scrollHeight)<=t}function u(e,t){return void 0===t&&(t=0),e.scrollTop<=t}function l(e){var t=e.parentNode;t&&t.removeChild(e)}n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return s}),n.d(t,"e",function(){return u}),n.d(t,"f",function(){return l})},312:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"getView",function(){return V}),n.d(r,"getDefaultView",function(){return G}),n.d(r,"getCurrentView",function(){return H}),n.d(r,"getConnectionState",function(){return W}),n.d(r,"getEvent",function(){return Q}),n.d(r,"getEventByServerId",function(){return K}),n.d(r,"hasEvent",function(){return Z}),n.d(r,"hasEventByServerId",function(){return X}),n.d(r,"getIndexedEvents",function(){return $}),n.d(r,"getEvents",function(){return ee}),n.d(r,"getChat",function(){return te}),n.d(r,"getChatByServerId",function(){return ne}),n.d(r,"hasChat",function(){return re}),n.d(r,"getChats",function(){return ae}),n.d(r,"getUsers",function(){return ie}),n.d(r,"getSessionUser",function(){return oe}),n.d(r,"getUser",function(){return ce}),n.d(r,"getUserByServerId",function(){return se}),n.d(r,"hasUser",function(){return ue}),n.d(r,"getTimeline",function(){return le}),n.d(r,"getChatList",function(){return de}),n.d(r,"getSessionUserId",function(){return pe}),n.d(r,"getLastDeliveredEvent",function(){return fe}),n.d(r,"getLastSeenEvent",function(){return me}),n.d(r,"getLastEvent",function(){return he}),n.d(r,"getUnseenCount",function(){return ve}),n.d(r,"getParticipants",function(){return be}),n.d(r,"localize",function(){return ge}),n.d(r,"getApplicationState",function(){return ye});var a={};n.r(a),n.d(a,"addView",function(){return xe}),n.d(a,"setCurrentView",function(){return _e}),n.d(a,"updateView",function(){return we}),n.d(a,"setDefaultView",function(){return Ce}),n.d(a,"addChat",function(){return Ee}),n.d(a,"addEvent",function(){return Ie}),n.d(a,"addHistoryEvents",function(){return Se}),n.d(a,"addParticipant",function(){return ke}),n.d(a,"addUser",function(){return Te}),n.d(a,"flushChat",function(){return Ae}),n.d(a,"recalculateTimeline",function(){return Pe}),n.d(a,"removeParticipant",function(){return Me}),n.d(a,"sendEvent",function(){return Ne}),n.d(a,"setApplicationState",function(){return ze}),n.d(a,"updateFeature",function(){return Re}),n.d(a,"setConnectionState",function(){return De}),n.d(a,"setChatServerId",function(){return Le}),n.d(a,"setEventData",function(){return Be}),n.d(a,"setEventServerId",function(){return qe}),n.d(a,"setLocalization",function(){return Ue}),n.d(a,"setUserServerId",function(){return Fe}),n.d(a,"setUserProperties",function(){return Ge}),n.d(a,"requestSetUserProperties",function(){return He}),n.d(a,"updateChat",function(){return Ye}),n.d(a,"requestUpdateChat",function(){return Je}),n.d(a,"updateEvent",function(){return Ke}),n.d(a,"requestUpdateEvent",function(){return Ze}),n.d(a,"updateUser",function(){return $e}),n.d(a,"requestUpdateUser",function(){return et});var i={};n.r(i),n.d(i,"CONNECTED",function(){return dt}),n.d(i,"DISCONNECTED",function(){return pt}),n.d(i,"NOT_INITIALIZED",function(){return ft}),n.d(i,"RECONNECTING",function(){return mt});var o={};n.r(o),n.d(o,"chatStarted",function(){return si}),n.d(o,"newMessage",function(){return ui}),n.d(o,"chatEnded",function(){return li}),n.d(o,"newAgent",function(){return di}),n.d(o,"visitorDataSet",function(){return pi}),n.d(o,"visitorDataSetError",function(){return fi}),n.d(o,"newFile",function(){return mi}),n.d(o,"visitorQueued",function(){return hi}),n.d(o,"typingIndicator",function(){return vi}),n.d(o,"rateChat",function(){return bi}),n.d(o,"setVisitorData",function(){return gi}),n.d(o,"sendFile",function(){return yi}),n.d(o,"requestFileToken",function(){return ji}),n.d(o,"fileTokenReceived",function(){return Oi}),n.d(o,"newInvitation",function(){return xi}),n.d(o,"messageSeen",function(){return _i}),n.d(o,"protocolUpgraded",function(){return wi}),n.d(o,"integrationData",function(){return Ci});var c={};n.r(c),n.d(c,"INIT",function(){return Sh}),n.d(c,"INVITATION",function(){return kh}),n.d(c,"CHAT_STARTED",function(){return Th});var s={};n.r(s),n.d(s,"heading",function(){return v_}),n.d(s,"subheading",function(){return b_}),n.d(s,"input",function(){return g_}),n.d(s,"placeholder",function(){return y_}),n.d(s,"caption",function(){return j_}),n.d(s,"basic",function(){return O_}),n.d(s,"basicContrast",function(){return x_}),n.d(s,"errorCaption",function(){return __});var u=function(){window.performance&&"function"===typeof window.performance.mark&&window.performance.mark("lc_js_loaded")};u();var l=n(144),d=n.n(l);/native code/.test(window.Promise)||(window.Promise=d.a),"function"!==typeof window.Promise.prototype.finally&&(window.Promise.prototype.finally=d.a.prototype.finally);n(223),n(241),n(243),n(248),n(253),n(255);var p=n(100),f=n.n(p),m=n(1);Object.assign=f.a,"function"!==typeof Array.prototype.find&&(Array.prototype.find=function(e){return Object(m.k)(e,this)});var h=n(6),v=n(9),b=n(60),g=n(12),y=/sendURLToGuardwareProxy/i;var j=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return function(e,t){var n=JSON.stringify(t);if(!y.test(n)){var r={licence_id:Object(g.f)("license",window.location.search),event_id:e,message:n};return Object(b.a)("https://queue.livechatinc.com/logs",{method:"POST",mode:"no-cors",headers:{Accept:"*/*","Content-Type":"application/x-www-form-urlencoded"},body:Object(g.a)(r)}).catch(m.P)}}("chat_widget_"+e,(t instanceof Error?["err",t.message,"stack",t.stack,"code",t.code]:["err",JSON.stringify(t)]).concat("ua: "+navigator.userAgent,r).join("\n"))},O=n(68),x=n(4),_=n(32),w=n(23);function C(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e}var E=function(e,t){var n=function n(){var r=t.apply(void 0,arguments);return"function"===typeof r?n:{type:e,payload:r}};return n.getActionName=function(){return e},n.toString=function(){return e},n},I=function(e,t){var n=function(n){var r=Object.create(n);r.action=function(t,r){var a={type:e,payload:t};r&&(a.meta=r),n.dispatch(a)};for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];return t.apply(void 0,[r].concat(i))};return n.toString=function(){return e},n},S=function(e,t){var n="REQUEST_"+e,r=I(e,t),a=function(e){for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];var c,s=Object.create(e);if(s.action=function(t){var a=C(),o=a.promise,s=a.resolve,u=a.reject;e.dispatch({type:n,payload:Object(x.a)({},t,{resolve:s,reject:u})}),(c=o).then(function(){r.apply(void 0,[e].concat(i))},m.P)},t.apply(void 0,[s].concat(i)),"undefined"===typeof c)throw new Error("You forgot to call `action` handler in "+n+" creator.");return c};return a.toString=function(){return n},{actionMethod:r,requestActionMethod:a}},k=function(e,t){if("object"!==typeof e||null===e||Array.isArray(e))throw new Error("bindActionMethods expects a plain object with actionMethods as values.");return Object(m.J)(function(e){return function(e,t){return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e.apply(void 0,[t].concat(r))}}(e,t)},e)},T=function(e,t){return t[void 0]&&console.warn(["Reducer contains an 'undefined' action type.","Have you misspelled a constant?"].join("\n")),function(n,r){return void 0===n&&(n=e),t.hasOwnProperty(r.type)?t[r.type](n,r.payload):n}};var A=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},P=function(e){var t;return(t={})["SET_PROPERTY_"+e.toUpperCase()]=function(t,n){var r;return Object(x.a)({},t,((r={})[e]=n.data,r))},t["REMOVE_PROPERTY_"+e.toUpperCase()]=function(t){return Object(x.a)({},Object(m.R)([e],t))},t},M=function(e){var t;return(t={})["getProperty"+A(e)]=function(t){return t[e]},t},N=function(e){var t;return(t={})["setProperty"+A(e)]=E("SET_PROPERTY_"+e.toUpperCase(),function(e){return{data:e}}),t["removeProperty"+A(e)]=E("REMOVE_PROPERTY_"+e.toUpperCase(),function(){return{propName:e}}),t},z=function(e,t){if("object"!==typeof e||null===e||Array.isArray(e))throw new Error("bindSelectors expects a plain object with selectors as values.");return Object(m.J)(function(e){return function(e,t){return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e.apply(void 0,[t()].concat(r))}}(e,t)},e)},R=function(){var e=[],t=function(t){return function(n){return function(r){var a=n(r);return e.forEach(function(e){e(r,t)}),a}}};return t.add=function(t){e.push(t)},t},D=n(10),L=function(e){var t=e.id,n=e.serverId,r=void 0===n?null:n,a=e.active,i=void 0===a||a,o=e.participants,c=void 0===o?[]:o,s=e.properties,u=void 0===s?{}:s;if("string"!==typeof t)throw new Error("Chat ID has to be a string.");if(null!==r&&t!==r)throw new Error('If serverId is given ("'+r+'") it should match id ("'+t+'").');return{id:t,serverId:r,active:i,participants:c,properties:u}},B=function(e){var t=e.id,n=e.serverId,r=void 0===n?null:n,a=e.type,i=e.author,o=e.timestamp,c=e.own,s=e.delivered,u=void 0===s||s,l=e.seen,d=void 0!==l&&l,p=e.failed,f=void 0!==p&&p,m=e.properties,h=void 0===m?{}:m;if("string"!==typeof t)throw new Error("Event ID has to be a string.");if("string"!==typeof a)throw new Error("Event has to have string `type` property.");if(null!==r&&t!==r)throw new Error('If serverId is given ("'+r+'") it should match id ("'+t+'").');return{id:t,serverId:r,type:a,author:i,own:c,timestamp:o,delivered:u,seen:d,failed:f,properties:h}},q=function(e){var t=e.id,n=e.serverId,r=void 0===n?t:n,a=e.type,i=void 0===a?null:a,o=e.name,c=void 0===o?null:o,s=e.email,u=void 0===s?null:s,l=e.avatar,d=void 0===l?null:l,p=e.properties,f=void 0===p?{}:p;if("string"!==typeof t)throw new Error("User ID has to be a string.");return{id:t,serverId:r,type:i,name:c,email:u,avatar:d,properties:f}},U=n(62),F=function(e,t){return t},V=function(e,t){var n=t.replace(/\//gi,".");return Object(m.u)(n,e.views)},G=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object(m.u)(n+"._default",e.views)},H=function(e){return e.views.current},W=function(e){return e.session.connectionState},Y=function(e){return e.entities.chats.byIds},J=function(e,t){return Y(e)[t]},Q=function(e,t,n){return J(e,t).events.byIds[n]},K=function(e,t,n){return Q(e,t,J(e,t).events.serverIdsMapping[n])},Z=function(e,t,n){return!!Q(e,t,n)},X=function(e,t,n){return!!K(e,t,n)},$=function(e,t){return J(e,t).events.byIds},ee=Object(U.a)([function(e,t){return J(e,t).events.orderedIds},$],function(e,t){return e.map(function(e){return t[e]})})(F),te=Object(U.a)([J,ee],function(e,t){return Object(x.a)({},e,{events:t})})(F),ne=function(e,t){return te(e,e.entities.chats.serverIdsMapping[t])},re=function(e,t){return!!J(e,t)},ae=function(e){return Object(m.J)(function(t){var n=t.id;return te(e,n)},Y(e))},ie=function(e){return e.entities.users.byIds},oe=function(e){return ie(e)[function(e){return e.session.id}(e)]},ce=function(e,t){return ie(e)[t]},se=function(e,t){return ce(e,e.entities.users.serverIdsMapping[t])},ue=function(e,t){return!!ce(e,t)},le=function(e,t){return e.views.Chat[t].timeline},de=function(e){return e.views.ChatList},pe=function(e){return oe(e).id},fe=Object(U.a)([ee,pe],function(e,t){return Object(m.n)(function(e){var n=e.delivered,r=e.author;return n&&r===t},e)})(F),me=Object(U.a)([ee,pe],function(e,t){return Object(m.n)(function(e){var n=e.seen,r=e.author;return n&&r===t},e)})(F),he=function(e,t){return Object(m.G)(ee(e,t))},ve=function(e,t){var n=ee(e,t),r=oe(e).id,a=Object(m.o)(function(e){return e.author===r&&"message"===e.type&&(!e.properties||"file"!==e.properties.serverType)||!0===e.seen&&"system_message"!==e.type},n);return n.slice(a+1).filter(function(e){return e.author!==r&&!e.seen&&"form"!==e.type}).length},be=Object(U.a)([function(e,t){return J(e,t).participants},ie],function(e,t){return e.map(function(e){return t[e]})})(F),ge=function(e,t,n){var r=e.localization[t];return n?Object.keys(n).reduce(function(e,t){return e.replace(new RegExp("%"+t+"%","g"),n[t])},r):r},ye=function(e,t){return void 0===t?e.application:e.application[t]},je=["delivered","seen","failed","properties"],Oe=function(e,t){return e.forEach(function(e){if(Object(m.x)(e,t))throw new Error("Updating `"+e+"` property is not possible.")})},xe=I("ADD_VIEW",function(e,t,n){var r=e.action,a=e.getState;if(void 0===n&&(n={}),V(a(),t))throw new Error('There is already the "'+t+'" view. It has to be unique.');return r({name:t,data:n}),V(a(),t)}),_e=I("SET_CURRENT_VIEW",function(e,t){var n=e.action,r=e.getState;if(!V(r(),t))throw new Error('Given view "'+t+"\" doesn't exist.");return n({name:t}),H(r())}),we=I("UPDATE_VIEW",function(e,t,n){var r=e.action,a=e.getState;if(!V(a(),t))throw new Error('There is no "'+t+'" view. You should add it first.');return r({name:t,data:n}),V(a(),t)}),Ce=I("SET_DEFAULT_VIEW",function(e,t,n){var r=e.action,a=e.getState;return r({name:n,path:t}),V(a(),t+"/"+n)}),Ee=I("ADD_CHAT",function(e,t){var n=e.action,r=e.getState,a=void 0===t?{}:t,i=a.events,o=void 0===i?[]:i,c=Object(D.a)(a,["events"]);if(re(r(),c.id))throw new Error('There is already a chat with "'+c.id+'" ID. It has to be unique.');var s=Object(m.k)(function(e){return!ue(r(),e)},o.map(function(e){return e.author}).concat(c.participants||[]));if(s)throw new Error('Given user ("'+s+"\") doesn't exist. You should add it first.");var u=c.id||Object(m.t)(ae(r()));return n({id:u,chat:L(Object(x.a)({},c,{id:u})),events:o.map(B)}),te(r(),u)}),Ie=I("ADD_EVENT",function(e,t,n){var r=e.action,a=e.getState,i=n.id,o=n.serverId,c=a();if(i&&o&&i!==o)throw new Error('Specified ID ("'+i+'") differs from specified serverId ("'+o+'"). You either should use only ID or both should be the same.');if(!re(c,t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(Z(c,t,i))throw new Error('There is already an event with "'+i+'" ID in this chat ("'+t+'"). It has to be unique.');if(!ue(c,n.author))throw new Error('Specified author ("'+n.author+"\") doesn't exist. You should add it first.");return r({id:i,chat:t,event:B(Object(x.a)({timestamp:Date.now()},n,{own:n.author===pe(c)}))}),Q(a(),t,i)}),Se=I("ADD_HISTORY_EVENTS",function(e,t,n){var r=e.action,a=(0,e.getState)();if(!re(a,t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');n.forEach(function(e){if(Z(a,t,e.id))throw new Error('There is already an event with "'+e.id+'" ID in this chat ("'+t+'"). It has to be unique.');if(!ue(a,e.author))throw new Error('Specified author ("'+e.author+"\") doesn't exist. You should add it first.")});var i=pe(a);r({chat:t,events:n.map(function(e){return B(Object(x.a)({},e,{serverId:e.id,own:e.author===i}))})})}),ke=I("ADD_PARTICIPANT",function(e,t,n){var r=e.action,a=e.getState;if(!re(a(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(!ue(a(),n))throw new Error('Given user ("'+n+"\") doesn't exist. You should add it first.");return r({chat:t,user:n}),be(a(),t)}),Te=I("ADD_USER",function(e,t){var n=e.action,r=e.getState,a=t.id;if(ue(r(),a))throw new Error('There is already a user with "'+a+'" ID. It has to be unique.');return n({id:a,user:q(t)}),ce(r(),a)}),Ae=I("FLUSH_CHAT",function(e,t){var n=e.action,r=e.getState;if(!re(r(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');return n({id:t}),te(r(),t)}),Pe=I("RECALCULATE_TIMELINE",function(e,t){var n=e.action,r=e.getState;if(!re(r(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');return n({id:t}),le(r(),t)}),Me=I("REMOVE_PARTICIPANT",function(e,t,n){var r=e.action,a=e.getState;if(!re(a(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(!ue(a(),n))throw new Error('Given user ("'+n+"\") doesn't exist. You should add it first.");return r({chat:t,user:n}),be(a(),t)}),Ne=I("SEND_EVENT",function(e,t,n,r){var a=e.action,i=e.getState;if(!re(i(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(Z(i(),t,n.id))throw new Error('There is already an event with "'+n.id+'" ID in this chat ("'+t+'"). It has to be unique.');var o=n.id||Object(m.t)($(i(),t));return a({id:o,chat:t,event:B(Object(x.a)({},n,{author:oe(i()).id,own:!0,id:o,timestamp:Date.now(),delivered:!1}))},r),Q(i(),t,o)}),ze=I("SET_APPLICATION_STATE",function(e,t){var n=e.action,r=e.getApplicationState;if(!t||Object(m.B)(t))throw new Error("Given data object is empty.");return n(t),r()}),Re=I("UPDATE_FEATURE",function(e,t,n){var r=e.action,a=e.getApplicationState;if(!n||!t||Object(m.B)(n))throw new Error("Given data object is empty.");return r({feature:t,data:n}),a()}),De=I("SET_CONNECTION_STATE",function(e,t){var n=e.action,r=e.getState;return n({connectionState:t}),W(r())}),Le=I("SET_CHAT_SERVER_ID",function(e,t,n){var r=e.action,a=e.getState;if(!re(a(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(null!==te(a(),t).serverId)throw new Error('Chat with "'+t+'" ID has already serverId.');return r({id:t,serverId:n}),te(a(),t)}),Be=I("SET_EVENT_DATA",function(e,t,n,r){var a=e.action,i=e.getState;if(!re(i(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(!Z(i(),t,n))throw new Error('There is no "'+n+'" event in "'+t+'" chat. You should add it first.');return Oe(["id","type","own"],r),a({chat:t,id:n,data:Object(x.a)({},Object(m.Z)(je.concat("author","serverId","timestamp"),r),{own:r.author===pe(i())})}),Q(i(),t,n)}),qe=I("SET_EVENT_SERVER_ID",function(e,t,n,r){var a=e.action,i=e.getState;if(!re(i(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(!Z(i(),t,n))throw new Error('There is no "'+n+'" event in "'+t+'" chat. You should add it first.');if(null!==Q(i(),t,n).serverId)throw new Error('Event with "'+n+'" ID has already serverId.');return a({chat:t,id:n,serverId:r}),Q(i(),t,n)}),Ue=I("SET_LOCALIZATION",function(e,t){(0,e.action)(t)}),Fe=I("SET_USER_SERVER_ID",function(e,t,n){var r=e.action,a=e.getState;if(!ue(a(),t))throw new Error('There is no "'+t+'" user. You should add it first.');if(null!==ce(a(),t).serverId)throw new Error('User with "'+t+'" ID has already serverId.');return r({id:t,serverId:n}),ce(a(),t)}),Ve=S("SET_USER_PROPERTIES",function(e,t,n){var r=e.action,a=e.getState;if(!ue(a(),t))throw new Error('There is no user with "'+t+'" ID. You should add it first.');return r({id:t,properties:n}),ce(a(),t)}),Ge=Ve.actionMethod,He=Ve.requestActionMethod,We=S("UPDATE_CHAT",function(e,t,n){var r=e.action,a=e.getState;if(!re(a(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');return Oe(["id","participants","events"],n),r({id:t,data:Object(m.Z)(["active","properties"],n)}),te(a(),t)}),Ye=We.actionMethod,Je=We.requestActionMethod,Qe=S("UPDATE_EVENT",function(e,t,n,r){var a=e.action,i=e.getState;if(!re(i(),t))throw new Error('There is no chat with "'+t+'" ID. You should add it first.');if(!Z(i(),t,n))throw new Error('There is no "'+n+'" event in "'+t+'" chat. You should add it first.');return Oe(["id","type","author","own","timestamp"],r),a({chat:t,id:n,data:Object(m.Z)(je,r)}),Q(i(),t,n)}),Ke=Qe.actionMethod,Ze=Qe.requestActionMethod,Xe=S("UPDATE_USER",function(e,t,n){var r=e.action,a=e.getState;if(!ue(a(),t))throw new Error('There is no user with "'+t+'" ID. You should add it first.');return Oe(["id","type"],n),r({id:t,data:Object(m.Z)(["name","email","avatar","properties"],n)}),ce(a(),t)}),$e=Xe.actionMethod,et=Xe.requestActionMethod,tt=function(e){var t;return void 0===e&&(e={}),T(e,((t={})[Re]=function(e,t){var n,r=t.feature,a=t.data;return Object(x.a)({},e,{config:Object(x.a)({},e.config,{features:Object(x.a)({},e.config.features,(n={},n[r]=Object(x.a)({},e.config.features[r],a),n))})})},t[ze]=function(e,t){return Object(x.a)({},e,t)},t))},nt=function(e){return Object(m.qb)(e).reduce(function(e,t){var n=t.serverId,r=t.id;return null===n?e:(e[n]=r,e)},{})},rt=function(e,t){var n;return null!==t.serverId?Object(x.a)({},e,((n={})[t.serverId]=t.id,n)):e},at=function(e,t){var n,r,a=t.id,i=t.chat,o=t.event;return Object(x.a)({},e,{chats:Object(x.a)({},e.chats,{byIds:Object(x.a)({},e.chats.byIds,(r={},r[i]=Object(x.a)({},e.chats.byIds[i],{events:{byIds:Object(x.a)({},e.chats.byIds[i].events.byIds,(n={},n[a]=o,n)),orderedIds:e.chats.byIds[i].events.orderedIds.concat(a),serverIdsMapping:rt(e.chats.byIds[i].events.serverIdsMapping,o)}}),r))})})},it=function(e,t){var n,r=t.chat,a=t.events;return Object(x.a)({},e,{chats:Object(x.a)({},e.chats,{byIds:Object(x.a)({},e.chats.byIds,(n={},n[r]=Object(x.a)({},e.chats.byIds[r],{events:{byIds:Object(x.a)({},e.chats.byIds[r].events.byIds,Object(m.F)("id",a)),orderedIds:a.map(function(e){return e.id}).concat(e.chats.byIds[r].events.orderedIds),serverIdsMapping:Object(x.a)({},e.chats.byIds[r].events.serverIdsMapping,Object(m.J)(function(e){return e.id},Object(m.F)("serverId",a)))}}),n))})})},ot=function(e,t){var n,r=t.id,a=t.user;return Object(x.a)({},e,{users:Object(x.a)({},e.users,{byIds:Object(x.a)({},e.users.byIds,(n={},n[r]=a,n)),serverIdsMapping:rt(e.users.serverIdsMapping,a)})})},ct=function(e,t,n){var r,a=n.properties,i=Object(D.a)(n,["properties"]),o=e.byIds[t];return Object(x.a)({},e,{byIds:Object(x.a)({},e.byIds,(r={},r[t]=Object(x.a)({},o,i,{properties:a?Object(x.a)({},o.properties,a):o.properties}),r))})},st=function(e,t,n){var r,a,i=e.byIds[t],o={byIds:Object(x.a)({},e.byIds,(r={},r[t]=Object(x.a)({},i,n),r))};n.serverId&&Object(m.x)("serverIdsMapping",e)&&(o.serverIdsMapping=Object(x.a)({},e.serverIdsMapping,((a={})[n.serverId]=t,a)));return Object(x.a)({},e,o)},ut=function(e){var t,n=(void 0===e?{}:e).users,r=void 0===n?[]:n,a=Object(m.F)("id",r.map(q));return T({users:{byIds:Object(x.a)({},a,{system:{id:"system",type:"system"}}),serverIdsMapping:nt(a)},chats:{byIds:{},serverIdsMapping:{}}},((t={})[Ee]=function(e,t){var n,r=t.id,a=t.chat,i=t.events;return Object(x.a)({},e,{chats:Object(x.a)({},e.chats,{byIds:Object(x.a)({},e.chats.byIds,(n={},n[r]=Object(x.a)({},a,{events:{byIds:Object(m.F)("id",i),orderedIds:i.map(function(e){return e.id}),serverIdsMapping:nt(i)}}),n)),serverIdsMapping:rt(e.chats.serverIdsMapping,a)})})},t[Ie]=at,t[Se]=it,t[ke]=function(e,t){var n,r=t.chat,a=t.user,i=e.chats.byIds[r].participants;return Object(m.l)(function(e){return a===e},i)>-1?e:Object(x.a)({},e,{chats:Object(x.a)({},e.chats,{byIds:Object(x.a)({},e.chats.byIds,(n={},n[r]=Object(x.a)({},e.chats.byIds[r],{participants:[].concat(i,[a])}),n))})})},t[Te]=ot,t[Ae]=function(e,t){var n,r=t.id;return Object(x.a)({},e,{chats:Object(x.a)({},e.chats,{byIds:Object(x.a)({},e.chats.byIds,(n={},n[r]=Object(x.a)({},e.chats.byIds[r],{serverId:null,events:{byIds:{},orderedIds:[],serverIdsMapping:{}},properties:{}}),n))})})},t[Me]=function(e,t){var n,r=t.chat,a=t.user,i=e.chats.byIds[r].participants,o=Object(m.l)(function(e){return a===e},i);return-1===o?e:Object(x.a)({},e,{chats:Object(x.a)({},e.chats,{byIds:Object(x.a)({},e.chats.byIds,(n={},n[r]=Object(x.a)({},e.chats.byIds[r],{participants:Object(m.cb)(o,i)}),n))})})},t[Ne]=at,t[Le]=function(e,t){var n,r=t.id,a=t.serverId;return Object(x.a)({},e,{chats:Object(x.a)({},ct(e.chats,r,{serverId:a}),{serverIdsMapping:Object(x.a)({},e.chats.serverIdsMapping,(n={},n[a]=r,n))})})},t[qe]=function(e,t){var n,r,a=t.id,i=t.chat,o=t.serverId;return Object(x.a)({},e,{chats:Object(x.a)({},e.chats,{byIds:Object(x.a)({},e.chats.byIds,(r={},r[i]=Object(x.a)({},e.chats.byIds[i],{events:Object(x.a)({},ct(e.chats.byIds[i].events,a,{serverId:o}),{serverIdsMapping:Object(x.a)({},e.chats.byIds[i].events.serverIdsMapping,(n={},n[o]=a,n))})}),r))})})},t[Be]=function(e,t){var n,r=t.id,a=t.chat,i=t.data;return Object(x.a)({},e,{chats:Object(x.a)({},e.chats,{byIds:Object(x.a)({},e.chats.byIds,(n={},n[a]=Object(x.a)({},e.chats.byIds[a],{events:st(e.chats.byIds[a].events,r,i)}),n))})})},t[Ge]=function(e,t){var n=t.id,r=t.properties;return Object(x.a)({},e,{users:st(e.users,n,{properties:r})})},t[Fe]=function(e,t){var n,r=t.id,a=t.serverId;return Object(x.a)({},e,{users:Object(x.a)({},ct(e.users,r,{serverId:a}),{serverIdsMapping:Object(x.a)({},e.users.serverIdsMapping,(n={},n[a]=r,n))})})},t[Ye]=function(e,t){var n=t.id,r=t.data;return Object(x.a)({},e,{chats:ct(e.chats,n,r)})},t[Ke]=function(e,t){var n,r=t.id,a=t.chat,i=t.data;return Object(x.a)({},e,{chats:Object(x.a)({},e.chats,{byIds:Object(x.a)({},e.chats.byIds,(n={},n[a]=Object(x.a)({},e.chats.byIds[a],{events:ct(e.chats.byIds[a].events,r,i)}),n))})})},t[$e]=function(e,t){var n=t.id,r=t.data;return Object(x.a)({},e,{users:ct(e.users,n,r)})},t))},lt=function(e){return void 0===e&&(e={}),function(t,n){return void 0===t&&(t=e),n.type!==String(Ue)?t:Object(x.a)({},t,n.payload)}},dt="connected",pt="disconnected",ft="not_initialized",mt="reconnecting",ht=function(e){var t;return T(function(e){var t=e.id,n=e.connectionState;return{id:t,connectionState:void 0===n?ft:n}}(e),((t={})[De]=function(e,t){var n=t.connectionState;return Object(x.a)({},e,{connectionState:n})},t))},vt=function(e){return+new Date(e).setHours(0,0,0,0)},bt=function(e,t){return vt(e)===vt(t)},gt=function(e){var t=e.sessionUserId,n=e.event,r=e.showDate,a=void 0!==r&&r,i=e.time,o=void 0!==i&&i,c={own:n.author===t,author:n.author,events:[{id:n.id,type:n.type}],type:n.type};return a&&(c.showDate=!0),(a||o)&&(c.time=n.timestamp),c},yt=function(e,t){return gt({sessionUserId:oe(e).id,event:t,showDate:!0})},jt=function(e){return Object(m.Q)(function(e){return-1*Object(m.v)(0,"timestamp",Object(m.G)(e.events))},e).map(function(e){return{id:e.id}})},Ot=function(e,t){var n,r=t.id;return Object(x.a)({},e,{Chat:Object(x.a)({},e.Chat,(n={},n[r]=Object(x.a)({},e.Chat[r],{timeline:[]}),n))})},xt=function(){return!1},_t=function(){return!0},wt=function(){return function(e){return void 0===e&&(e={}),e}},Ct=function(e,t){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){return t.reduce(function(e,t){return t(e,n)},e)}}(Object(_.c)(Object(m.K)(function(t,n){return t(e[n])},{application:tt,entities:ut,localization:lt,session:ht,views:wt})),function(e){var t=e.shouldAddToTimeline,n=void 0===t?_t:t,r=e.shouldCreateNewGroup,a=void 0===r?xt:r,i=function(e,t){var n=oe(e).id;return function(r,i){var o=Object(m.G)(r),c=Q(e,t,Object(m.G)(o.events).id);if(!bt(c.timestamp,i.timestamp))return[].concat(r,[gt({sessionUserId:n,event:i,showDate:!0})]);var s=Object(m.n)(function(e){return e.time},r).time;return i.timestamp>=s+3e5?[].concat(r,[gt({sessionUserId:n,event:i,time:!0})]):o.author!==i.author||a(i)?[].concat(r,[gt({sessionUserId:n,event:i})]):[].concat(Object(m.h)(1,r),[Object(x.a)({},o,{events:[].concat(o.events,[{id:i.id,type:i.type}])})])}},o=function(e,t,r){var a=r.filter(n);if(0===a.length)return[];var o=a[0],c=a.slice(1),s=yt(e,o);return c.reduce(i(e,t),[s])},c=function(e,t,n){var r=ae(n);return{Chat:Object(m.J)(function(e){var t;return(t={})[e.id]={timeline:o(n,e.id,e.events)},t},r),ChatList:jt(r),current:null}},s=function(e,t,n){var r,a=t.id;return Object(x.a)({},e,{Chat:Object(x.a)({},e.Chat,(r={},r[a]={timeline:o(n,a,te(n,a).events)},r)),ChatList:jt(ae(n))})},u=function(e,t,r){var a,o=t.chat,c=t.id,s=le(r,o),u=Q(r,o,c);return n(u)?Object(x.a)({},e,{Chat:Object(x.a)({},e.Chat,(a={},a[o]=Object(x.a)({},e.Chat[o],{timeline:s.length>0?i(r,o)(s,u):[yt(r,u)]}),a)),ChatList:jt(ae(r))}):e},l=function(e,t,n){var r,a=t.chat,i=t.events,c=e.Chat[a].timeline,s=c[0],u=c.slice(1),l=Object(m.G)(i);s&&bt(l.timestamp,s.time)&&(s=Object(x.a)({},s,{showDate:bt(Date.now(),s.time)}));var d=o(n,a,i),p=s?[].concat(d,[s],u):d,f=i[0],h=!bt(f.timestamp,Date.now());return Object(x.a)({},e,{Chat:Object(x.a)({},e.Chat,(r={},r[a]=Object(x.a)({},e.Chat[a],{hasDividers:h,timeline:p}),r))})},d=function(e,t,n){var r,a=t.id;return Object(x.a)({},e,{Chat:Object(x.a)({},e.Chat,(r={},r[a]={timeline:o(n,a,te(n,a).events)},r))})};return function(e,t){var n=t.type,r=t.payload;if(Object(m.B)(e.views))return Object(x.a)({},e,{views:c(e.views,0,e)});switch(n){case String(Ee):return Object(x.a)({},e,{views:s(e.views,r,e)});case String(Ie):case String(Ne):return Object(x.a)({},e,{views:u(e.views,r,e)});case String(Se):return Object(x.a)({},e,{views:l(e.views,r,e)});case String(xe):var a=r.name.replace(/\//gi,".");return Object(x.a)({},e,{views:Object(m.db)(a,r.data,e.views)});case String(Ae):return Object(x.a)({},e,{views:Ot(e.views,r)});case String(Ce):var i=r.path.replace(/\//gi,".")+"._default";return Object(x.a)({},e,{views:Object(m.db)(i,r.name,e.views)});case String(Pe):return Object(x.a)({},e,{views:d(e.views,r,e)});case String(_e):return Object(x.a)({},e,{views:Object(x.a)({},e.views,{current:r.name})});case String(we):var o=r.name.replace(/\//gi,"."),p=Object(m.u)(o,e.views);return Object(x.a)({},e,{views:Object(m.db)(o,Object(x.a)({},p,r.data),e.views)});default:return e}}}(t))},Et=function(e,t){var n=e.id,r=t.getState;return te(r(),n)},It=function(e,t){var n=e.id,r=e.chat,a=t.getState;return{chat:r,event:Q(a(),r,n)}},St=function(e,t){var n=e.id,r=t.getState;return ce(r(),n)},kt=function(e){var t=H(e);return{view:t,default:G(e,t)}},Tt=function(e){var t;return function(e,t){return function(n,r){if(e.hasOwnProperty(n.type)){var a=e[n.type](n.payload,r);n.meta&&(a.meta=n.meta),t(n.type.toLowerCase(),a)}}}(((t={})[Ee]=Et,t[Ie]=It,t[Te]=St,t[Ae]=Et,t[Je]=m.y,t[Ze]=m.y,t[Ne]=It,t[ze]=function(e,t){var n=t.getState;return ye(n())},t[De]=function(e,t){var n=t.getState;return W(n())},t[_e]=function(e,t){var n=e.name,r=t.getState;return{name:n,data:V(r(),n),viewInfo:kt(r())}},t[Ce]=function(e,t){var n=e.name,r=e.path,a=t.getState;return{name:n,path:r,data:V(a(),r+"/"+n),viewInfo:kt(a())}},t[Ye]=Et,t[Ke]=It,t[$e]=St,t[Ge]=St,t[et]=m.y,t[He]=m.y,t[Le]=m.y,t),e)},At=function(e){var t=e.entities,n=void 0===t?{}:t,r=e.session,a=void 0===r?{}:r,i=a.id,o=void 0===i?"session_"+Object(m.s)():i,c=n.users,s=void 0===c?[]:c,u=Object(m.k)(function(e){return e.id===o},s);return Object(x.a)({},e,{entities:Object(x.a)({},n,{users:u?s:[].concat(s,[{id:o,serverId:null}])}),session:Object(x.a)({},a,{id:o})})};var Pt=n(116),Mt={},Nt=function(){return Mt};function zt(e,t){return void 0===t&&(t={}),Object(Pt.b)(e,Nt,void 0,Object(x.a)({areStatesEqual:function(e){return e.getState()===e.getPreviousState()}},t))}var Rt=n(0),Dt=n(17),Lt=Rt.createContext(),Bt=Lt.Provider,qt=Lt.Consumer,Ut=zt(function(e){return{localization:e.getState().localization,localize:e.localize}})(function(e){function t(){return e.apply(this,arguments)||this}return Object(Dt.a)(t,e),t.prototype.render=function(){var e=this;return Rt.createElement(Bt,{value:function(t,n){return e.props.localize(t,n)}},this.props.children)},t}(Rt.Component)),Ft=function(e){if("string"===typeof e.children){var t=e.children,n=Object(D.a)(e,["children"]);return Rt.createElement(qt,null,function(e){return e(t,n)})}return Rt.createElement(qt,e)};function Vt(e){var t=e.store,n=e.children,r=Object.create(t);return r.getState=function(){return t},Rt.createElement(Pt.a,{store:r},Rt.createElement(Ut,null,n))}var Gt=i.CONNECTED,Ht=i.DISCONNECTED,Wt=i.RECONNECTING,Yt=function(e,t){var n=t.getChat(e).properties.currentAgent;return n?t.getUser(n):null},Jt=function(e,t){return t.getApplicationState("config").features[e]},Qt=function(e){return Jt("chatHistory",e).enabled},Kt=function(e,t,n){var r=t.authorPredicate,a=t.lastSeenPredicate,i=n.getEvents(e),o=Object(m.o)(a,i),c=Object(m.ib)(function(e){return r(e)||!e.seen},o,i);return Object(m.bb)(r,c)},Zt=function(e,t,n){var r=n.getSessionUserId();return Kt(e,{authorPredicate:function(e){return e.author!==r},lastSeenPredicate:function(e){var n=e.properties.serverTimestamp;return(void 0!==n?n:e.timestamp)<=t}},n)},Xt=function(e,t,n){var r=n.getSessionUserId();return Kt(e,{authorPredicate:function(e){return e.author===r},lastSeenPredicate:function(e){return e.timestamp<=t}},n)},$t=function(e,t,n){var r=e.getEvent(t,n);if(!r.own)return null;if(r.failed)return"Message not sent";if(r.seen){var a=e.getLastSeenEvent(t);return a&&n===a.id?e.localize("message_read"):null}var i=e.getLastDeliveredEvent(t);return i&&n===i.id?e.localize("message_delivered"):null},en=function(e,t){var n=t.getEvents(e);return Object(m.k)(function(e){return"welcome_message"===e.id||"invitation"===e.id},n)},tn=function(e){var t=e.getApplicationState("config");return!0===e.getApplicationState("mobile")?t.mobileMinimizedType:t.minimizedType},nn=function(e){var t=e.getApplicationState("config");return!0===e.getApplicationState("mobile")?t.mobileScreenPosition:t.screenPosition},rn=function(e,t){return Qt(e)&&e.getChat(t).properties.hasMoreHistory},an=function(e,t){return!!en(e,t)},on=function(e){return!!e.getApplicationState("embedded")},cn=function(e,t){if(an(e,t))return!1;var n=t.getApplicationState(),r=n.availability,a=n.maximized,i=n.ready;return"online"===r&&(!i||!a)},sn=function(e,t){if(Qt(t))return!1;var n=t.getApplicationState(),r=n.availability,a=n.embedded,i=t.getChat(e);return a&&!i.active&&!i.properties.ended&&"offline"===r&&!En(t)},un=function(e){return e.getConnectionState()===Gt},ln=function(e){return e.getConnectionState()===Ht},dn=function(e){return e.getConnectionState()===Wt||ln(e)},pn=function(e,t){if(!t.getChat(e).active)return null;var n=t.getEvents(e);return function e(t,n){if(n<0)return null;var r=t[n];return r.own&&"message"===r.type?null:"system_message"===r.type||"rich_message_postback"===r.type?e(t,n-1):r.properties.quickReplies?r:null}(n,n.length-1)},fn=function(e,t){var n=t.getApplicationState().availability,r=t.getChat(e),a=r.active,i=r.properties,o=i.queued,c=i.ended;if(o)return t.localize("embedded_waiting_for_operator");var s=Yt(e,t);return a&&s?t.localize("embedded_chat_with",{operator:s.name}):c?t.localize("embedded_chat_ended"):"online"===n?t.localize("embedded_chat_now"):En(t)?t.localize("embedded_leave_message"):t.localize("agents_not_available")},mn=function(e,t){var n=e.getChat(t);return n.properties.queued?null:n.active?"text":In(e)?null:n.properties.ended?"startChatAgain":"offline"===e.getApplicationState().availability?null:an("liveChatChatId",e)?Cn(e)&&Jt("preChatAfterGreeting",e).enabled?"requestPrechat":"text":null},hn=function(e,t){var n=t.getApplicationState(),r=n.availability,a=n.invitation,i="online"===r,o=a.hidden||!i,c=!!a.displayed,s=t.getChat(e).properties.invitationId,u=s?t.getEvent(e,s):null,l=t.getChat(e).active,d=Jt("agentAvatar",t).enabled&&(i||l),p=i&&u;return{invitationHidden:o,invitationDisplayed:c,minimizedText:fn(e,t),invitationText:p&&u.properties.text,invitationReceivedFirstTime:p&&u.properties.receivedFirstTime,unseenCount:t.getUnseenCount(e),avatar:!!d&&Object(m.v)(!1,"avatar",Yt(e,t))}},vn=function(e,t){return!!t.getChat(e).properties.queued},bn=function(e,t){return!!t.getChat(e).properties.starting},gn=function(e,t){return"Chat"===e.getCurrentView()&&e.getDefaultView("Chat")===t},yn=function(e){return gn(e,"postchat")},jn=function(e){return e.getApplicationState("testGroup")},On=function(e){return 1520===e.getApplicationState("license")},xn=On,_n=function(e){var t=e.localize("user_in_queue"),n=e.getView("Chat/prechat").fields;if(!n||Object(m.B)(n))return t;var r=n.find(function(e){var t=e.meta;return t&&"groupSelect"===t});if(!r||!r.options||Object(m.B)(r.options))return t;var a=r.options.find(function(t){return t.groupNumber===e.getApplicationState("group")});return a&&a.queueTemplate?a.queueTemplate:t},wn=function(e){return e.getApplicationState("config").theme.name},Cn=function(e){return e.getApplicationState().config.features.preChatForm.enabled},En=function(e){return e.getApplicationState().config.features.offlineForm.enabled},In=function(e,t){void 0===t&&(t=void 0);var n=e.getLastEvent("liveChatChatId");if(!n)return!1;var r=n.type,a=n.properties;return"form"===r&&!a.answered&&!a.dissmissed&&("string"!==typeof t||a.formType===t)},Sn=function(e,t){var n=e.getView("Chat/"+t);return n&&n.fields},kn=function(e){var t=e.getChat("liveChatChatId"),n=t.active,r=t.properties,a=r.queued,i=r.ended;return!n&&!a&&!i&&!In(e)&&"offline"===e.getApplicationState("availability")&&!En(e)},Tn=function(e){return Yt("liveChatChatId",e)&&!In(e)&&!vn("liveChatChatId",e)&&!kn(e)},An=function(e,t){return gn(t,"loader")||Object(m.B)(t.getEvents(e))&&!vn("liveChatChatId",t)&&!kn(t)},Pn=function(e){var t=e.getLastEvent("liveChatChatId");return!!t&&("form"===t.type&&"offline"===t.properties.formType&&t.properties.answered)},Mn=function(){var e=Object(g.g)(window.location.search);return parseInt(function(){var e=String(window.location).match(/licen(?:s|c)e\/g?(\d+)/);return e?e[1]:null}()||e.license,10)},Nn=function(e){var t=parseInt(e,10);return t>-1?t:null},zn=function(e,t){var n=e.getSessionUser().name,r=n||e.localize("client"),a=Yt("liveChatChatId",e);return t.replace(/%name%/g,r).replace(/%agent%/g,a.name)},Rn=function(e){return Object(O.b)(e)>.8},Dn=function(e){return Object(O.b)(e)<=.179},Ln=new RegExp("("+["BetterJsPop","LOCAL_STORAGE is null","Can't find variable: auto","Can't find variable: ext","_avast_submit","No license found in the URL.","getNewsReadStatus4Vivo","is banned!"].join("|")+")"),Bn=new RegExp("("+["chrome-extension://","https://www.smybeds.com/"].join("|")+")"),qn=function(e){return!!(e.message&&Ln.test(e.message)||e.stack&&Bn.test(e.stack))};window.addEventListener("error",function(e){var t=e.error;if(t)if(t.message&&-1!==t.message.indexOf("evaluating 'document.getElementById('view-chat').innerHTML'")){var n=Mn();if(10095588===n||7243681===n)return;j("custom_mobile_hacks",t)}else qn(t)||j("onerror",t)}),window.addEventListener("unhandledrejection",function(e){null!=e&&null!=e.reason&&(qn(e)||j("unhandledrejection",e.reason))});function Un(e,t){return"object"===typeof e&&"object"===typeof t?Fn(e,t):e}function Fn(e,t){var n;if(Array.isArray(e)){n=new Array(e.length);for(var r=0;r<e.length;r++)e[r]!==t[r]&&(n[r]=Un(e[r],t[r]))}else n={},Object.keys(e).forEach(function(r){e[r]!==t[r]&&(n[r]=Un(e[r],t[r]))});return n}var Vn=n(48),Gn=Object(Vn.b)()?window.localStorage:Vn.a,Hn=6e4;function Wn(e,t){var n,r=Object(m.J)(function(e){return e.defaultValue},t),a=Object.keys(t),i=Object(m.e)(function(e){return Object(h.a)({},r,e)},function(e){return Object(m.J)(function(e){return e.value},e)},function(e){var n=Date.now();return Object(m.T)(function(e,r){return e.expires<n||void 0===t[r]},e)},JSON.parse,Object(m.g)("{}"),function(){return Gn.getItem(e)}),o=Object(m.e)(JSON.stringify,function(e){var t=Date.now()+30*Hn;return Object(m.J)(function(e){return{value:e,expires:t}},e)});return{persist:function(r){return r.subscribe(function(){var c,s=(c=r.getState(),a.reduce(function(e,n){return e[n]=Object(m.u)(t[n].path,c),e},{})),u=Fn(s,n);Object(m.B)(u)||(Gn.setItem(e,o(Object(m.N)(i(),u))),n=s)}),r},rehydrate:function(){return n=i(),e=n,a.reduce(function(n,r){return Object(m.db)(t[r].path,e[r],n)},{});var e}}}var Yn=function(e){var t,n=[],r=C();return e.startStateSync=function(a){t=e.getState(),a.emit("state",t);var i=function(){n.forEach(function(e){var t=e[0],n=e[1];a.emit(t,n)}),n.length=0},o=function(e,t){1===n.push([e,t])&&setTimeout(i,0)};e.subscribe(function(){var n=e.getState();n!==t&&(o("state_diff",Fn(n,t)),t=n)});var c=/^request_/;e.on("*",function(e,t){c.test(e)||o("store_event",[e,t])}),r.resolve()},e.syncing=function(){return r.promise},e},Jn={application:{availability:null,clientLimitExceeded:!1,clientLimitExceededLifted:!1,config:{features:{agentAvatar:{enabled:!0},chatHistory:{enabled:!1},creditCardMasking:{enabled:!1},disableSounds:{enabled:!1},emailTranscript:{enabled:!0},facebookButton:{enabled:!1},fileSharing:{enabled:!0},googlePlusButton:{enabled:!1},hideOnInit:{enabled:!1},hideOnMobile:{enabled:!1},hideTrademark:{enabled:!1},linksPreview:{enabled:!0},logo:{enabled:!0,path:"https://cdn.livechatinc.com/cloud/?uri=http://livechat.s3.amazonaws.com/default/logo/c4bf6633aa89a76af7461279581d8bdb.png"},offlineForm:{enabled:!0},preChatAfterGreeting:{enabled:!0},preChatForm:{enabled:!1},rating:{enabled:!0},twitterButton:{enabled:!1},mobileMinimized:{enabled:!0},minimized:{enabled:!0}},minimizedType:"bar",screenPosition:"right",theme:{}},destroyed:!1,embedded:!0,invitation:{},hidden:!1,maximized:!1,pageFocused:!1,applicationFocused:!1,mobile:/mobile/gi.test(navigator.userAgent),muted:!1,ready:!1,loadedInitialHistory:!1}},Qn={carousel:!0,emoji:!0,message:!0,rich_message:!0,sticker:!0,system_message:!0,url_preview:!0,form:!0},Kn=function(e){return function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=Object(w.a)(),i=m.y,o=R(),c=Object(_.e)(Ct(At(e),t),void 0,i(Object(_.a)(o)));o.add(Tt(n.emit));var s=c.getState(),u=s,l=s;return c.subscribe(function(){var e=c.getState();if(l!==e){var t=[l,e];u=t[0],l=t[1]}}),Object(m.a)(c,k(a,c),z(r,c.getState),{getPreviousState:function(){return u},emit:n.emit,on:n.on,once:n.once,off:function(e,t){if(!e||!t)throw new Error(".off needs to be called with both type and handler arguments.");if("*"===e)throw new Error(".off('*', ...) is not supported.");n.off(e,t)}}),c}(e,{shouldAddToTimeline:function(e){return Qn[e.type]},shouldCreateNewGroup:function(e){return"carousel"===e.type||"form"===e.type}})},Zn=function(e,t){var n=function(e,t){var n=Wn((void 0===t?{}:t).persistKey,{clientLimitExceededLifted:{path:["application","clientLimitExceededLifted"],defaultValue:!1},eyeCatcherHidden:{path:["application","eyeCatcher","hidden"],defaultValue:!1},invitationHidden:{path:["application","invitation","hidden"],defaultValue:!1},maximized:{path:["application","maximized"],defaultValue:!1},muted:{path:["application","muted"],defaultValue:!1}}),r=Object(m.N)(Jn,Object(m.N)(e,n.rehydrate()));return Object(m.e)(n.persist,Yn,Kn)(r)}(e,t);return n.setCurrentView("Chat"),n.addView("Chat/information"),n.addView("loader"),n.addView("Chat/postchat"),n.addView("Chat/prechat"),n.addView("Chat/queue"),n.addView("Chat/timeline"),n.addView("minimized",{text:"Chat"}),n.addView("Chat/offline"),n.addView("Moment",{show:!1,data:{}}),n.addView("uploadList",{ids:[]}),n.addChat({id:"liveChatChatId",active:!1,properties:{agentIsTyping:!1,hasMoreHistory:!1,loadingHistory:!1,queued:!1}}),n},Xn=n(118),$n=Xn.a.Model;Xn.a.Model=function(){return function(e){var t=Object(w.a)(),n={};return e.resolveRemoteCall=function(e){var t=e.id,r=e.value,a=n[t];delete n[t],a(r)},e.emitEvent=function(e){var n=e.event,r=e.data;t.emit(n,r)},new $n(e).then(function(r){return r.call=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];return new Promise(function(t){var i=Object(m.t)(n);n[i]=t,r.emit("remote-call",{id:i,method:e,args:a})})},e.remoteCall=function(t){var n=t.id,a=t.method,i=t.args,o="function"===typeof e[a]?e[a].apply(r,i):void 0;o&&"function"===typeof o.then?o.then(function(e){r.call("resolveRemoteCall",{id:n,value:e})}):r.call("resolveRemoteCall",{id:n,value:o})},r.on=t.on,r.off=t.off,r})}}();var er=Xn.a,tr=/^\s+$/,nr=/^(?:\s+|[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/,rr=3;function ar(e){for(var t=[],n=0;t=nr.exec(e);){var r=t[0];if(e=e.slice(r.length),tr.test(r)||n++,n>rr)return!1}return!e}var ir=function(e){var t=e.customJson||{},n=Dn(e.agentbarBackgroundColor)?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.05)",r=Dn(e.agentbarBackgroundColor)?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.1)";return Object(m.N)({name:e.name,iconTheme:e.name,showMessageAvatar:"modern"!==e.name,colors:{agentBarText:e.agentbarText,agentBarBackground:e.agentbarBackgroundColor,cta:e.ctaColor,destructiveColor:"#eb4736",minimizedIcon:e.minimizedColorIcon,background:e.backgroundColor,visitorMessageText:e.visitorMessageColorText,visitorMessageBackground:e.visitorMessageBackgroundColor,systemMessage:e.systemMessageColor,agentMessageText:e.agentMessageColorText,minimizedText:e.minimizedColorText,titleBarText:e.titlebarText,titleBarBackgroundColor:e.titlebarBackgroundColor},AgentBar:{css:{background:e.agentbarBackgroundColor,color:e.agentbarText},IconButton:{css:{background:{default:n,active:e.ctaColor}}}},ChatSummary:{Icon:{color:e.minimizedColorIcon}},Divider:{css:{borderColor:n}},Maximized:{css:{background:e.backgroundColor}},Message:{own:{Bubble:{css:{background:"modern"===e.name?"transparent":e.visitorMessageBackgroundColor,color:e.visitorMessageColorText}}},system:{Bubble:{css:{color:e.systemMessageColor}}},Bubble:{css:{background:"modern"===e.name?"transparent":e.agentMessageBackgroundColor,color:e.agentMessageColorText}},css:{color:e.systemMessageColor}},TypingIndicator:{css:{color:e.systemMessageColor}},Minimized:{MinimizedBubble:{css:{color:e.minimizedColorText,backgroundColor:e.minimizedColorBackground},Icon:{color:e.minimizedColorIcon}},MinimizedBar:{css:{color:e.minimizedColorText,backgroundColor:e.minimizedColorBackground},Icon:{color:e.minimizedColorIcon}}},TitleBar:{css:{color:e.titlebarText,backgroundColor:e.titlebarBackgroundColor}},DividerLabel:{css:{color:e.systemMessageColor,borderColor:r}},TextComposer:{IconButton:{active:{Icon:{color:e.ctaColor}}}}},t)},or=[0,2,4,6,8,1,3,5,7,9],cr=function(e){return e.replace(/\b(?:\d[ -]*?){8,15}((?:\d[ -]*?){4})\b/g,function(e,t){var n=e.replace(/(-|\s)/g,"");return function(e){if(/[^0-9-\s]+/.test(e))return!1;for(var t,n=e.replace(/\D/g,""),r=n.length,a=1,i=0;r;)t=parseInt(n.charAt(--r),10),i+=(a^=1)?or[t]:t;return i&&i%10===0}(n)?""+function(e){var t=e%4,n=t?4-t:0,r=Math.floor(e/4)+(t?1:0)-n-1,a=Object(m.j)(n,"XXX"),i=Object(m.j)(r,"XXXX");return a.concat(i).join("-").concat("-")}(n.length)+t:e})},sr=n(205),ur=n.n(sr),lr=n(143),dr=n.n(lr),pr=new ur.a;pr.tlds(dr.a);var fr=function(e,t,n){var r=Object(m.l)(function(t){return t.name===e},n);return-1!==r?Object(m.pb)(r,Object(h.a)({},n[r],{defaultValue:t}),n):n},mr=function(e,t,n){e.addEvent(t,Object(h.a)({},n,{serverId:n.serverId||null}))},hr=function(e,t){var n=e.getView("uploadList").ids;e.updateView("uploadList",{ids:[].concat(n,[t])})},vr=function(e,t){var n=e.getView("uploadList").ids;e.updateView("uploadList",{ids:n.filter(function(e){return e!==t})})},br=function(e){var t=e.getApplicationState().hasChatMoreHistoryInitial;e.updateChat("liveChatChatId",{active:!1,properties:{ended:!0,queued:!1,agentIsTyping:!1}}),t||e.setApplicationState({hasChatMoreHistoryInitial:!0})},gr=function(e){e.setApplicationState({eyeCatcher:Object(h.a)({},e.getApplicationState().eyeCatcher,{hidden:!0})})},yr=function(e){e.setApplicationState({invitation:Object(h.a)({},e.getApplicationState().invitation,{hidden:!0})})},jr=function(e){e.setApplicationState({maximized:!0})},Or=function(e){e.setApplicationState({maximized:!1})},xr=function(e,t){var n=t.id,r=t.thread,a=t.group,i=t.agent,o=t.queued,c=void 0!==o&&o;void 0!==i&&Cr(e,i);var s=Yt("liveChatChatId",e);null===e.getChat("liveChatChatId").serverId&&e.setChatServerId("liveChatChatId",n);var u={ended:!1,queued:c};void 0!==r&&(u.lastThread=r),"number"===typeof a&&(u.group=a),yr(e),gr(e),e.updateChat("liveChatChatId",{active:!0,properties:u}),qr(e),Object(m.u)("properties.isBot",s)?setTimeout(function(){return"loader"===e.getDefaultView("Chat")&&e.setDefaultView("Chat","timeline")},1500):e.setDefaultView("Chat","timeline"),e.setApplicationState({hidden:!1});var l=e.getApplicationState(),d=l.maximized,p=l.ready;e.setCurrentView("Chat"),p&&!d&&jr(e)},_r=/\s/,wr=function(e,t,n,r){var a=n.trim(),i=(!_r.test(a)&&pr.match(a),n);Jt("creditCardMasking",e).enabled&&(i=cr(n));var o="message";ar(i)&&(o="emoji"),e.sendEvent(t,{type:o,properties:Object(m.d)({text:i,triggeredBy:r})})},Cr=function(e,t){e.updateChat("liveChatChatId",{properties:{currentAgent:t}})},Er=function(e){var t=e.getView("Chat/prechat");In(e,"prechat")||zr(e,t)},Ir=function(e,t){var n=e.getChat("liveChatChatId").properties,r=n.rate,a=n.rateComment,i=t.fields,o=Object(v.a)(t,["fields"]);r&&(i=fr("rating",r,i)),a&&(i=fr("rateComment",a,i)),zr(e,Object(h.a)({},o,{fields:i}))},Sr=function(e,t){t.updateView("uploadList",{ids:[]}),Dr(t),t.flushChat(e)},kr=function(e,t){var n=t.getApplicationState("config");t.setApplicationState({config:Object(h.a)({},n,{features:Object(m.N)(n.features,e.features),minimizedType:e.theme.minimized,mobileMinimizedType:e.theme.mobileMinimized,theme:Object(m.N)(n.theme,ir(e.newTheme)),screenPosition:e.screenPosition,mobileScreenPosition:e.mobileScreenPosition,nonProfitLicense:e.nonProfitLicense})}),e.features.disableSounds.enabled&&t.setApplicationState({muted:!0})},Tr=function(e,t,n){var r,a=e.getApplicationState("config");e.setApplicationState({config:Object(h.a)({},a,{features:Object(m.N)(a.features,(r={},r[t]=n,r))})})},Ar=function(e,t,n){var r={answered:!0};n&&(r.fields=n.properties.fields,n.id&&e.setEventServerId("liveChatChatId",t,n.id)),e.updateEvent("liveChatChatId",t,{properties:r})},Pr=function(e,t){e.updateEvent("liveChatChatId",t,{properties:{dissmissed:!0}})},Mr=function(e,t){var n=t.authorId,r=t.text,a=t.receivedFirstTime,i=t.properties,o=void 0===i?{}:i,c=e.getChat("liveChatChatId"),s=e.getApplicationState(),u=s.mobile,l=s.maximized;c.properties.ended&&Sr("liveChatChatId",e),Cr(e,n);var d=u||"bar"!==tn(e),p=!l&&!d&&a;d||yr(e),"bar"!==tn(e)&&gr(e);var f=zn(e,r),m="message";ar(f)&&(m="emoji"),e.setDefaultView("Chat","timeline"),qr(e),Ur(e),mr(e,"liveChatChatId",{id:"invitation",type:m,author:n,seen:!0,properties:Object(h.a)({text:f,originalText:r,invitation:!0,receivedFirstTime:a},o)}),e.updateChat("liveChatChatId",{properties:{invitationId:"invitation"}}),e.setApplicationState({hidden:!1}),l||e.setCurrentView("Chat"),p&&jr(e)},Nr=function(e){zr(e,Object(h.a)({},e.getView("Chat/offline"),{id:"offline_form",type:"offline"}))},zr=function(e,t){var n={formType:t.type,formId:t.id,fields:t.fields,dissmissed:!1};if(In(e)){var r=e.getLastEvent("liveChatChatId").id;return e.updateEvent("liveChatChatId",r,{properties:n})}var a=Object(m.t)(e.getChat("liveChatChatId").events);return mr(e,"liveChatChatId",{id:a,type:"form",author:"system",properties:n})},Rr=function(e,t){!function(e){if(!e)return!1;var t=Object(g.e)(e);return!t||"https:"===t||!1}(t.url)?function(e,t,n){var r=n.systemMessageType,a=n.textVariables,i=n.text;mr(e,t,{id:Object(m.t)(e.getChat("liveChatChatId").events),serverId:null,type:"system_message",author:"system",seen:!0,properties:Object(m.d)({systemMessageType:r,textVariables:a,text:i})})}(e,"liveChatChatId",{text:"Link attached to the button is invalid."}):e.updateView("Moment",{show:!0,data:t})},Dr=function(e){e.updateView("Moment",{show:!1,data:{}})},Lr=function(e,t){t.requestUpdateUser(t.getSessionUser().id,{properties:e})},Br=function(e,t){var n;e.setUserServerId(e.getSessionUser().id,t),e.setApplicationState({testGroup:(n=t,function(e){var t=0;return e.split("").forEach(function(e){var n=e.charCodeAt(0);t=(t<<5)-t+n,t&=t}),t}(n)%2?"A":"B")})},qr=function(e){if(In(e,"prechat")){var t=e.getLastEvent("liveChatChatId").id;Pr(e,t)}},Ur=function(e){if(In(e,"offline")){var t=e.getLastEvent("liveChatChatId").id;Pr(e,t)}},Fr=function(e,t,n){if(e&&e.errors){var r=e.errors[0];"incorrect requester structure"===Object.keys(r)[0]?n({email:t("invalid_email")}):n()}else n()};n(167);var Vr=n(168),Gr=n.n(Vr),Hr=n(101),Wr=(n(169),n(74)),Yr=n.n(Wr),Jr=n(170),Qr=n(59),Kr=n(171),Zr=(n(172),n(102)),Xr=n(173),$r=n(31),ea=n.n($r),ta=n(41),na=n(42),ra=n.n(na),aa=n(33),ia=n(75),oa=n.n(ia);function ca(e,t){return Yr()(function(n){return e.on(t,n),function(){e.off(t,n)}})}var sa=n(174),ua=n.n(sa),la=n(103),da=n(65),pa=n.n(da),fa=n(104),ma=n.n(fa),ha=n(20),va=n.n(ha);function ba(e){return function(t){return Object(ta.a)(va()(e)(t))}}var ga=function(e,t,n){e.on(t,function r(a){e.off(t,r),n(a)})};var ya=n(56);n(175);var ja,Oa=(ja=function(){return Zr.a},function(e){return function(t,n){if(0===t){var r,a=!1,i=function(e,t){r(e,t)};e(t,function e(t,o){if(0===t)return r=o,a?void i(1):void n(t,i);if(2===t&&o&&!a){a=!0;try{ja(o)(0,e)}catch(c){n(2,c)}}else n(t,o)})}}}),xa=(n(105),n(176)),_a=n(106),wa=(n(177),n(178)),Ca=n(179),Ea=n(38),Ia=n(180),Sa=n.n(Ia),ka=(n(76),n(107),n(43)),Ta=n.n(ka),Aa=n(66),Pa=(n(181),n(182),n(77),n(183)),Ma=n(44),Na=n(25);function za(e,t){return pa()(ua()(e),ma()(e.getState()),va()(t),Object(Kr.a)(m.eb))}var Ra,Da=function(e){return/px$/.test(e)?Math.ceil(parseFloat(e))+"px":e},La=function(e,t){return e.call("resize",function(e){return Object(h.a)({},e,{width:Da(e.width),height:Da(e.height)})}(t))},Ba=function(e){var t=e.minimizedRef;return t?Object(Na.b)(["width","height"],t):{width:"0px",height:"0px"}},qa=function(e){var t=!1,n=null;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];n=e.bind.apply(e,[null].concat(a)),function e(){if(n&&!t){var r=n;return n=null,t=!0,void r().then(function(){t=!1,e()})}}()}}(function(e,t){var n=t.getApplicationState().maximized,r=Ra,a=e.model,i=a.fullWidth,o=a.fullHeight;return Ra=n,new Promise(function(a){r&&n?a():!r||n?r||!n?e.minimizedRef?La(e,{width:i,height:o,maximized:n}).then(function(){var t=Ba(e);return La(e,t)}).then(a):La(e,{width:"0px",height:"0px",maximized:n}).then(a):La(e,{width:i,height:o,maximized:n}).then(a):t.once("animation_end",function(){La(e,Object(h.a)({},Ba(e),{maximized:n})).then(a)})})}),Ua=function(e,t){Ra=t.getApplicationState().maximized,pa()(za(t,function(e){return e.application.maximized}),ra()(function(){return qa(e,t)}))},Fa=function(e){return Object(m.z)(e.lang,["ar","he","fa"])},Va=function(e){return ye(e,"hidden")||V(e,"minimized").hidden&&!ye(e,"maximized")};function Ga(e,t){var n=t.license,r=t.group,a=t.uniqueGroups,i=function(e){var t=function(t,n){return(e.getApplicationState("hidden")?n.call("show").then(function(){e.setApplicationState({hidden:!1})}):Promise.resolve()).then(function(){t!==e.getApplicationState("maximized")&&e.setApplicationState({maximized:t})})};return{hide:function(){e.getApplicationState("hidden")||(gr(e),t(!1,this).then(function(){e.setApplicationState({hidden:!0})}))},hideEyeCatcher:function(){gr(e)},isFocused:function(){return!!document.hasFocus&&document.hasFocus()},maximize:function(){t(!0,this)},minimize:function(){t(!1,this)},startStateSync:function(){e.startStateSync(this)},storeMethod:function(t){var n=t[0],r=t.slice(1);e[n].apply(e,r)}}}(e);return new er.Model(i).then(function(t){return Promise.all([t,e.syncing()])}).then(function(t){var i=t[0];window.performance&&"function"===typeof window.performance.mark&&window.performance.mark("lc_postmate_ready");var o=i.model,c=o.clientLimitExceeded,s=o.customer,u=o.hidden,l=o.page,d=o.serverConfig,p=o.region,f=e.getApplicationState("mobile");return e.updateUser(e.getSessionUserId(),s),e.setApplicationState({clientLimitExceeded:!e.getApplicationState("clientLimitExceededLifted")&&c,hidden:u,page:l,maximized:!f&&e.getApplicationState("maximized"),rtl:Fa(d)}),[{data:{license:n,group:r,region:p,uniqueGroups:a,mobile:f},props:{onAnimationEnd:function(){return e.emit("animation_end")},onError:function(){i.call("kill")},onMinimizedRef:function(e){i.minimizedRef=e},onMinimizedResize:function(){return qa(i,e)}},onBootstrap:function(){Ua(i,e),Va(e.getState())||i.call("show")}},d,i]})}var Ha=function(){return Boolean(Object(m.u)("webkit.messageHandlers.iosMobileWidget.postMessage",window))?"ios":!!Boolean(Object(m.u)("androidMobileWidget.postMessage",window))&&"android"},Wa=function(e){return window.androidMobileWidget.postMessage(JSON.stringify(e))},Ya=function(e){return window.webkit.messageHandlers.iosMobileWidget.postMessage(e)},Ja=function(){var e=Ha();return"android"===e?Wa:"ios"===e?Ya:null}(),Qa=function(){return Boolean(Ha())},Ka=function(e){Ja&&(Ja({messageType:"uiReady"}),e.on("add_event",function(t){var n=t.event;if("message"===n.type){var r=e.getUser(n.author).name;Ja({messageType:"newMessage",text:n.properties.text,id:n.id,timestamp:n.timestamp,author:{name:r}})}}),e.on("mobile_wrapper_minimize_intent",function(){Ja({messageType:"hideChatWindow"})}))},Za={},Xa=function(e,t){var n=void 0===t?{}:t,r=n.query,a=void 0===r?{}:r,i=n.jsonpParam,o=void 0===i?"jsonp":i;return new Promise(function(t,n){Object(Na.c)().then(function(r){var i,c=document.createElement("script"),s=Object(m.t)(Za);Za[s]=!0;var u="__"+s;window[u]=function(e){delete Za[s],delete window[u],Object(Na.f)(c),t(e)},c.src=e+"?"+Object(g.a)(Object(x.a)({},a,((i={})[o]=u,i))),c.addEventListener("error",function(){return n(new Error("JSONP request failed."))}),r.appendChild(c)})})},$a=function e(t,n){var r=n.license,a=n.uniqueGroups,i=n.group,o=n.region,c=n.query,s=void 0===c?{}:c,u=function(e,t){return 1520===e?"https://secure-lc.livechatinc.com":function(e,t){if(!t)return e;var n=e.match(/secure(-(labs|lc))/i);return"https://secure-"+t+(null!==n&&n.length>0?n[1]:"")+".livechatinc.com"}("https://secure.livechatinc.com",t)}(r,o);return Xa(u+"/"+function(e){var t=e.uniqueGroups,n=e.license,r=e.group;return"licence/"+(t?"g"+n+"_"+(void 0===r?0:r):n)}({uniqueGroups:a,license:r,group:i})+"/v2/"+t+".js",{query:Object(h.a)({referrer:document.referrer,url:String(document.location)},s)}).then(function(n){if(n.error&&"incorrect region"===n.error)return e(t,{license:r,uniqueGroups:a,group:i,region:n.region,query:s});if(n.error)throw new Error(n.error);return Object(h.a)({},n,{region:o})})},ei=function(e){var t=e.license,n=e.group,r=e.uniqueGroups,a=void 0!==r&&r,i=e.skipCodeInstallationTracking,o=void 0!==i&&i,c={t:Date.now()};return void 0!==n&&(c.groups=n),o&&(c.test=1),$a("get_dynamic_config",{license:t,group:n,query:c,uniqueGroups:a}).then(function(e){if(e.error)throw new Error(e.error);var r=e.visitor.groups;return Promise.all([a&&n!==r?$a("get_dynamic_config",{license:t,group:r,uniqueGroups:a}):e,$a("get_static_config."+r+"."+e.static_config_version,{license:t,group:r,uniqueGroups:a})])}).then(function(e){var t=e[0],n=e[1];return Object(h.a)({},t,n)})},ti=function(){var e=Object(g.g)(window.location.search),t=Object(m.Z)(["name","email"],e);return e.params&&(t.properties=Object(g.b)(e.params)),t};var ni,ri=n(61),ai=n(19),ii=n(13),oi={LICENSE:"license",GROUP:"group",SESSION_ID:"sessionId",SECURED_TOKEN:"securedToken",CHAT_ID:"chatId",CHAT_STATE:"chatState",CHAT_STATUS:"chatStatus",VISITOR_ID:"visitorId",CUSTOM_VISITOR_ID:"customVisitorId",LAST_MESSAGE_ID:"lastMessageId",CONNECTION_STATUS:"connectionStatus",SNEAK_PEEK:"sneakPeek",TICKET_FORM:"ticketForm",PRE_CHAT_FORM:"preChatForm",POST_CHAT_FORM:"postChatForm",STATIC_CONFIG_VERSION:"staticConfigVersion",TRANSLATIONS_VERSION:"translationsVersion",TRANSLATIONS:"translations",SECRET_ID:"secretId",REGION:"region",CONFIG_LOADED:"configLoaded",LAST_AGENT_ID:"lastAgentId",DYNAMIC_CONFIG:"dynamicConfig",CONFIG:"config",WELCOME_MESSAGE:"welcomeMessage",ACCEPTED_INVITATION:"acceptedInvitation",SERVER_IDS_MAP:"serverIdsMap",VISITOR_CUSTOM_ID_MAP:"visitorCustomIdMap",CLIENT_LIMIT_EXCEEDED:"clientLimitExceeded",PING_SENT:"pingSent",CHAT_BETWEEN_GROUPS:"chatBetweenGroups",HISTORY_LOADED:"historyLoaded",REQUEST_DISTRIBUTION:"requestDistribution",MOBILE:"mobile"},ci=Object(ii.a)({},N(oi.LICENSE),N(oi.GROUP),N(oi.SESSION_ID),N(oi.SECURED_TOKEN),N(oi.CHAT_ID),N(oi.CHAT_STATE),N(oi.VISITOR_ID),N(oi.CUSTOM_VISITOR_ID),N(oi.LAST_MESSAGE_ID),N(oi.CHAT_STATUS),N(oi.CONNECTION_STATUS),N(oi.SNEAK_PEEK),N(oi.TICKET_FORM),N(oi.STATIC_CONFIG_VERSION),N(oi.SECRET_ID),N(oi.REGION),N(oi.CONFIG_LOADED),N(oi.LAST_AGENT_ID),N(oi.PRE_CHAT_FORM),N(oi.TRANSLATIONS_VERSION),N(oi.TRANSLATIONS),N(oi.POST_CHAT_FORM),N(oi.CONFIG),N(oi.DYNAMIC_CONFIG),N(oi.WELCOME_MESSAGE),N(oi.ACCEPTED_INVITATION),N(oi.SERVER_IDS_MAP),N(oi.VISITOR_CUSTOM_ID_MAP),N(oi.CLIENT_LIMIT_EXCEEDED),N(oi.PING_SENT),N(oi.CHAT_BETWEEN_GROUPS),N(oi.HISTORY_LOADED),N(oi.REQUEST_DISTRIBUTION),N(oi.MOBILE)),si=E("CHAT_STARTED",function(e){return{securedToken:e.securedToken,welcomeMessage:e.welcomeMessage,visitorMessage:e.visitorMessage}}),ui=E("NEW_MESSAGE",function(e){return{id:e.id,timestamp:e.timestamp,authorType:e.authorType,authorId:e.authorId,text:e.text,chatId:e.chatId,isMobile:e.isMobile,customId:e.customId,serverId:e.serverId,json:e.json}}),li=E("CHAT_ENDED",function(e){return{reason:(void 0===e?{}:e).reason}}),di=E("NEW_AGENT",function(e){return{avatarUrl:e.avatarUrl,jobTitle:e.jobTitle,name:e.name,id:e.id}}),pi=E("VISITOR_DATA_SET",function(e){return{visitorData:e.visitorData,requestId:e.requestId}}),fi=E("VISITOR_DATA_SET_ERROR",function(e){return{error:e.error,requestId:e.requestId}}),mi=E("NEW_FILE",function(e){var t=e.id,n=e.timestamp,r=e.authorType,a=e.authorId,i=e.url,o=e.contentType;return{id:t,timestamp:n,authorType:r,authorId:a,url:i,size:e.size,contentType:o,attachmentToken:e.attachmentToken,thumbnail:e.thumbnail}}),hi=E("VISITOR_QUEUED",function(e){return{numberInQueue:e.numberInQueue,waitingTime:e.waitingTime}}),vi=E("TYPING_INDICATOR",function(e){return{authorId:e.authorId,isTyping:e.isTyping}}),bi=E("RATE_CHAT",function(e){return{rate:e.rate,comment:e.comment}}),gi=E("SET_VISITOR_DATA",function(e){var t=e.visitorData,n=e.requestId,r=e.internal;return{visitorData:t,requestId:n,internal:void 0!==r&&r}}),yi=E("SEND_FILE",function(e){return{file:e.file,customId:e.customId}}),ji=E("REQUEST_FILE_TOKEN",function(e){return{customId:e.customId}}),Oi=E("FILE_TOKEN_RECEIVED",function(e){return{customId:e.customId,token:e.token}}),xi=E("NEW_INVITATION",function(e){return{id:e.id,authorId:e.authorId,text:e.text,receivedFirstTime:e.receivedFirstTime}}),_i=E("MESSAGE_SEEN",function(e){return{id:e.id,customId:e.customId,type:e.type}}),wi=E("PROTOCOL_UPGRADED",function(){}),Ci=E("INTEGRATION_DATA",function(e){return{id:e.id,timestamp:e.timestamp,integrationName:e.integrationName,data:e.data}}),Ei=Object(m.e)(m.O,function(e){return e.map(P)},m.qb)(oi),Ii=Object(m.e)(m.O,function(e){return e.map(M)},m.qb)(oi),Si=function(e){return e.environment},ki=((ni={})[gi.getActionName()]=function(e,t){return Object(ii.a)({},e,{visitorData:t.visitorData})},ni),Ti=function(e){return e.visitorData},Ai=T({},Object(ii.a)({},ki,Ei)),Pi=n(22),Mi=function(e,t){var n=t.external,r=Object(Pi.c)({context:{external:n}}),a=Object(_.d)(Object(_.a)(r),window.devToolsExtension?window.devToolsExtension():function(e){return e})(_.e)(Ai,e);return a.runSaga=r.run,a},Ni=n(5),zi=n.n(Ni),Ri=n(2),Di=E("PUBLIC_SEND_MESSAGE",function(e){var t=e.customId,n=e.text,r=e.json,a=e.promise;return{customId:String(t),text:n,json:r,promise:a}}),Li=(E("PUBLIC_INIT",function(e){return{license:e.license,group:e.group}}),E("PUBLIC_SET_VISITOR_DATA",function(e){var t=e.name,n=e.email,r=e.pageUrl,a=e.pageTitle,i=e.customProperties,o=e.promise,c=e.update;return{name:t,email:n,customProperties:i,pageUrl:r,pageTitle:a,promise:o,update:void 0===c||c}})),Bi=E("GET_VISITOR_DATA",function(e){return{promise:e.promise}}),qi=(E("PUBLIC_CALLBACK_ERROR",function(e){return{errorMessage:e.errorMessage}}),E("PUBLIC_RATE_CHAT",function(e){return{rate:e.rate,comment:e.comment,promise:e.promise}})),Ui=E("PUBLIC_SET_SNEAK_PEEK",function(e){return{text:e.text,promise:e.promise}}),Fi=E("PUBLIC_FORWARD_CHAT_TRANSCRIPT",function(e){return{email:e.email,promise:e.promise}}),Vi=E("PUBLIC_CLOSE_CHAT",function(e){return{promise:e.promise}}),Gi=E("PUBLIC_DISCONNECT",function(e){return{promise:e.promise}}),Hi=E("PUBLIC_GET_TICKET_FORM",function(e){return{promise:e.promise,group:e.group}}),Wi=E("PUBLIC_SEND_TICKET_FORM",function(e){return{answers:e.answers,promise:e.promise}}),Yi=E("PUBLIC_SEND_FILE",function(e){return{file:e.file,customId:e.customId,promise:e.promise,onProgress:e.onProgress}}),Ji=E("PUBLIC_SEND_FILE",function(e){return{customId:e.customId}}),Qi=E("PUBLIC_GET_PRECHAT_FORM",function(e){return{promise:e.promise}}),Ki=E("PUBLIC_SEND_PRECHAT_FORM",function(e){return{promise:e.promise,answers:e.answers}}),Zi=E("PUBLIC_GET_TRANSLATIONS",function(e){return{promise:e.promise}}),Xi=E("PUBLIC_GET_PREDICTED_AGENT",function(e){return{promise:e.promise}}),$i=E("PUBLIC_GET_POSTCHAT_FORM",function(e){return{promise:e.promise}}),eo=E("PUBLIC_SEND_POSTCHAT_FORM",function(e){return{promise:e.promise,answers:e.answers}}),to=E("PUBLIC_GET_CONFIG",function(e){return{promise:e.promise}}),no=E("PUBLIC_ACCEPT_INVITATION",function(e){return{promise:e.promise,id:e.id}}),ro=E("PUBLIC_MESSAGE_AS_SEEN",function(e){return{promise:e.promise,messageId:e.messageId}}),ao=E("PUBLIC_START_CHAT",function(e){return{promise:e.promise}}),io=E("PUBLIC_CHECK_GROUP_STATUS",function(e){return{group:e.group,promise:e.promise}}),oo=E("PUBLIC_SET_VISITOR_GROUP",function(e){return{group:e.group}}),co=E("PUBLIC_GET_QUEUE_FORM",function(e){return{promise:e.promise}}),so=n(49),uo=n.n(so),lo=n(110),po=n.n(lo),fo=uo.a.mark(mo);function mo(e){var t,n,r,a,i=arguments;return uo.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:for(t=i.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=i[r];case 1:return o.next=3,Ri.j.apply(void 0,[e].concat(n));case 3:if("undefined"===typeof(a=o.sent)){o.next=6;break}return o.abrupt("return",a);case 6:return o.next=8,Object(Ri.l)("*");case 8:o.next=1;break;case 9:case"end":return o.stop()}},fo)}var ho=function(e){return Object(Ri.e)(uo.a.mark(function t(){return uo.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e;case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",null);case 9:case"end":return t.stop()}},t,null,[[0,6]])}))},vo="",bo=Object(Vn.b)()?window.localStorage:Vn.a,go={setItem:function(e,t){bo.setItem(vo+e,t)},getItem:function(e){return bo.getItem(vo+e)},removeItem:function(e){bo.removeItem(vo+e)},setPrefix:function(e){vo=e},removeOldSecretTokenCookie:function(e){document.cookie="secret_token_"+e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/licence/"+e+"/v2;domain=.livechatinc.com",document.cookie="secret_token_"+e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/licence/"+e+";domain=.livechatinc.com"}};function yo(e){return-1!==e.indexOf("cdn.livechatinc.com/cloud/?uri")?"https://"+Object(g.h)(e):"https://cdn.livechatinc.com/cloud/?uri=http://"+encodeURI(Object(g.h)(e))}function jo(e){var t=e.agent;return{invitation:{id:e.unique_id,authorId:t.login,text:e.greeting_message.text,receivedFirstTime:e.displayed_first_time},agent:{avatarUrl:yo(t.avatar_url),jobTitle:t.job_title,name:t.name,id:t.login}}}var Oo,xo,_o=function(e,t){return e.order-t.order},wo={question:{type:"text"},checkbox_for_email:{type:"checkbox",meta:"confirm_subscription"},header:{type:"information"},skill:{type:"group_select"}},Co=function(e){return e.map(function(e,t){var n={};return Object(m.x)("label",e)&&(n.label=e.label),Object(m.x)("checked",e)&&(n.checked=e.checked),n.value=String(t),Object(m.x)("skill_id",e)&&(n.value=String(e.skill_id)),Object(m.x)("embedded_chat_hide_when_offline",e)&&(n.ticketFormDisabled=Boolean(e.embedded_chat_hide_when_offline)),Object(m.x)("queue_template",e)&&(n.queueTemplate=e.queue_template),n})},Eo=function(e){var t=!1,n={fields:e.fields.sort(_o).map(function(e,n){var r={};if("facebookConnect"===e.type)return t=!0,!1;e.id?r.name=e.id:-1===["header","information"].indexOf(e.type)&&(r.name=String(n)),Object(m.x)("value",e)&&(r.value=e.value),Object(m.x)("label",e)&&(r.label=e.label),Object(m.x)("required",e)&&(r.required=e.required),"rating"===e.type&&(r.commentLabel=e.options[0]),e.skills&&e.skills.length>0?r.options=Co(e.skills):e.options&&e.options.length>0&&(e.options_data?r.options=Co(e.options_data):Object(m.D)(e.options[0])?r.options=e.options.map(function(e,t){return{label:e.label,value:String(t)}}):r.options=e.options.map(function(e,t){return{label:e,value:String(t)}})),e.serverType&&(r.serverType=e.serverType);var a=function(e){return{type:wo[e]&&wo[e].type||e,meta:wo[e]&&wo[e].meta||!1}}(e.type),i=a.type,o=a.meta;return r.type=i,o&&(r.meta=o),r}).filter(Boolean)};return e.id&&(n.id=e.id),t&&(n.facebookConnect=!0),n},Io=function(e){return Object(ii.a)({},e,{fields:e.fields.map(function(e){return"email"===e.type||"textarea"===e.type?Object(ii.a)({},e,{required:!0}):e})})},So=function(e,t,n){var r={survey_id:t.id},a=["name","question","email","checkbox","checkbox_for_email","radio","skill","select","textarea"],i=t.fields.map(function(r,a){var i,o,c={id:r.name,order:t.facebookConnect?a+1:a,type:(i=r.type,o=r.meta,void 0===o&&(o=!1),Object(m.m)(function(e){var t=e.type,n=e.meta;return t===i&&(!n||o===n)},wo)||i)};return Object(m.x)("label",r)&&(c.label=r.label),Object(m.x)("options",r)?c.answers=r.options.map(function(t,a){var i={index:a};return Object(m.x)("label",t)&&(i.label=t.label),"skill"===c.type&&(i.group_id=parseInt(t.value,10)),"group_select"===r.type?i.chosen=parseInt(n,10)===a:i.chosen=e[r.name]&&(Array.isArray(e[r.name])&&-1!==e[r.name].indexOf(t.value)||"string"===typeof e[r.name]&&e[r.name]===t.value)||!1,i}):c.answer=e[r.name]||"",c}).filter(function(e){return-1!==a.indexOf(e.type)});return r.fields=i,r},ko=function(e,t,n){void 0===n&&(n={});var r=new XMLHttpRequest,a=new Promise(function(a,i){var o=n,c=o.headers,s=o.method,u=void 0===s?"POST":s,l=o.onProgress,d=o.withCredentials,p=void 0!==d&&d;"function"===typeof l&&(r.upload.onprogress=function(e){l(e.loaded/e.total)}),r.onload=function(){var e;try{e=JSON.parse(r.response)}catch(t){e=r.response}r.status>=200&&r.status<300?a(e):i(new Error(e))},r.onerror=function(e){i(e)},r.onabort=function(){i(new Error("Upload cancelled."))},r.open(u,e),r.withCredentials=p,c&&Object.keys(c).forEach(function(e){return r.setRequestHeader(e,c[e])}),r.send(function(e){var t=new FormData;return Object.keys(e).forEach(function(n){return t.append(n,e[n])}),t}(t))});return{then:function(e,t){return a.then(e,t)},catch:function(e){return a.catch(e)},cancel:function(){r.abort()}}},To=((Oo={}).labs="-labs.",Oo.staging="-lc.",Oo.production=".",Oo),Ao=((xo={}).labs="labs.",xo.staging="staging.",xo.production="",xo),Po=function(e,t,n){var r=t;return 1520===n&&(r="staging"),"https://secure"+(e?"-"+e:"")+To[r]+"livechatinc.com"},Mo=function(e,t,n){var r=t;return 1520===n&&(r="staging"),"https://api"+(e?"-"+e:"")+"."+Ao[r]+"livechatinc.com"},No=function(e,t,n){void 0===n&&(n={});var r=n.attempts||3,a=n.retryDelay||1e3;return new Promise(function(n,i){!function o(){var c;Object(b.a)(e,t).then(function(e){if(400!==e.status){if(!e.ok)throw new Error({type:"connection",reason:"Request failed"});n(e)}else e.json().then(i).catch(i)}).catch(function(e){return r?(--r,setTimeout(function(){o()},a)):i(e)}),(c=15e3,new Promise(function(e){setTimeout(e,c)})).then(function(){i({type:"connection",reason:"Request timeout"})})}()})},zo=function(e){var t=e.environment,n=e.region,r=e.license,a=e.token,i=e.file,o=e.chatId,c=e.onProgress,s=Mo(n,t,r)+"/v2/chats/"+o+"/attachment",u=ko(s,{"author[type]":"visitor",license_id:r,files:i,token:a},{onProgress:c});return u[Pi.a]=u.cancel,u},Ro=function(e,t,n){var r=t.environment,a=t.region,i=t.license,o=t.body,c=Mo(a,r,i)+"/"+e;return No(c,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(o)},n).then(function(e){return e.json()})},Do=function(e,t){var n=t.environment,r=t.license,a=t.region,i=""+Po(a,n,r)+e;return No(i,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(function(e){return e.json()})},Lo=function(e,t,n,r){return!1===t?"licence/g"+e+"_"+r:n?"licence/external/"+e:"licence/"+e},Bo=function(e,t,n){var r=t.environment,a=t.license,i=t.body,o=void 0===i?{}:i,c=t.securedToken,s=t.secretId,u=t.region,l=t.queryStringData,d=void 0===l?{}:l,p=t.external,f=t.chatBetweenGroups,h=t.group,v=t.requestDistribution,b=!0===Object(m.u)(e,v)||-1!==e.indexOf("get_static_config")?"v2/":"",y={};c&&(y.secret_token=c),s&&(y.secret_id=s);var j=Po(u,r,a)+"/"+Lo(a,f,p,h)+"/"+b+e+"?"+Object(g.a)(Object(ii.a)({},d,y));return No(j,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(o)},n).then(function(e){return e.text()}).then(function(e){return JSON.parse(e.replace(/[\x01-\x08\x0B\x0C\x0E-\x1F\x7F]/g,""))})},qo=function(e,t){var n=t.environment,r=t.license,a=t.securedToken,i=t.secretId,o=t.region,c=t.external,s=t.group,u=t.chatBetweenGroups,l=Po(o,n,r)+"/"+Lo(r,u,c,s)+"/tunnel_callback.cgi?"+function(e){for(var t="",n="0123456789abcdefghijklmnopqurstuvwxyzABCDEFGHIJKLMNOPQURSTUVWXYZ",r=0;r<e;r++)t+=n.substr(Math.floor(Math.random()*n.length),1);return t}(20);return a&&(l+="&secret_token="+a),i&&(l+="&secret_id="+i),l+="&command="+encodeURIComponent(e),No(l,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(function(e){return e.text()}).then(function(e){return e.split("^")})},Uo=zi.a.mark(Vo),Fo=zi.a.mark(Go);function Vo(e,t){var n,r,a,i,o;return zi.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Ri.j)(Ii.getPropertyChatBetweenGroups);case 2:return n=c.sent,c.next=5,Object(Ri.j)(Ii.getPropertyGroup);case 5:return r=c.sent,"get_dynamic_config.js",c.t0=Ri.c,c.t1=Bo,c.t2="get_dynamic_config.js",c.t3=ii.a,c.t4={},c.t5=e,c.t6=t,c.next=16,Object(Ri.f)("external");case 16:return c.t7=c.sent,c.t8={queryStringData:c.t6,external:c.t7},c.t9=(0,c.t3)(c.t4,c.t5,c.t8),c.next=21,(0,c.t0)(c.t1,c.t2,c.t9);case 21:if(!(a=c.sent).error||"incorrect region"!==a.error){c.next=40;break}return c.next=25,Object(Ri.h)(ci.setPropertyRegion(a.region));case 25:return c.t10=Ri.c,c.t11=Vo,c.t12=ii.a,c.t13={},c.t14=e,c.t15=a.region,c.next=33,Object(Ri.f)("external");case 33:return c.t16=c.sent,c.t17={region:c.t15,external:c.t16},c.t18=(0,c.t12)(c.t13,c.t14,c.t17),c.next=38,(0,c.t10)(c.t11,c.t18);case 38:return i=c.sent,c.abrupt("return",i);case 40:if(!1!==n||a.visitor.groups===r){c.next=57;break}return c.next=43,Object(Ri.h)(ci.setPropertyGroup(a.visitor.groups));case 43:return c.t19=Ri.c,c.t20=Vo,c.t21=ii.a,c.t22={},c.t23=e,c.next=50,Object(Ri.f)("external");case 50:return c.t24=c.sent,c.t25={external:c.t24},c.t26=(0,c.t21)(c.t22,c.t23,c.t25),c.next=55,(0,c.t19)(c.t20,c.t26);case 55:return o=c.sent,c.abrupt("return",o);case 57:return c.abrupt("return",a);case 58:case"end":return c.stop()}},Uo)}function Go(){var e,t,n,r,a,i,o;return zi.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Ri.j)(Ii.getPropertyLicense);case 2:return e=c.sent,c.next=5,Object(Ri.j)(Ii.getPropertyGroup);case 5:return t=c.sent,c.next=8,Object(Ri.j)(Si);case 8:return n=c.sent,c.next=11,Object(Ri.j)(Ii.getPropertyRegion);case 11:return r=c.sent,c.next=14,Object(Ri.j)(Ti);case 14:return a=c.sent,c.next=17,Object(Ri.j)(Ii.getPropertyChatBetweenGroups);case 17:return i=c.sent,o={},a.pageUrl&&(o.url=a.pageUrl),"undefined"!==typeof t&&(o.groups=t),c.next=23,Object(Ri.c)(Vo,{environment:n,license:e,group:t,region:r,chatBetweenGroups:i},o);case 23:return c.abrupt("return",c.sent);case 24:case"end":return c.stop()}},Fo)}var Ho,Wo=function(e){return"1"===e},Yo=function(e){return e.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&#94;/g,"^").replace(/&#45;/g,"-").replace(/&amp;/g,"&").replace(/<BR>/g,"\n")},Jo=Yo,Qo=function(e){return JSON.parse(Yo(e))},Ko=((Ho={}).none="0",Ho.bad="1",Ho.good="2",Ho),Zo={NEW_AGENT:"newAgent",NEW_AGENT_MESSAGE:"newAgentMessage",CHAT_ENDED:"chatEnded",VISITOR_QUEUED:"visitorQueued",TYPING_INDICATOR:"typingIndicator",RATE_CHAT:"rateChat",FORWARD_CHAT_TRANSCRIPT:"forwardChatTranscript",AGENTS_OFFLINE:"agentsOffline",GET_FORM:"getForm",GET_CUSTOM_FORM:"getCustomForm",JSON:"JSON",INTEGRATION_DATA:"integrationData"},Xo={IWCS5012F:[Zo.AGENTS_OFFLINE,{}],IWCS5011F:[Zo.AGENTS_OFFLINE,{}],IWCS0002R:[Zo.NEW_AGENT,{1:["id"],2:["name",Yo],12:["chatId"],23:["avatarUrl",Yo],25:["jobTitle",Yo]}],IWCS0006R:[Zo.NEW_AGENT_MESSAGE,{1:["authorId"],2:["message",Jo],9:["isMobile",Wo],10:["id"],11:["json",function(e){if(!e)return null;try{return Qo(e)}catch(t){return null}}]}],IWCS1007S:[Zo.CHAT_ENDED,null,{reason:"closed"}],IWCS0093R:[Zo.CHAT_ENDED,null,{reason:"inactivity"}],IWCS0003R:[Zo.CHAT_ENDED,null,{reason:"closed_by_agent"}],IWCS1002S:[Zo.VISITOR_QUEUED,{2:["numberInQueue",parseInt],3:["waitingTime",parseInt]}],IWCS0002P:[Zo.TYPING_INDICATOR,{2:["realCommand",function(e){var t=e.split("&#45;");return{authorId:t[1],isTyping:Wo(t[2])}}]}],IWCS0113C:[Zo.RATE_CHAT,{1:["visitorId"],2:["chatId"],3:["rate",function(e){return Object(m.k)(function(t){return Ko[t]===e},Object.keys(Ko))},function(e){return Ko[e]}]}],IWCS0069C:[Zo.FORWARD_CHAT_TRANSCRIPT,{1:["visitorId"],2:["email"],5:["chatId"]}],IWCS0121C:[Zo.GET_FORM,{1:["type",null,function(){return"1"}],2:["license"],4:["group"]}],IWCS0122C:[Zo.GET_CUSTOM_FORM,{1:["license"],2:["type"],3:["group"]}],IWCSJSON:[Zo.JSON,{1:["json",Qo]}],IWCS0109R:[Zo.INTEGRATION_DATA,{1:["integrationName"],2:["data",Qo]}]},$o=function(e){var t=e.split("^"),n=t[0],r=t.slice(1),a=Xo[n];if(!a)return null;var i=a[0],o=a[1],c=a[2],s=void 0===c?{}:c,u=r.reduce(function(e,t,n){if(!o||!o[n+1])return e;var r=o[n+1],a=r[0],i=r[1],c=void 0===i?m.y:i;return"realCommand"===a?Object(ii.a)({},e,c(t)):(e[a]=c(t),e)},{});return{name:i,data:Object(ii.a)({},u,s)}},ec=function(e,t){for(var n,r=Object(m.m)(function(t){return t[0]===e},Xo),a=Xo[r][1],i=Math.max.apply(Math,Object.keys(a)),o=[r];o.length<i+1;){var c=a[o.length];if(c){var s=c[0],u=(n=String(t[s]),n.replace(/[\x01-\x08\x0B\x0C\x0E-\x1F\x7F]/g,"")).replace(/\^/g,"&#94;");c[2]?o.push(c[2](u)):o.push(u)}else o.push("")}return o.join("^")+"^"},tc=zi.a.mark(oc),nc=zi.a.mark(cc),rc=zi.a.mark(sc),ac=zi.a.mark(uc),ic=zi.a.mark(lc);function oc(){var e;return zi.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ri.b)({license:Object(Ri.j)(Ii.getPropertyLicense),securedToken:Object(Ri.j)(Ii.getPropertySecuredToken),secretId:Object(Ri.j)(Ii.getPropertySecretId),environment:Object(Ri.j)(Si),region:Object(Ri.j)(Ii.getPropertyRegion),external:Object(Ri.f)("external"),group:Object(Ri.j)(Ii.getPropertyGroup),chatBetweenGroups:Object(Ri.j)(Ii.getPropertyChatBetweenGroups),requestDistribution:Object(Ri.j)(Ii.getPropertyRequestDistribution)});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},tc)}function cc(e,t,n){var r;return zi.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return void 0===n&&(n={}),a.next=3,Object(Ri.c)(oc);case 3:return r=a.sent,a.next=6,Object(Ri.c)(Bo,e,Object(ii.a)({},r,{body:t}),n);case 6:return a.abrupt("return",a.sent);case 7:case"end":return a.stop()}},nc)}function sc(e){var t,n;return zi.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Ri.c)(oc);case 2:return t=r.sent,r.next=5,Object(Ri.c)(Do,e,t);case 5:return n=r.sent,r.abrupt("return",n);case 7:case"end":return r.stop()}},rc)}function uc(e,t){var n,r;return zi.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=ec(e,t),a.next=3,Object(Ri.c)(oc);case 3:return r=a.sent,a.next=6,Object(Ri.c)(qo,n,r);case 6:return a.abrupt("return",a.sent);case 7:case"end":return a.stop()}},ac)}function lc(e,t){var n,r,a,i;return zi.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(Ri.c)(oc);case 2:return n=o.sent,r=n.license,a=n.environment,i=n.region,o.next=6,Object(Ri.c)(Ro,e,{environment:a,region:i,license:r,body:t});case 6:return o.abrupt("return",o.sent);case 7:case"end":return o.stop()}},ic)}var dc=zi.a.mark(pc);function pc(e,t){var n;return zi.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n={},r.next=3,Object(Ri.c)(cc,"get_static_config."+e+"."+t+".js",n);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}},dc)}var fc=zi.a.mark(_c),mc=zi.a.mark(Ec),hc=zi.a.mark(Ic),vc=zi.a.mark(Sc),bc=zi.a.mark(kc),gc=zi.a.mark(Tc),yc=zi.a.mark(Ac),jc=zi.a.mark(Pc),Oc=function(e){var t={};try{t=JSON.parse(e)}catch(n){}return t},xc=function(e){var t,n,r="1"===e.group_properties.chat_window.custom_mobile_settings,a={nonProfitLicense:"1"===Object(m.u)("license_properties.non_profit",e),visitorData:Object(m.I)(m.b,e.visitor),features:{fileSharing:{enabled:e.attachments.enable_for_visitors},agentAvatar:{enabled:e.chat_window.display_avatar,showWithMessage:e.chat_window.display_avatar&&"modern"!==Object(m.u)("group_properties.chat_window.new_theme.name",e)},chatHistory:{enabled:"3"===e.license_properties.lc_version&&"1"===e.license_properties.customer_history_enabled},rating:{enabled:e.chat_window.display_rating,position:"modern"===Object(m.u)("group_properties.chat_window.new_theme.name",e)?"bottom":"right"},emailTranscript:{enabled:e.chat_window.display_transcript_button},logo:{enabled:e.chat_window.logo.display,path:yo(e.chat_window.logo.path)},facebookButton:{enabled:Boolean(e.chat_window.social.facebook)},twitterButton:{enabled:Boolean(e.chat_window.social.twitter)},googlePlusButton:{enabled:Boolean(e.chat_window.social.plusone)},offlineForm:{enabled:!e.embedded_chat.hide_when_offline},linksPreview:{enabled:"1"===e.group_properties.links_unfurling},preChatForm:{enabled:e.pre_chat_survey&&e.pre_chat_survey.enabled||!1},preChatAfterGreeting:{enabled:"1"===e.group_properties.pre_chat_survey_after_greeting},creditCardMasking:{enabled:e.mask_credit_cards},hideTrademark:{enabled:"1"===e.group_properties.chat_window.hide_trademark},hideOnMobile:{enabled:"1"===e.group_properties.chat_window.hide_on_mobile},hideOnInit:{enabled:"1"===e.group_properties.chat_window.hide_on_init},disableSounds:{enabled:"1"===e.group_properties.chat_window.disable_sounds},minimized:{enabled:"0"===e.group_properties.chat_window.disable_minimized},mobileMinimized:{enabled:r?"0"===e.group_properties.chat_window.mobile_disable_minimized:"0"===e.group_properties.chat_window.disable_minimized}},buttons:e.buttons.map(function(e){return{id:e.id,type:e.type,onlineImage:yo(e.online_value),offlineImage:yo(e.offline_value)}}),theme:{color:e.chat_window.theme.color,name:e.chat_window.theme.name,minimized:e.group_properties.chat_window.theme.minimized,mobileMinimized:r?e.group_properties.chat_window.mobile_minimized_theme:e.group_properties.chat_window.theme.minimized},newTheme:{name:e.group_properties.chat_window.new_theme.name,iconTheme:"modern"===e.group_properties.chat_window.new_theme.name?"modern":"smooth",agentMessageBackgroundColor:Object(m.v)("#fffff","group_properties.chat_window.new_theme.agent_message_color_background",e),agentMessageColorText:Object(m.v)("#424d57","group_properties.chat_window.new_theme.agent_message_color_text",e),backgroundColor:Object(m.v)("#e9eef4","group_properties.chat_window.new_theme.background_color",e).toLowerCase(),minimizedColorBackground:Object(m.v)("#ffffff","group_properties.chat_window.new_theme.minimized_color_background",e),minimizedColorIcon:Object(m.v)("#4384F5","group_properties.chat_window.new_theme.minimized_color_icon",e),minimizedColorText:Object(m.v)("#000000","group_properties.chat_window.new_theme.minimized_color_text",e),visitorMessageBackgroundColor:Object(m.v)("#4384f5","group_properties.chat_window.new_theme.visitor_message_color_background",e),visitorMessageColorText:Object(m.v)("#ffffff","group_properties.chat_window.new_theme.visitor_message_color_text",e),titlebarBackgroundColor:Object(m.v)("#ffffff","group_properties.chat_window.new_theme.titlebar_background_color",e),titlebarText:Object(m.v)("#424d57","group_properties.chat_window.new_theme.titlebar_text",e),systemMessageColor:Object(m.v)("#424d57","group_properties.chat_window.new_theme.system_message_color",e),agentbarBackgroundColor:Object(m.v)("#ffffff","group_properties.chat_window.new_theme.agentbar_background_color",e),agentbarText:Object(m.v)("#424d57","group_properties.chat_window.new_theme.agentbar_text",e),ctaColor:Object(m.v)("#427fe1","group_properties.chat_window.new_theme.cta_color",e),customJson:Oc(Object(m.u)("group_properties.chat_window.new_theme.custom_json",e))},domainWhitelist:e.domain_whitelist,widgetType:e.embedded_chat.enabled?"embedded":"popup",integrations:e.integrations,language:e.lang,groups:(t=e.skills,n=e.skills_online,Object(m.F)("id",t.map(function(e){return{id:e.id,status:-1!==n.indexOf(e.id)?"online":"offline",oldButtons:{onlineImage:yo(e.chat_button.online_url),offlineImage:yo(e.chat_button.offline_url)}}}))),clientLimitExceeded:e.client_limit_exceeded,screenPosition:e.group_properties.chat_window.screen_position,mobileScreenPosition:r?e.group_properties.chat_window.mobile_screen_position:e.group_properties.chat_window.screen_position};return a.features.facebookButton.enabled&&(a.features.facebookButton.path=e.chat_window.social.facebook),a.features.twitterButton.enabled&&(a.features.facebookButton.path=e.chat_window.social.twitter),a.features.googlePlusButton.enabled&&(a.features.facebookButton.path=e.chat_window.social.plusone),a};function _c(e){var t,n,r;return zi.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Ri.h)(ci.setPropertyTicketForm(Io(Eo(e.offline_form))));case 2:return a.next=4,Object(Ri.f)("external");case 4:if(t=a.sent,!e.pre_chat_survey){a.next=9;break}return n=Eo(e.pre_chat_survey),a.next=9,Object(Ri.h)(ci.setPropertyPreChatForm(n));case 9:return r=t?e.localization_url.replace("/licence/","/licence/external/"):e.localization_url,a.next=12,Object(Ri.h)(ci.setPropertyTranslationsVersion(r));case 12:return a.next=14,Object(Ri.h)(ci.setPropertyConfigLoaded(!0));case 14:case"end":return a.stop()}},fc)}var wc={labs:"labs",staging:"staging",production:"prod"},Cc=function(e,t){var n=t.split(",").map(function(e){return e.split(":")}),r=Object(m.r)(n);return Object(m.J)(function(t){if(!t)return!1;var n=parseFloat(t);return!(n<1&&e)&&n>Math.random()},r)};function Ec(e){var t,n,r,a,i,o,c;return zi.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(Ri.j)(Si);case 2:return t=s.sent,n=wc[t],r=e.global_properties[n].requests_distribution,a=!1===e.t,i=Cc(a,r),s.next=9,Object(Ri.h)(ci.setPropertyRequestDistribution(i));case 9:return o=xc(e),s.next=12,Object(Ri.j)(Ii.getPropertyGroup);case 12:if(c=s.sent,-1===e.skills_online.indexOf(c)){s.next=18;break}return s.next=16,Object(Ri.h)(ci.setPropertyChatStatus("ONLINE"));case 16:s.next=20;break;case 18:return s.next=20,Object(Ri.h)(ci.setPropertyChatStatus("OFFLINE"));case 20:return s.next=22,Object(Ri.h)(ci.setPropertyConfig(o));case 22:case"end":return s.stop()}},mc)}function Ic(){var e,t,n,r,a;return zi.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(Ri.c)(mo,Ii.getPropertyStaticConfigVersion);case 2:return e=i.sent,i.next=5,Object(Ri.j)(Ii.getPropertyGroup);case 5:return t=i.sent,i.next=8,Object(Ri.c)(pc,t,e);case 8:return n=i.sent,i.next=11,Object(Ri.c)(_c,n);case 11:return i.next=13,Object(Ri.j)(Ii.getPropertyDynamicConfig);case 13:return r=i.sent,a=Object(ii.a)({},r,n),i.next=17,Object(Ri.c)(Ec,a);case 17:case"end":return i.stop()}},hc)}function Sc(){var e,t,n;return zi.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Ri.c)(mo,Ii.getPropertyTranslationsVersion);case 2:return e=r.sent,r.next=5,Object(Ri.c)(sc,e);case 5:return t=r.sent,n=Object(m.I)(function(e){return e.toLowerCase()},t.localization),r.next=9,Object(Ri.h)(ci.setPropertyTranslations(n));case 9:case"end":return r.stop()}},vc)}function kc(e){var t,n,r,a;return zi.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(Ri.j)(Ti);case 2:return t=i.sent,i.next=5,Object(Ri.j)(Ii.getPropertyVisitorId);case 5:if(n=i.sent,r=Object(ii.a)({},t),"undefined"===typeof e.visitor.groups){i.next=10;break}return i.next=10,Object(Ri.h)(ci.setPropertyGroup(e.visitor.groups));case 10:return i.next=12,Object(Ri.h)(ci.setPropertyStaticConfigVersion(e.static_config_version));case 12:if((t.name||e.visitor.nick)&&(r.name=t.name||e.visitor.nick),(a=r.customProperties||e.visitor.params&&Object(g.b)(e.visitor.params))&&(r.customProperties=a),!e.visitor.nick&&!e.visitor.params){i.next=18;break}return i.next=18,Object(Ri.h)(gi({visitorData:r}));case 18:if(n){i.next=22;break}return i.next=21,Object(Ri.h)(ci.setPropertyVisitorId(e.visitor.session));case 21:go.setItem("visitorId",e.visitor.session);case 22:case"end":return i.stop()}},bc)}function Tc(e){var t,n,r;return zi.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Ri.c)(kc,e);case 2:return a.next=4,Object(Ri.h)(ci.setPropertyDynamicConfig(e));case 4:return a.next=6,Object(Ri.h)(ci.setPropertyClientLimitExceeded(e.client_limit_exceeded));case 6:if(!e.automatic_greeting){a.next=12;break}return t=jo(e.automatic_greeting),n=t.agent,r=t.invitation,a.next=10,Object(Ri.h)(di(n));case 10:return a.next=12,Object(Ri.h)(xi(r));case 12:case"end":return a.stop()}},gc)}function Ac(){var e,t,n,r;return zi.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Ri.c)(Go);case 2:return e=a.sent,t=e.static_config_version,n=e.visitor.groups,a.next=7,Object(Ri.c)(pc,n,t);case 7:if(r=a.sent,"3"!==r.license_properties.lc_version){a.next=12;break}return a.next=12,Object(Ri.h)(wi());case 12:case"end":return a.stop()}},yc)}function Pc(e){var t;return zi.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=8;break}return n.next=3,Object(Ri.c)(Tc,e);case 3:return n.next=5,Object(Ri.c)(_c,e);case 5:return n.next=7,Object(Ri.c)(Ec,e);case 7:return n.abrupt("return");case 8:return n.next=10,Object(Ri.c)(Go);case 10:return t=n.sent,n.next=13,Object(Ri.c)(Tc,t);case 13:return n.next=15,Object(Ri.c)(Ic);case 15:case"end":return n.stop()}},jc)}var Mc="CHATTING",Nc="NOT_CHATTING",zc=n(111),Rc=zi.a.mark(Dc);function Dc(e){var t,n,r,a,i;return zi.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.customId,n=e.text,r=e.json,o.next=3,Object(Ri.c)(mo,Ii.getPropertyVisitorId);case 3:return a=o.sent,i={author:"visitor",message:n,message_id:t,random_id:t,visitor:{id:a}},r&&(i.message_json=JSON.stringify(r)),o.next=8,Object(Ri.c)(cc,"send_message",i);case 8:return o.next=10,Object(Ri.h)({type:"PRIVATE_SEND_MESSAGE"});case 10:case"end":return o.stop()}},Rc)}var Lc=zi.a.mark(Bc);function Bc(){var e,t;return zi.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Ri.c)(mo,Ii.getPropertyVisitorId);case 2:return e=n.sent,t={source:"visitor",random_id:String(Math.random()),visitor:{id:e}},n.next=6,Object(Ri.c)(cc,"close_chat",t);case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}},Lc)}var qc=zi.a.mark(Uc);function Uc(e){var t,n,r;return zi.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Ri.c)(mo,Ii.getPropertyVisitorId);case 2:return t=a.sent,a.next=5,Object(Ri.j)(Ii.getPropertyChatId);case 5:return n=a.sent,r={visitorId:t,chatId:n,email:e.payload.email},a.next=9,Object(Ri.c)(uc,"forwardChatTranscript",r);case 9:return a.abrupt("return",a.sent);case 10:case"end":return a.stop()}},qc)}var Fc=zi.a.mark(Vc);function Vc(e){var t,n,r;return zi.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Ri.c)(mo,Ii.getPropertyVisitorId);case 2:return t=a.sent,a.next=5,Object(Ri.j)(Ii.getPropertyChatId);case 5:return n=a.sent,r={visitorId:t,chatId:n,rate:e.payload.rate},a.next=9,Object(Ri.c)(uc,"rateChat",r);case 9:return a.abrupt("return",a.sent);case 10:case"end":return a.stop()}},Fc)}var Gc=zi.a.mark(Hc);function Hc(e){var t,n;return zi.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Ri.j)(Ii.getPropertyLicense);case 2:return t=r.sent,n={license:t,type:"offline",group:e},r.next=6,Object(Ri.c)(uc,"getCustomForm",n);case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}},Gc)}var Wc=zi.a.mark(Yc);function Yc(){var e,t,n;return zi.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Ri.j)(Ii.getPropertyLicense);case 2:return e=r.sent,r.next=5,Object(Ri.j)(Ii.getPropertyGroup);case 5:return t=r.sent,n={license:e,type:"queued",group:t},r.next=9,Object(Ri.c)(uc,"getCustomForm",n);case 9:return r.abrupt("return",r.sent);case 10:case"end":return r.stop()}},Wc)}var Jc=zi.a.mark(Qc);function Qc(e){var t,n,r;return zi.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Ri.c)(mo,Ii.getPropertyVisitorId);case 2:return t=a.sent,a.next=5,Object(Ri.j)(Ii.getPropertyChatId);case 5:return n=a.sent,r={comment:e.payload.comment,conference_id:n,random_id:String(Math.random()),visitor:{id:t}},a.next=9,Object(Ri.c)(cc,"send_rating_comment",r);case 9:return a.abrupt("return",a.sent);case 10:case"end":return a.stop()}},Jc)}var Kc=zi.a.mark($c),Zc=function(e,t,n){var r=e.group,a=e.license,i=e.visitorId,o=e.visitorData,c=e.defaultValues,s=function(e,t){var n=Object(m.I)(function(e){return"message"===e?"textarea":e},e);return t.fields.map(function(e){if("information"===e.type)return null;var t={type:e.type,text:e.label,serverType:e.serverType};return(e.name in n||e.type in n)&&("options"in e?t.value=Object(m.i)(n[e.name]).map(function(t){return Object(m.k)(function(e){return e.value===t},e.options).label}).join(", "):e.name in n?t.value=n[e.name]:t.value=n[e.type],t.value=Object(m.mb)(t.value),t.text=t.text+" "+t.value),t}).filter(Boolean)}(n,t),u=Object(m.k)(function(e){return"email"===e.type||"email"===e.serverType},s);if(!u)throw{type:"missing argument",reason:"Missing email"};if(!Object(m.k)(function(e){return"textarea"===e.type},s))throw{type:"missing argument",reason:"Missing message"};var l=Object(m.k)(function(e){return"name"===e.type||"name"===e.serverType},s),d=Object(m.k)(function(e){return"subject"===e.type||"subject"===e.serverType},s),p=s.filter(function(e){var t=e.type,n=e.serverType;return-1===["name","email","subject"].indexOf(n||t)}).map(function(e){return e.text}).join("\n"),f={mail:u.value};l?f.name=l.value:c&&c.name&&(f.name=c.name);var h={group:r,licence_id:a,ticket_message:p,offline_message:s.map(function(e){return e.text}).join("\n"),requester:f,visitor_id:i};return d&&d.value&&(h.subject=d.value),o.pageUrl&&(h.source={url:o.pageUrl}),h},Xc=function(e,t){var n={id:e,text:t.ticket_message,visitor:{name:t.requester.name||null,email:t.requester.mail||null}};return t.subject&&(n.subject=t.subject),n};function $c(e){var t,n,r,a,i,o,c,s,u,l,d;return zi.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Object(Ri.j)(Ii.getPropertyGroup);case 2:return t=p.sent,p.next=5,Object(Ri.j)(Ii.getPropertyLicense);case 5:return n=p.sent,p.next=8,Object(Ri.c)(mo,Ii.getPropertyVisitorId);case 8:return r=p.sent,p.next=11,Object(Ri.j)(Ti);case 11:return a=p.sent,p.next=14,Object(Ri.j)(Ii.getPropertyTicketForm);case 14:return i=p.sent,p.next=17,Object(Ri.j)(Ii.getPropertyTranslations);case 17:return o=p.sent,c=o?{name:o.client}:{},s=Zc({group:t,license:n,visitorId:r,visitorData:a,defaultValues:c},i,e.answers),p.next=22,Object(Ri.c)(lc,"v2/tickets/new",s);case 22:if(!(u=p.sent).errors){p.next=27;break}throw l=u.errors[0],{type:d=Object.keys(l)[0],reason:l[d][0]};case 27:return p.abrupt("return",Xc(u.id,s));case 28:case"end":return p.stop()}},Kc)}var es=zi.a.mark(ts);function ts(e){var t,n,r,a;return zi.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(Ri.c)(mo,Ii.getPropertyVisitorId);case 2:return t=i.sent,n=e.customId,i.next=6,Object(Ri.c)(mo,Ii.getPropertyChatId);case 6:return r=i.sent,a={random_id:n,conference_id:r,visitor:{id:t},valid_time_sec:60},i.next=10,Object(Ri.c)(cc,"attachment_token",a);case 10:return i.abrupt("return",i.sent);case 11:case"end":return i.stop()}},es)}var ns=zi.a.mark(rs);function rs(){var e,t,n;return zi.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Ri.j)(Ii.getPropertyLicense);case 2:return e=r.sent,r.next=5,Object(Ri.j)(Ii.getPropertyGroup);case 5:return t=r.sent,n={type:"postchat",license:e,group:t},r.next=9,Object(Ri.c)(uc,"getForm",n);case 9:return r.abrupt("return",r.sent);case 10:case"end":return r.stop()}},ns)}var as=zi.a.mark(is);function is(e){var t,n,r,a;return zi.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.answers,i.next=3,Object(Ri.j)(Ii.getPropertyVisitorId);case 3:return n=i.sent,i.next=6,Object(Ri.j)(Ii.getPropertyChatId);case 6:return r=i.sent,a={conference_id:r,random_id:String(Math.random()),survey:t,visitor:{id:n}},i.next=10,Object(Ri.c)(cc,"post_chat_survey_data",a);case 10:return i.abrupt("return",i.sent);case 11:case"end":return i.stop()}},as)}var os=zi.a.mark(cs);function cs(){var e,t;return zi.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Ri.c)(mo,Ii.getPropertyVisitorId);case 2:return e=n.sent,t={random_id:String(Math.random()),visitor:{id:e}},n.next=6,Object(Ri.c)(cc,"get_predicted_agent",t);case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}},os)}var ss=zi.a.mark(us);function us(e){var t,n,r,a,i,o,c;return zi.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.messageId,s.next=3,Object(Ri.c)(mo,Ii.getPropertyVisitorId);case 3:return n=s.sent,s.next=6,Object(Ri.j)(Ii.getPropertyServerIdsMap);case 6:return r=s.sent,a=r[t],i=a.serverId,o=a.authorId,c={message:{id:i,agent_id:o},random_id:String(Math.random()),visitor:{id:n}},s.next=11,Object(Ri.c)(cc,"agent_message_seen",c);case 11:return s.abrupt("return",s.sent);case 12:case"end":return s.stop()}},ss)}var ls=zi.a.mark(ds);function ds(e){var t,n,r;return zi.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if("undefined"===typeof e){a.next=4;break}a.t0=e,a.next=7;break;case 4:return a.next=6,Object(Ri.j)(Ii.getPropertyGroup);case 6:a.t0=a.sent;case 7:return t=a.t0,a.next=10,Object(Ri.c)(mo,Ii.getPropertyVisitorId);case 10:return n=a.sent,r={visitor:{id:n},skill:t,random_id:String(Math.random())},a.next=14,Object(Ri.c)(cc,"status_ping",r,{retry:10});case 14:return a.abrupt("return",a.sent);case 15:case"end":return a.stop()}},ls)}var ps=function(e){return{chatState:e.visitor_is_chatting?Mc:Nc,chatStatus:e.agent_available?"ONLINE":"OFFLINE"}},fs=zi.a.mark(mu),ms=zi.a.mark(hu),hs=zi.a.mark(vu),vs=zi.a.mark(bu),bs=zi.a.mark(gu),gs=zi.a.mark(yu),ys=zi.a.mark(ju),js=zi.a.mark(Ou),Os=zi.a.mark(xu),xs=zi.a.mark(_u),_s=zi.a.mark(wu),ws=zi.a.mark(Cu),Cs=zi.a.mark(Eu),Es=zi.a.mark(Iu),Is=zi.a.mark(Su),Ss=zi.a.mark(ku),ks=zi.a.mark(Mu),Ts=zi.a.mark(Nu),As=zi.a.mark(Ru),Ps=zi.a.mark(Du),Ms=zi.a.mark(Lu),Ns=zi.a.mark(Bu),zs=zi.a.mark(qu),Rs=zi.a.mark(Uu),Ds=zi.a.mark(Fu),Ls=zi.a.mark(Vu),Bs=zi.a.mark(Gu),qs=zi.a.mark(Hu),Us=zi.a.mark(Wu),Fs=zi.a.mark(Yu),Vs=18e5,Gs=Di,Hs=Li,Ws=Bi,Ys=qi,Js=Ui,Qs=Fi,Ks=Vi,Zs=Gi,Xs=Hi,$s=Wi,eu=Yi,tu=Qi,nu=Ki,ru=Zi,au=Xi,iu=$i,ou=eo,cu=to,su=no,uu=ro,lu=ao,du=io,pu=oo,fu=co;function mu(){var e;return zi.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ri.j)(Ii.getPropertyTranslations);case 2:if(!(e=t.sent)){t.next=5;break}return t.abrupt("return",e);case 5:return t.next=7,Object(Ri.c)(Sc);case 7:return t.next=9,Object(Ri.j)(Ii.getPropertyTranslations);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}},fs)}function hu(){var e;return zi.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ri.j)(Ii.getPropertyWelcomeMessage);case 2:if(!(e=t.sent)){t.next=5;break}return t.abrupt("return",e);case 5:return t.next=7,Object(Ri.c)(mu);case 7:return t.abrupt("return",t.sent.welcome_to_chat);case 8:case"end":return t.stop()}},ms)}function vu(e){var t,n,r,a,i,o,c,s,u,l,d;return zi.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return u=function(){return zi.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ri.l)(function(e){return e.type===ui.getActionName()&&Object(m.u)("payload.customId",e)===a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)},t=zi.a.mark(u),p.next=4,Object(Ri.c)(mo,Ii.getPropertyChatState);case 4:return n=p.sent,r=e.payload,a=r.customId,i=r.text,o=r.json,c=n!==Mc,p.next=9,Object(Ri.j)(Ii.getPropertyAcceptedInvitation);case 9:return s=p.sent,p.next=12,Object(Ri.e)(u);case 12:if(l=p.sent,p.prev=13,!c){p.next=28;break}return p.t0=Ri.c,p.t1=Qu,p.t2=a,p.t3=i,p.next=21,Object(Ri.c)(hu);case 21:return p.t4=p.sent,p.t5=s,p.t6={customId:p.t2,text:p.t3,welcomeMessage:p.t4,acceptedInvitation:p.t5},p.next=26,(0,p.t0)(p.t1,p.t6);case 26:p.next=30;break;case 28:return p.next=30,Object(Ri.c)(Dc,{customId:a,text:i,json:o});case 30:p.next=38;break;case 32:return p.prev=32,p.t7=p.catch(13),e.payload.promise.reject({type:"connection",reason:"Request failed"}),p.next=37,Object(Ri.d)(l);case 37:return p.abrupt("return");case 38:if(!c){p.next=45;break}return p.next=41,Object(Ri.l)([di.getActionName(),li.getActionName()]);case 41:if(p.sent.type!==li.getActionName()){p.next=45;break}return e.payload.promise.reject({type:"state",reason:"Chat is offline"}),p.abrupt("return");case 45:return p.next=47,Object(Ri.g)(l);case 47:d=p.sent,e.payload.promise.resolve({id:d.payload.id,timestamp:d.payload.timestamp});case 49:case"end":return p.stop()}},hs,null,[[13,32]])}function bu(e){var t,n,r,a,i,o;return zi.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Ri.c)(mo,Ii.getPropertyClientLimitExceeded);case 2:return c.next=4,Object(Ri.j)(Ti);case 4:return t=c.sent,n=Object(m.R)(["customProperties"],t),r=Object(m.S)(m.C,Object(m.W)(["name","email","pageUrl","pageTitle","customProperties"],e.payload)),a=String(Math.random()),i=e.payload.update?Object(m.N)(t,r):Object(m.N)(n,r),c.next=11,Object(Ri.h)(gi({requestId:a,visitorData:i}));case 11:return c.next=13,Object(Ri.l)(function(e){return(e.type===pi.getActionName()||e.type===fi.getActionName())&&e.payload.requestId===a});case 13:if((o=c.sent).type!==pi.getActionName()){c.next=16;break}return c.abrupt("return",e.payload.promise.resolve(o.payload.visitorData));case 16:return c.abrupt("return",e.payload.promise.reject({type:"connection",reason:"Request failed"}));case 17:case"end":return c.stop()}},vs)}function gu(e){return zi.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ri.h)(ci.setPropertySneakPeek(e.payload.text));case 2:e.payload.promise.resolve({success:!0});case 3:case"end":return t.stop()}},bs)}function yu(e){return zi.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ri.j)(Ii.getPropertyChatId);case 2:if(t.sent){t.next=6;break}return e.payload.promise.reject({type:"state",reason:"There is no chat to forward transcript"}),t.abrupt("return");case 6:return t.prev=6,t.next=9,Object(Ri.c)(Uc,e);case 9:t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(6),e.payload.promise.reject({type:"connection",reason:"Request failed"}),t.abrupt("return");case 15:e.payload.promise.resolve({success:!0});case 16:case"end":return t.stop()}},gs,null,[[6,11]])}function ju(e){return zi.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ri.j)(Ii.getPropertyChatId);case 2:if(t.sent){t.next=6;break}return e.payload.promise.reject({type:"state",reason:"There is no chat to close"}),t.abrupt("return");case 6:return t.prev=6,t.next=9,Object(Ri.c)(Bc);case 9:t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(6),e.payload.promise.reject({type:"connection",reason:"Request failed"}),t.abrupt("return");case 15:return t.next=17,Object(Ri.l)(li.getActionName());case 17:e.payload.promise.resolve({success:!0});case 18:case"end":return t.stop()}},ys,null,[[6,11]])}function Ou(e){return zi.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ri.j)(Ii.getPropertyChatId);case 2:if(t.sent){t.next=6;break}return e.payload.promise.reject({type:"state",reason:"There is no chat to rate"}),t.abrupt("return");case 6:if(!e.payload.rate){t.next=16;break}return t.prev=7,t.next=10,Object(Ri.c)(Vc,e);case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(7),e.payload.promise.reject({type:"connection",reason:"Request failed"}),t.abrupt("return");case 16:if(!e.payload.comment){t.next=26;break}return t.prev=17,t.next=20,Object(Ri.c)(Qc,e);case 20:t.next=26;break;case 22:return t.prev=22,t.t1=t.catch(17),e.payload.promise.reject({type:"connection",reason:"Rate Comment request failed"}),t.abrupt("return");case 26:e.payload.promise.resolve({success:!0});case 27:case"end":return t.stop()}},js,null,[[7,12],[17,22]])}function xu(e){var t;return zi.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,Object(Ri.j)(Ii.getPropertyChatState);case 3:if(n.sent!==Mc){n.next=7;break}return t.promise.reject({type:"state",reason:"You can't disconnect during the chat"}),n.abrupt("return");case 7:t.promise.resolve({success:!0});case 8:case"end":return n.stop()}},Os)}function _u(e){var t,n,r,a,i,o,c;return zi.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.payload,n=t.promise,"undefined"===typeof(r=t.group)){s.next=18;break}return s.prev=3,s.next=6,Object(Ri.c)(Hc,r);case 6:return a=s.sent,i=$o(a.join("^")),o=Io(Eo(i.data.json)),s.next=11,Object(Ri.h)(ci.setPropertyTicketForm(o));case 11:n.resolve(o),s.next=17;break;case 14:s.prev=14,s.t0=s.catch(3),n.reject({type:"connection",reason:"Request failed"});case 17:return s.abrupt("return");case 18:return s.next=20,Object(Ri.c)(mo,Ii.getPropertyTicketForm);case 20:c=s.sent,n.resolve(c);case 22:case"end":return s.stop()}},xs,null,[[3,14]])}function wu(e){var t,n,r,a;return zi.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.promise,i.prev=2,i.next=5,Object(Ri.c)(Yc);case 5:r=i.sent,a=$o(r.join("^")),n.resolve(Eo(a.data.json)),i.next=13;break;case 10:i.prev=10,i.t0=i.catch(2),n.reject({type:"connection",reason:"Request failed"});case 13:case"end":return i.stop()}},_s,null,[[2,10]])}function Cu(e){var t,n;return zi.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,r.next=4,Object(Ri.c)(mu);case 4:return n=r.sent,r.abrupt("return",t.promise.resolve(n));case 8:return r.prev=8,r.t0=r.catch(1),r.abrupt("return",t.promise.reject({type:"connection",reason:"Request failed"}));case 11:case"end":return r.stop()}},ws,null,[[1,8]])}function Eu(e){var t,n;return zi.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,Object(Ri.c)(mo,Ii.getPropertyVisitorId);case 3:return r.next=5,Object(Ri.j)(Ti);case 5:return n=r.sent,r.abrupt("return",t.promise.resolve(n));case 7:case"end":return r.stop()}},Cs)}function Iu(e){var t;return zi.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,Object(Ri.c)(mo,Ii.getPropertyTicketForm);case 3:return n.prev=3,n.t0=t.promise,n.next=7,Object(Ri.c)($c,t);case 7:n.t1=n.sent,n.t0.resolve.call(n.t0,n.t1),n.next=14;break;case 11:n.prev=11,n.t2=n.catch(3),t.promise.reject(n.t2&&n.t2.reason||n.t2&&n.t2.errors?n.t2:{type:"connection",reason:"Request failed"});case 14:case"end":return n.stop()}},Es,null,[[3,11]])}function Su(){var e;return zi.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ri.c)(mo,Ii.getPropertyConfigLoaded);case 2:return t.next=4,Object(Ri.j)(Ii.getPropertyPreChatForm);case 4:if(e=t.sent){t.next=7;break}return t.abrupt("return",null);case 7:return t.abrupt("return",e);case 8:case"end":return t.stop()}},Is)}function ku(e){var t,n;return zi.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,r.next=4,Object(Ri.c)(Su);case 4:if(n=r.sent){r.next=7;break}return r.abrupt("return",t.promise.reject({type:"state",reason:"Pre-chat survey is turned off"}));case 7:return r.abrupt("return",t.promise.resolve(n));case 10:return r.prev=10,r.t0=r.catch(1),r.abrupt("return",t.promise.reject({type:"connection",reason:"Request failed"}));case 13:case"end":return r.stop()}},Ss,null,[[1,10]])}var Tu=["email","text","radio","select","group_select"],Au=["checkbox"],Pu=function(e,t){return e.map(function(e){var n=t[e.name],r=typeof t[e.name];return e.required&&!n?{reason:"Required field",description:"Pease fill in required field",field:e.name}:n&&-1!==Tu.indexOf(e.type)&&"string"!==r?{reason:"Wrong type",field:e.name}:!(!n||-1===Au.indexOf(e.type)||Array.isArray(n))&&{reason:"Wrong type",field:e.name}}).filter(Boolean)};function Mu(e){var t,n,r,a,i,o,c,s,u,l,d,p,f;return zi.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.payload,m.next=3,Object(Ri.c)(mo,Ii.getPropertyChatState);case 3:if(n=m.sent,m.prev=4,n!==Mc){m.next=7;break}return m.abrupt("return",t.promise.reject({type:"state",reason:"You can't send prechat when chat is running"}));case 7:return m.next=9,Object(Ri.j)(Ti);case 9:return r=m.sent,m.next=12,Object(Ri.c)(Su);case 12:return a=m.sent,i=t.answers,o=t.promise,c=i.choosenGroupIndex,s=Object(zc.a)(i,["choosenGroupIndex"]),m.next=17,Object(Ri.j)(Ii.getPropertyAcceptedInvitation);case 17:if(u=m.sent,l=So(s,a,c),0===(d=Pu(a.fields,s)).length){m.next=22;break}return m.abrupt("return",o.reject({type:"wrong arguments",fields:d}));case 22:if(!(p=l.fields.filter(function(e){return"email"===e.type||"name"===e.type}))){m.next=27;break}return f=p.reduce(function(e,t){var n;return Object(ii.a)({},e,((n={})[t.type]=t.answer,n))},r),m.next=27,Object(Ri.h)(gi({visitorData:f}));case 27:return m.t0=Ri.c,m.t1=Qu,m.t2=l,m.next=32,Object(Ri.c)(hu);case 32:return m.t3=m.sent,m.t4=u,m.t5={customId:"prechat_startchat",answers:m.t2,welcomeMessage:m.t3,acceptedInvitation:m.t4},m.next=37,(0,m.t0)(m.t1,m.t5);case 37:return m.next=39,Object(Ri.c)(mo,Ii.getPropertyChatId);case 39:return m.abrupt("return",o.resolve({success:!0}));case 42:return m.prev=42,m.t6=m.catch(4),m.abrupt("return",t.promise.reject({type:"connection",reason:"Request failed"}));case 45:case"end":return m.stop()}},ks,null,[[4,42]])}function Nu(e){var t,n,r,a,i,o,c,s,u,l,d,p;return zi.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.payload,f.next=3,Object(Ri.c)(mo,Ii.getPropertyChatState);case 3:return n=f.sent,f.next=6,Object(Ri.j)(Si);case 6:return r=f.sent,f.next=9,Object(Ri.j)(Ii.getPropertyLicense);case 9:return a=f.sent,f.next=12,Object(Ri.j)(Ii.getPropertyRegion);case 12:if(i=f.sent,o=t.customId,c=t.file,s=t.onProgress,f.prev=14,n===Mc){f.next=18;break}return f.next=18,Object(Ri.c)(Qu,{customId:o+"_startchat",text:""});case 18:return f.next=20,Object(Ri.c)(mo,Ii.getPropertyChatId);case 20:return u=f.sent,f.next=23,Object(Ri.c)(ts,t);case 23:return l=f.sent,d=l.attachment_token,f.next=27,Object(Ri.c)(zo,{environment:r,region:i,license:a,token:d,file:c,chatId:u,onProgress:s});case 27:return f.next=29,Object(Ri.l)(function(e){return e.type===mi.getActionName()&&e.payload.attachmentToken===d});case 29:return p=f.sent,f.abrupt("return",t.promise.resolve(Object(m.S)(m.C,Object(m.W)(["id","timestamp","url","contentType","size","width","height"],p.payload))));case 33:return f.prev=33,f.t0=f.catch(14),f.abrupt("return",t.promise.reject({type:"connection",reason:"Request failed"}));case 36:case"end":return f.stop()}},Ts,null,[[14,33]])}var zu=function(e){var t=e.type,n=e.payload;return t===ci.setPropertyPingSent.getActionName()&&!0===n.data};function Ru(e){var t,n,r,a,i,o,c,s,u,l,d;return zi.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload,p.prev=1,p.next=4,Object(Ri.c)(mo,Ii.getPropertyClientLimitExceeded);case 4:if(!p.sent){p.next=8;break}return p.next=8,Object(Ri.l)(zu);case 8:return p.next=10,Object(Ri.c)(cs);case 10:if((n=p.sent).agent){p.next=13;break}return p.abrupt("return",t.promise.resolve({}));case 13:return p.next=15,Object(Ri.c)(mu);case 15:return r=p.sent,a=n.agent,i=a.login,o=a.name,c=a.avatar_url,s=a.job_title,u=a.is_bot,l=r.welcome_to_chat,p.next=20,Object(Ri.h)(ci.setPropertyWelcomeMessage(l));case 20:return d={name:o,isBot:u,jobTitle:s,id:i,avatarUrl:yo(c),message:l},p.abrupt("return",t.promise.resolve(d));case 24:return p.prev=24,p.t0=p.catch(1),p.abrupt("return",t.promise.reject({type:"connection",reason:"Request failed"}));case 27:case"end":return p.stop()}},As,null,[[1,24]])}function Du(e){var t,n,r,a;return zi.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,i.prev=1,i.next=4,Object(Ri.c)(rs);case 4:if(n=i.sent,(r=Qo(n[1])).survey){i.next=8;break}return i.abrupt("return",t.promise.reject({type:"state",reason:"Post-chat survey is turned off"}));case 8:return a=Eo(r.survey),i.next=11,Object(Ri.h)(ci.setPropertyPostChatForm(a));case 11:return i.abrupt("return",t.promise.resolve(a));case 14:return i.prev=14,i.t0=i.catch(1),i.abrupt("return",t.promise.reject({type:"connection",reason:"Request failed"}));case 17:case"end":return i.stop()}},Ps,null,[[1,14]])}function Lu(e){var t,n,r,a;return zi.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,i.prev=1,n=t.answers,i.next=5,Object(Ri.j)(Ii.getPropertyPostChatForm);case 5:return r=i.sent,a=So(n,r),i.next=9,Object(Ri.c)(is,{answers:a});case 9:return i.abrupt("return",t.promise.resolve({success:!0}));case 12:return i.prev=12,i.t0=i.catch(1),i.abrupt("return",t.promise.reject({type:"connection",reason:"Request failed"}));case 15:case"end":return i.stop()}},Ms,null,[[1,12]])}function Bu(e){var t,n;return zi.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,Object(Ri.j)(Ii.getPropertyConfig);case 3:if(n=r.sent){r.next=7;break}return r.next=7,Object(Ri.c)(Ic);case 7:return r.next=9,Object(Ri.j)(Ii.getPropertyConfig);case 9:n=r.sent,t.promise.resolve(n);case 11:case"end":return r.stop()}},Ns)}function qu(e){var t;return zi.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,Object(Ri.h)(ci.setPropertyAcceptedInvitation(t.id));case 3:t.promise.resolve({success:!0});case 4:case"end":return n.stop()}},zs)}function Uu(e){var t,n;return zi.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,n=t.messageId,r.next=5,Object(Ri.c)(us,{messageId:n});case 5:return r.abrupt("return",t.promise.resolve({success:!0}));case 8:return r.prev=8,r.t0=r.catch(1),r.abrupt("return",t.promise.reject({type:"connection",reason:"Request failed"}));case 11:case"end":return r.stop()}},Rs,null,[[1,8]])}function Fu(e){var t,n,r,a;return zi.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,i.next=3,Object(Ri.c)(mo,Ii.getPropertyChatState);case 3:if(n=i.sent,!(n===Mc)){i.next=8;break}return t.promise.reject({type:"state",reason:"You can't start new chat during chat"}),i.abrupt("return");case 8:return i.next=10,Object(Ri.j)(Ii.getPropertyWelcomeMessage);case 10:if(r=i.sent){i.next=15;break}return i.next=14,Object(Ri.c)(mu);case 14:r=i.sent.welcome_to_chat;case 15:return i.prev=15,i.next=18,Object(Ri.c)(Qu,{customId:"startchat",welcomeMessage:r});case 18:return i.next=20,Object(Ri.c)(mo,Ii.getPropertyChatId);case 20:a=i.sent,t.promise.resolve({chatId:a}),i.next=27;break;case 24:i.prev=24,i.t0=i.catch(15),t.promise.reject({type:"connection",reason:"Request failed"});case 27:case"end":return i.stop()}},Ds,null,[[15,24]])}function Vu(e){var t,n,r,a,i,o,c,s,u,l,d,p;return zi.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(t=e.payload,n=t.group,r=t.promise,"undefined"===typeof n){f.next=6;break}f.t0=n,f.next=9;break;case 6:return f.next=8,Object(Ri.j)(Ii.getPropertyGroup);case 8:f.t0=f.sent;case 9:return a=f.t0,f.next=12,Object(Ri.j)(Ii.getPropertyClientLimitExceeded);case 12:if((i=f.sent)||"undefined"!==typeof n){f.next=23;break}return f.next=16,Object(Ri.j)(Ii.getPropertyChatState);case 16:return o=f.sent,c=o===Mc,f.next=20,Object(Ri.j)(Ii.getPropertyChatStatus);case 20:return s=f.sent,r.resolve({groupStatus:s.toLowerCase(),chatting:c}),f.abrupt("return");case 23:return f.prev=23,f.next=26,Object(Ri.c)(ds,a);case 26:if(u=f.sent,l=ps(u),d=l.chatStatus,p=l.chatState,!i||p!==Mc){f.next=31;break}return f.next=31,Object(Ri.h)(ci.setPropertyClientLimitExceeded(!1));case 31:r.resolve({groupStatus:d.toLowerCase(),chatting:p===Mc}),f.next=37;break;case 34:f.prev=34,f.t1=f.catch(23),r.reject({type:"connection",reason:"Request failed"});case 37:case"end":return f.stop()}},Ls,null,[[23,34]])}function Gu(){var e;return zi.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(Ri.c)(Pi.d,Vs);case 3:return t.next=5,Object(Ri.j)(Ii.getPropertyChatState);case 5:if(e=t.sent,e===Mc){t.next=10;break}return t.next=10,Object(Ri.h)(ci.setPropertyClientLimitExceeded(!0));case 10:t.next=0;break;case 12:case"end":return t.stop()}},Bs)}function Hu(){var e,t;return zi.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Ri.a)([Hs.getActionName()],Pi.b.expanding());case 2:return e=n.sent,n.next=5,Object(Ri.l)("VISITOR_DATA_WATCHER");case 5:return n.next=8,Object(Ri.l)(e);case 8:return t=n.sent,n.next=11,Object(Ri.c)(mo,Ii.getPropertyPingSent);case 11:return n.next=13,Object(Ri.c)(bu,t);case 13:n.next=5;break;case 15:case"end":return n.stop()}},qs)}function Wu(e){var t;return zi.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,Object(Ri.h)(ci.setPropertyGroup(t.group));case 3:case"end":return n.stop()}},Us)}function Yu(){var e,t,n;return zi.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Ri.e)(Gu);case 2:return r.next=4,Object(Ri.e)(Hu);case 4:return r.next=6,Object(Ri.m)(su.getActionName(),qu);case 6:return r.next=8,Object(Ri.m)(ru.getActionName(),Cu);case 8:return r.next=10,Object(Ri.m)(Xs.getActionName(),_u);case 10:return r.next=12,Object(Ri.m)(fu.getActionName(),wu);case 12:return r.next=14,Object(Ri.m)($s.getActionName(),Iu);case 14:return r.next=16,Object(Ri.m)(Ys.getActionName(),Ou);case 16:return r.next=18,Object(Ri.m)(Js.getActionName(),gu);case 18:return r.next=20,Object(Ri.m)(Ks.getActionName(),ju);case 20:return r.next=22,Object(Ri.m)(Qs.getActionName(),yu);case 22:return r.next=24,Object(Ri.m)(Zs.getActionName(),xu);case 24:return r.next=26,Object(Ri.m)(Ws.getActionName(),Eu);case 26:return r.next=28,Object(Ri.m)(tu.getActionName(),ku);case 28:return r.next=30,Object(Ri.m)(au.getActionName(),Ru);case 30:return r.next=32,Object(Ri.m)(iu.getActionName(),Du);case 32:return r.next=34,Object(Ri.m)(ou.getActionName(),Lu);case 34:return r.next=36,Object(Ri.m)(cu.getActionName(),Bu);case 36:return r.next=38,Object(Ri.m)(uu.getActionName(),Uu);case 38:return r.next=40,Object(Ri.m)(du.getActionName(),Vu);case 40:return r.next=42,Object(Ri.m)(pu.getActionName(),Wu);case 42:return r.next=44,Object(Ri.a)([Gs.getActionName(),eu.getActionName(),nu.getActionName(),lu.getActionName()],Pi.b.expanding());case 44:e=r.sent,t=zi.a.mark(function t(){var n,r;return zi.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ri.l)(e);case 2:n=t.sent,t.t0=n.type,t.next=t.t0===Gs.getActionName()?6:t.t0===eu.getActionName()?9:t.t0===nu.getActionName()?19:t.t0===lu.getActionName()?22:25;break;case 6:return t.next=8,Object(Ri.c)(vu,n);case 8:return t.abrupt("break",26);case 9:return t.next=11,Object(Ri.e)(Nu,n);case 11:return r=t.sent,t.next=14,Object(Ri.i)({success:Object(Ri.g)(r),cancel:Object(Ri.l)(function(e){return e.type===Ji.getActionName()&&e.payload.customId===n.payload.customId})});case 14:if(!t.sent.cancel){t.next=18;break}return t.next=18,Object(Ri.d)(r);case 18:return t.abrupt("break",26);case 19:return t.next=21,Object(Ri.c)(Mu,n);case 21:return t.abrupt("break",26);case 22:return t.next=24,Object(Ri.c)(Fu,n);case 24:return t.abrupt("break",26);case 25:return t.abrupt("return",{v:void 0});case 26:case"end":return t.stop()}},t)});case 46:return r.delegateYield(t(),"t0",48);case 48:if("object"!==typeof(n=r.t0)){r.next=51;break}return r.abrupt("return",n.v);case 51:r.next=46;break;case 53:case"end":return r.stop()}},Fs)}var Ju=zi.a.mark(Qu);function Qu(e){var t,n,r,a,i,o,c,s,u,l,d,p,f,h,v;return zi.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return t=e.customId,n=e.text,r=e.answers,a=e.welcomeMessage,i=e.acceptedInvitation,o=e.fromManualInvitation,c=void 0!==o&&o,b.next=3,Object(Ri.j)(Ii.getPropertyGroup);case 3:return s=b.sent,b.next=6,Object(Ri.c)(mo,Ii.getPropertyVisitorId);case 6:return u=b.sent,b.next=9,Object(Ri.j)(Ti);case 9:if(l=b.sent,b.t1=l.name,b.t1){b.next=15;break}return b.next=14,Object(Ri.c)(mu);case 14:b.t1=b.sent.client;case 15:if(b.t0=b.t1,b.t0){b.next=18;break}b.t0="Client";case 18:return d=b.t0,b.next=21,Object(Ri.j)(Ii.getPropertyMobile);case 21:return p=b.sent,b.next=24,Object(Ri.c)(mo,Ii.getPropertyPingSent);case 24:return f={group:s,source_group:s,details:"",details_labels:"",from_manual_invitation:c,integration_params:"",random_id:t,trigger_unique_id:"",version:"Embedded",custom_variables:{},is_mobile:p,welcome_message:(a||"").replace(/%name%/g,d),return_secured_session_id:!0,visitor:{id:u,nick:d,email:l.email||""},script_version:{embedded_env:"production",embedded_version:"VisitorSDK-adcbd28"}},n&&(f.visitor_message=n,f.visitor_message_id=t),l.customProperties&&(f.custom_variables=Object(m.J)(String,l.customProperties)),r&&(f.pre_chat_survey=r),i&&(f.trigger_unique_id=i),b.next=31,Object(Ri.h)(ci.setPropertyChatId(void 0));case 31:return b.next=33,Object(Ri.j)(Ii.getPropertyLicense);case 33:return h=b.sent,go.removeItem("securedToken"),go.removeOldSecretTokenCookie(h),b.next=38,Object(Ri.h)(ci.removePropertySecuredToken());case 38:return b.next=40,Object(Ri.h)(ci.setPropertyServerIdsMap({}));case 40:return b.next=42,Object(Ri.h)(ci.setPropertyVisitorCustomIdMap({}));case 42:return b.next=44,Object(Ri.c)(cc,"start_chat",f);case 44:if(!(v=b.sent).secured_session_id){b.next=49;break}return b.next=48,Object(Ri.h)(ci.setPropertySecretId(v.secured_session_id));case 48:go.setItem("secretId",v.secured_session_id);case 49:if(!v.secured_token){b.next=55;break}return b.next=52,Object(Ri.h)(ci.setPropertySecuredToken(v.secured_token));case 52:return b.next=54,Object(Ri.h)(ci.setPropertyChatState(Mc));case 54:go.setItem("securedToken",v.secured_token);case 55:case"end":return b.stop()}},Ju)}var Ku=zi.a.mark(nl),Zu=zi.a.mark(rl),Xu=zi.a.mark(al),$u=zi.a.mark(il),el=zi.a.mark(ol),tl=function(e,t,n,r){var a,i={visitor:{id:t,group:n}};return e&&(i.page={title:r.pageTitle,url:r.pageUrl}),e&&r.pageReferrer&&(i.page.referrer=r.pageReferrer),e&&r.email&&(i.visitor.email=r.email),e&&r.name&&(i.visitor.name=r.name),e&&r.customProperties&&(i.visitor.custom_variables=(a=r.customProperties,Object.keys(a).map(function(e){return{name:String(e),value:String(a[e])}}))),i};function nl(e){var t,n,r,a,i,o,c,s,u,l,d;return zi.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.sendFullPing,p.next=3,Object(Ri.c)(mo,Ii.getPropertyVisitorId);case 3:return n=p.sent,p.next=6,Object(Ri.j)(Ii.getPropertyLicense);case 6:return r=p.sent,p.next=9,Object(Ri.j)(Ii.getPropertyGroup);case 9:return a=p.sent,p.next=12,Object(Ri.j)(Ti);case 12:return i=p.sent,p.next=15,Object(Ri.j)(Si);case 15:return o=p.sent,p.next=18,Object(Ri.j)(Ii.getPropertyRegion);case 18:return c=p.sent,s=tl(t,n,a,i),p.next=22,Object(Ri.j)(Ii.getPropertyChatBetweenGroups);case 22:return u=p.sent,p.next=25,Object(Ri.j)(Ii.getPropertyRequestDistribution);case 25:return l=p.sent,p.prev=26,p.t0=Ri.c,p.t1=Bo,p.t2=r,p.t3=o,p.t4=c,p.t5=s,p.next=35,Object(Ri.f)("external");case 35:return p.t6=p.sent,p.t7=u,p.t8=a,p.t9=l,p.t10={license:p.t2,environment:p.t3,region:p.t4,body:p.t5,external:p.t6,chatBetweenGroups:p.t7,group:p.t8,requestDistribution:p.t9},p.t11={retry:10},p.next=43,(0,p.t0)(p.t1,"ping",p.t10,p.t11);case 43:return d=p.sent,p.next=46,Object(Ri.j)(Ii.getPropertyConnectionStatus);case 46:if("connected"===p.sent){p.next=50;break}return p.next=50,Object(Ri.h)(ci.setPropertyConnectionStatus("connected"));case 50:return p.abrupt("return",d);case 53:return p.prev=53,p.t12=p.catch(26),p.next=57,Object(Ri.j)(Ii.getPropertyConnectionStatus);case 57:if("disconnected"===p.sent){p.next=61;break}return p.next=61,Object(Ri.h)(ci.setPropertyConnectionStatus("disconnected"));case 61:return p.abrupt("return",{error:!0});case 62:case"end":return p.stop()}},Ku,null,[[26,53]])}function rl(e){var t,n,r,a,i;return zi.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!e.automatic_greeting){o.next=8;break}return t=jo(e.automatic_greeting),n=t.agent,r=t.invitation,o.next=4,Object(Ri.h)(di(n));case 4:return o.next=6,Object(Ri.h)(xi(r));case 6:o.next=20;break;case 8:if(!e.personal_greeting){o.next=13;break}return o.next=11,Object(Ri.c)(Qu,{customId:String(Math.random()),welcomeMessage:e.personal_greeting.greeting_message.message,fromManualInvitation:!0});case 11:o.next=20;break;case 13:if(!e.standard_greeting){o.next=20;break}return o.next=16,Object(Ri.c)(mu);case 16:return a=o.sent,i=a.welcome_to_chat,o.next=20,Object(Ri.c)(Qu,{customId:String(Math.random()),welcomeMessage:i,fromManualInvitation:!0});case 20:case"end":return o.stop()}},Zu)}function al(){var e,t,n,r;return zi.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Ri.a)(gi.getActionName(),Pi.b.expanding());case 2:return e=a.sent,a.next=5,Object(Ri.h)({type:"VISITOR_DATA_WATCHER"});case 5:return a.next=8,Object(Ri.l)(e);case 8:if((t=a.sent).payload.internal){a.next=26;break}return a.next=12,Object(Ri.c)(nl,{sendFullPing:!0});case 12:if(!(n=a.sent).error){a.next=17;break}return a.next=16,Object(Ri.h)(fi({error:n.error,requestId:t.payload.requestId}));case 16:return a.abrupt("return",a.sent);case 17:return a.next=19,Object(Ri.c)(rl,n);case 19:return a.next=21,Object(Ri.j)(Ti);case 21:return r=a.sent,a.next=24,Object(Ri.h)(pi({visitorData:r,requestId:t.payload.requestId}));case 24:a.next=34;break;case 26:return a.t0=Ri.h,a.next=29,Object(Ri.j)(Ti);case 29:return a.t1=a.sent,a.t2={visitorData:a.t1},a.t3={type:"EMIT_VISITOR_DATA",payload:a.t2},a.next=34,(0,a.t0)(a.t3);case 34:a.next=5;break;case 36:case"end":return a.stop()}},Xu)}function il(){var e,t,n,r;return zi.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=3,t=!0,a.next=4,Object(Ri.c)(mo,Ii.getPropertyRequestDistribution);case 4:return a.next=7,Object(Ri.c)(nl,{sendFullPing:t});case 7:if(n=a.sent,r=t,t=Boolean(n.next_ping_send_full_details),0!==n.next_ping_delay){a.next=16;break}return a.next=13,Object(Ri.c)(Ac);case 13:return a.next=15,Object(Ri.h)(ci.setPropertyClientLimitExceeded(!0));case 15:return a.abrupt("return");case 16:return e=!r&&t?0:n.next_ping_delay||3,a.next=19,Object(Ri.c)(rl,n);case 19:return a.next=21,Object(Ri.h)(ci.setPropertyPingSent(!0));case 21:return a.next=23,Object(Ri.c)(Pi.d,1e3*e);case 23:a.next=4;break;case 25:case"end":return a.stop()}},$u)}function ol(){return zi.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ri.e)(il);case 2:return e.next=4,Object(Ri.e)(al);case 4:case"end":return e.stop()}},el)}var cl=function(e){var t=document.cookie.split(";"),n=Object(m.k)(function(t){var n=Object(m.nb)(t).split("=")[0];return decodeURIComponent(n)===e},t);return n?decodeURIComponent(n.split("=")[1]):null},sl=zi.a.mark(ul);function ul(){var e,t,n,r,a,i,o,c;return zi.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(Ri.c)(mo,Ii.getPropertyRequestDistribution);case 2:return s.next=5,Object(Ri.j)(Ii.getPropertyLicense);case 5:return e=s.sent,s.prev=6,s.next=9,Object(Ri.c)(ds);case 9:return t=s.sent,s.next=12,Object(Ri.j)(Ii.getPropertyChatStatus);case 12:return n=s.sent,s.next=15,Object(Ri.j)(Ii.getPropertyChatState);case 15:return r=s.sent,a=ps(t),i=a.chatStatus,o=a.chatState,s.next=19,Object(Ri.j)(Ii.getPropertyConnectionStatus);case 19:if("connected"===s.sent){s.next=23;break}return s.next=23,Object(Ri.h)(ci.setPropertyConnectionStatus("connected"));case 23:if(n===i){s.next=26;break}return s.next=26,Object(Ri.h)(ci.setPropertyChatStatus(i));case 26:if(r===o||o!==Mc){s.next=32;break}return c=go.getItem("securedToken")||cl("secret_token_"+e),s.next=30,Object(Ri.h)(ci.setPropertySecuredToken(c));case 30:return s.next=32,Object(Ri.h)(ci.setPropertyChatState(o));case 32:s.next=42;break;case 34:return s.prev=34,s.t0=s.catch(6),s.next=38,Object(Ri.j)(Ii.getPropertyConnectionStatus);case 38:if("disconnected"===s.sent){s.next=42;break}return s.next=42,Object(Ri.h)(ci.setPropertyConnectionStatus("disconnected"));case 42:return s.next=44,Object(Ri.c)(Pi.d,3e3);case 44:s.next=2;break;case 46:case"end":return s.stop()}},sl,null,[[6,34]])}var ll=ul,dl="chat_started",pl="new_message",fl="chat_ended",ml="agent_changed",hl="status_changed",vl="connection_status_changed",bl="new_file",gl="visitor_queued",yl="typing_indicator",jl="visitor_data",Ol="chat_rated",xl="new_invitation",_l="ready",wl="message_seen",Cl="protocol_upgraded",El="integration_data",Il=zi.a.mark(zl),Sl=zi.a.mark(Ll),kl=zi.a.mark(Bl),Tl=zi.a.mark(ql),Al=zi.a.mark(Vl),Pl=zi.a.mark(Hl),Ml=zi.a.mark(Jl),Nl=zi.a.mark(Xl);function zl(e,t){var n,r,a,i,o,c,s;return zi.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return n=e.emitter,r=t.payload,n.emit("__start_chat_request_succeeded"),u.next=5,Object(Ri.c)(mo,Ii.getPropertyChatId);case 5:if(a=u.sent,n.emit(dl,{chatId:a}),!r.welcomeMessage){u.next=18;break}return u.next=10,Object(Ri.j)(Ii.getPropertyLastAgentId);case 10:return i=u.sent,u.next=13,Object(Ri.j)(Ii.getPropertyServerIdsMap);case 13:return o=u.sent,u.next=16,Object(Ri.h)(ci.setPropertyServerIdsMap(Object(ii.a)({},o,{welcome_message:{serverId:"welcome_message",authorId:i}})));case 16:return u.next=18,Object(Ri.h)(ui({id:"welcome_message",timestamp:Date.now(),authorType:"agent",authorId:i,text:r.welcomeMessage,chatId:a,customId:"welcome_message"}));case 18:if(!r.visitorMessage){u.next=21;break}return u.next=21,Object(Ri.h)(ui(r.visitorMessage));case 21:return u.next=23,Object(Ri.l)(li.getActionName());case 23:return c=u.sent,s=c.payload.reason,n.emit(fl,{reason:s}),u.next=28,Object(Ri.h)(ci.setPropertyLastMessageId(null));case 28:case"end":return u.stop()}},Il)}function Rl(e,t){var n=e.emitter,r=t.payload;n.emit(hl,{status:r.data.toLowerCase()})}function Dl(e,t){var n=e.emitter,r=t.payload;n.emit(vl,{status:r.data.toLowerCase()})}function Ll(e,t){var n,r,a,i,o;return zi.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.emitter,r=t.payload,c.next=4,Object(Ri.c)(mo,Ii.getPropertyChatId);case 4:return a=c.sent,c.next=7,Object(Ri.j)(Ii.getPropertyVisitorId);case 7:i=c.sent,o={id:r.id,timestamp:r.timestamp,authorId:"visitor"===r.authorType?i:r.authorId,text:r.text,chatId:a,json:r.json},"undefined"!==typeof r.isMobile&&(o.isMobile=r.isMobile),"undefined"!==typeof r.customId&&(o.customId=r.customId),n.emit(pl,o);case 12:case"end":return c.stop()}},Sl)}function Bl(e,t){var n,r,a,i;return zi.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n=e.emitter,r=t.payload,o.next=4,Object(Ri.j)(Ii.getPropertyVisitorId);case 4:a=o.sent,i={id:r.id,timestamp:r.timestamp,authorId:"visitor"===r.authorType?a:r.authorId,url:r.url,contentType:r.contentType,size:r.size},r.thumbnail&&(i.thumbnail=r.thumbnail),n.emit(bl,i);case 8:case"end":return o.stop()}},kl)}function ql(e,t){var n,r,a;return zi.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n=e.emitter,r=t.payload,Object(Ri.j)(Ii.getPropertyLastAgentId)!==r.id){i.next=5;break}return i.abrupt("return");case 5:return i.next=7,Object(Ri.h)(ci.setPropertyLastAgentId(r.id));case 7:a={name:r.name,id:r.id},r.avatarUrl&&(a.avatarUrl=r.avatarUrl),r.jobTitle&&(a.jobTitle=r.jobTitle),n.emit(ml,a);case 11:case"end":return i.stop()}},Tl)}function Ul(e,t){var n=e.emitter,r=t.payload,a=r.numberInQueue,i=r.waitingTime;n.emit(gl,{numberInQueue:a,waitingTime:i})}function Fl(e,t){var n=e.emitter,r=t.payload,a=r.authorId,i=r.isTyping;n.emit(yl,{authorId:a,isTyping:i})}function Vl(e){var t,n,r,a;return zi.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.emitter,i.next=3,Object(Ri.c)(mo,Ii.getPropertyVisitorId);case 3:return n=i.sent,i.next=6,Object(Ri.j)(Ti);case 6:r=i.sent,a=r.name?{id:n,name:r.name}:{id:n},Promise.resolve().then(function(){t.emit(jl,a)});case 9:case"end":return i.stop()}},Al)}function Gl(e,t){e.emitter.emit(Ol,{rate:t.payload.rate,comment:t.payload.comment})}function Hl(e,t){return zi.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.emitter.emit(xl,t.payload),n.next=4,Object(Ri.l)(function(e){return e.type===no.getActionName()&&e.payload.id===t.payload.id});case 4:return n.next=6,Object(Ri.h)(ci.setPropertyWelcomeMessage(t.payload.text));case 6:case"end":return n.stop()}},Pl)}function Wl(e){e.emitter.emit(_l)}function Yl(e,t){var n=e.emitter,r=t.payload;n.emit(wl,r)}function Jl(e,t,n){return zi.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(Ri.c)(e[n.type],{emitter:t},n);case 3:r.next=7;break;case 5:r.prev=5,r.t0=r.catch(0);case 7:case"end":return r.stop()}},Ml,null,[[0,5]])}function Ql(e){e.emitter.emit(Cl)}function Kl(e,t){var n=e.emitter,r=t.payload;n.emit(El,r)}function Zl(e,t){var n=e.emitter,r=t.payload.visitorData;n.emit(jl,Object(m.c)(r))}function Xl(e){var t,n,r;return zi.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.emitter,a.next=3,Object(Ri.e)(Vl,{emitter:n});case 3:return(t={})[si.getActionName()]=zl,t[ci.setPropertyChatStatus.getActionName()]=Rl,t[ci.setPropertyConnectionStatus.getActionName()]=Dl,t[ui.getActionName()]=Ll,t[mi.getActionName()]=Bl,t[di.getActionName()]=ql,t[hi.getActionName()]=Ul,t[vi.getActionName()]=Fl,t[bi.getActionName()]=Gl,t[xi.getActionName()]=Hl,t[ci.setPropertyHistoryLoaded.getActionName()]=Wl,t[_i.getActionName()]=Yl,t[wi.getActionName()]=Ql,t[Ci.getActionName()]=Kl,t.EMIT_VISITOR_DATA=Zl,r=t,a.next=6,Object(Ri.m)(Object.keys(r),Jl,r,n);case 6:case"end":return a.stop()}},Nl)}var $l=E("INCOMING_MESSAGE",function(e){return{name:e.name,message:e.message}}),ed=1800,td=zi.a.mark(nd);function nd(e){var t,n,r,a,i;return zi.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return void 0===e&&(e={}),o.next=3,Object(Ri.c)(mo,Ii.getPropertyVisitorId);case 3:return t=o.sent,o.next=6,Object(Ri.j)(Ii.getPropertyGroup);case 6:return n=o.sent,o.next=9,Object(Ri.j)(Ii.getPropertyLastMessageId);case 9:return r=o.sent,a=e.sneakPeek,i={random_id:String(Math.random()),visitor:{id:t,group:n}},r&&(i.last_unique_id=r),"string"===typeof a&&(i.sneak_peek=a),o.next=16,Object(Ri.c)(cc,"get_pending_messages",i);case 16:return o.abrupt("return",o.sent);case 17:case"end":return o.stop()}},td)}var rd=zi.a.mark(ud),ad=zi.a.mark(fd),id=zi.a.mark(md),od=zi.a.mark(hd),cd=zi.a.mark(vd),sd="";function ud(){var e;return zi.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ri.j)(Ii.getPropertyLicense);case 2:return e=t.sent,t.next=5,Object(Ri.h)(ci.setPropertyChatState(Nc));case 5:return t.next=7,Object(Ri.h)(ci.removePropertySecuredToken());case 7:return t.next=9,Object(Ri.h)(li());case 9:return go.removeItem("securedToken"),go.removeOldSecretTokenCookie(e),t.next=13,Object(Ri.h)(ci.setPropertyServerIdsMap({}));case 13:return t.next=15,Object(Ri.h)(ci.setPropertyVisitorCustomIdMap({}));case 15:case"end":return t.stop()}},rd)}var ld=function(e){return Object(m.u)("message.data",e)&&(e.message.data=Object(m.I)(m.b,e.message.data)),Object(m.u)("message.name",e)&&(e.message.name=Object(m.b)(e.message.name)),Object(ii.a)({timestamp:e.timestamp,uniqueId:e.unique_id},e.message)},dd=function(e){return Math.max.apply(Math,[0].concat(e.map(function(e){return e.unique_id})))},pd=function(e){return e.messages.map(function(e){if(e.message_iwcs){var t=$o(e.message_iwcs);return!!t&&{timestamp:e.timestamp,unique_id:e.unique_id,message:t}}return e}).filter(Boolean).map(ld)};function fd(){var e,t,n;return zi.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Ri.c)(mo,Ii.getPropertyConfigLoaded);case 2:return r.next=4,Object(Ri.j)(Ii.getPropertySecuredToken);case 4:if(!r.sent){r.next=36;break}return r.prev=6,r.next=9,Object(Ri.c)(nd);case 9:if(!(e=r.sent).messages){r.next=22;break}return t=pd(e),r.next=14,Object(Ri.b)(t.map(function(e){return Object(Ri.h)($l({name:e.name,message:e}))}));case 14:if(!(n=dd(e.messages))){r.next=18;break}return r.next=18,Object(Ri.h)(ci.setPropertyLastMessageId(n));case 18:return r.next=20,Object(Ri.h)(ci.setPropertyChatState(Mc));case 20:r.next=24;break;case 22:return r.next=24,Object(Ri.c)(ud);case 24:r.next=34;break;case 26:return r.prev=26,r.t0=r.catch(6),r.next=30,Object(Ri.j)(Ii.getPropertyConnectionStatus);case 30:if("disconnected"===r.sent){r.next=34;break}return r.next=34,Object(Ri.h)(ci.setPropertyConnectionStatus("disconnected"));case 34:r.next=38;break;case 36:return r.next=38,Object(Ri.h)(ci.setPropertyChatState(Nc));case 38:return r.next=40,Object(Ri.h)(ci.setPropertyHistoryLoaded(!0));case 40:case"end":return r.stop()}},ad,null,[[6,26]])}function md(){var e,t,n,r,a,i;return zi.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=3,Object(Ri.j)(Ii.getPropertySecuredToken);case 3:return e=o.sent,o.next=6,Object(Ri.j)(Ii.getPropertyChatState);case 6:return t=o.sent,o.next=9,Object(Ri.j)(Ii.getPropertySneakPeek);case 9:if(n=o.sent,!e||t!==Mc){o.next=43;break}return o.prev=11,o.next=14,Object(Ri.c)(nd,{sneakPeek:sd!==n?n:null});case 14:return r=o.sent,o.next=17,Object(Ri.j)(Ii.getPropertyConnectionStatus);case 17:if("connected"===o.sent){o.next=21;break}return o.next=21,Object(Ri.h)(ci.setPropertyConnectionStatus("connected"));case 21:if(r.messages){o.next=26;break}return o.next=24,Object(Ri.c)(ud);case 24:o.next=33;break;case 26:if(a=pd(r),!(i=dd(r.messages))){o.next=31;break}return o.next=31,Object(Ri.h)(ci.setPropertyLastMessageId(i));case 31:return o.next=33,Object(Ri.b)(a.map(function(e){return Object(Ri.h)($l({name:e.name,message:e}))}));case 33:o.next=43;break;case 35:return o.prev=35,o.t0=o.catch(11),o.next=39,Object(Ri.j)(Ii.getPropertyConnectionStatus);case 39:if("disconnected"===o.sent){o.next=43;break}return o.next=43,Object(Ri.h)(ci.setPropertyConnectionStatus("disconnected"));case 43:return sd=n,o.next=46,Object(Ri.i)([Object(Ri.c)(Pi.d,ed),Object(Ri.l)(Yi.getActionName()),Object(Ri.l)("PRIVATE_SEND_MESSAGE")]);case 46:o.next=0;break;case 48:case"end":return o.stop()}},id,null,[[11,35]])}function hd(){return zi.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ri.c)(mo,Ii.getPropertyChatState);case 2:return e.next=4,Object(Ri.c)(md);case 4:return e.next=6,Object(Ri.m)(ci.setPropertyChatState.getActionName(),md);case 6:case"end":return e.stop()}},od)}function vd(){return zi.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ri.c)(fd);case 2:return e.next=4,Object(Ri.k)(hd);case 4:case"end":return e.stop()}},cd)}var bd="agentMessageSeen",gd="sendMessage",yd="startChat",jd="chatAttachment",Od="sendRatingComment",xd="visitorMessageSeen",_d=zi.a.mark(Ed),wd=zi.a.mark(Id),Cd=zi.a.mark(Sd);function Ed(e,t){var n,r;return zi.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Ri.j)(Ii.getPropertyVisitorCustomIdMap);case 2:return r=a.sent,a.next=5,Object(Ri.h)(ci.setPropertyVisitorCustomIdMap(Object(ii.a)({},r,((n={})[e]=t,n))));case 5:case"end":return a.stop()}},_d)}function Id(e){var t,n,r,a,i,c,s,u,l,d,p,f,h;return zi.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:r=e.payload,(a=r.message).timestamp*=1e3,v.t0=a.name,v.next=v.t0===yd?6:v.t0===gd?26:v.t0===Zo.RATE_CHAT?31:v.t0===Od?34:v.t0===jd?37:v.t0===Zo.NEW_AGENT_MESSAGE?45:v.t0===Zo.AGENTS_OFFLINE?53:v.t0===Zo.CHAT_ENDED?53:v.t0===Zo.NEW_AGENT?69:v.t0===Zo.VISITOR_QUEUED?78:v.t0===Zo.TYPING_INDICATOR?81:v.t0===xd?84:v.t0===Zo.INTEGRATION_DATA?96:v.t0===bd?99:111;break;case 6:return v.next=8,Object(Ri.j)(Ii.getPropertySecuredToken);case 8:return v.t1=v.sent,v.t2=a.data.welcomeMessage,i={securedToken:v.t1,welcomeMessage:v.t2},c=Object(m.u)("data.visitor.nick",a),v.next=14,Object(Ri.j)(Ti);case 14:if(s=v.sent,!c||c===s.name){v.next=18;break}return v.next=18,Object(Ri.h)(gi({visitorData:Object(ii.a)({},s,{name:c}),internal:!0}));case 18:return a.data.visitorMessage&&(i.visitorMessage={id:a.uniqueId,timestamp:a.timestamp,authorType:"visitor",text:a.data.visitorMessage,customId:a.data.randomId}),v.next=21,Object(Ri.h)(ci.setPropertyChatId(void 0));case 21:return v.next=23,Object(Ri.h)(si(i));case 23:return v.next=25,Object(Ri.c)(Ed,a.data.randomId,a.uniqueId);case 25:return v.abrupt("break",112);case 26:return v.next=28,Object(Ri.c)(Ed,a.data.randomId,a.uniqueId);case 28:return v.next=30,Object(Ri.h)(ui({id:a.uniqueId,timestamp:a.timestamp,authorType:"visitor",text:a.data.message,customId:a.data.randomId}));case 30:return v.abrupt("break",112);case 31:return v.next=33,Object(Ri.h)(bi({id:a.uniqueId,timestamp:a.timestamp,rate:a.data.rate,comment:a.data.comment}));case 33:return v.abrupt("break",112);case 34:return v.next=36,Object(Ri.h)(bi({id:a.uniqueId,timestamp:a.timestamp,comment:a.data.comment}));case 36:return v.abrupt("break",112);case 37:return v.next=39,Object(Ri.j)(Ii.getPropertyServerIdsMap);case 39:return u=v.sent,v.next=42,Object(Ri.h)(ci.setPropertyServerIdsMap(Object(ii.a)({},u,((t={})[a.uniqueId]={serverId:a.data.attachmentToken,authorId:a.data.author.login},t))));case 42:return v.next=44,Object(Ri.h)(mi({id:a.uniqueId,timestamp:a.timestamp,authorId:a.data.author.login||"visitor",authorType:a.data.author.type,url:a.data.files[0].url,size:a.data.files[0].size,contentType:a.data.files[0]["content-type"],attachmentToken:a.data.attachmentToken,thumbnail:a.data.files[0].thumbs}));case 44:return v.abrupt("break",112);case 45:return v.next=47,Object(Ri.j)(Ii.getPropertyServerIdsMap);case 47:return l=v.sent,v.next=50,Object(Ri.h)(ci.setPropertyServerIdsMap(Object(ii.a)({},l,((n={})[a.uniqueId]={serverId:a.data.id,authorId:a.data.authorId},n))));case 50:return v.next=52,Object(Ri.h)(ui({id:a.uniqueId,timestamp:a.timestamp,authorType:"agent",text:a.data.message,isMobile:a.data.isMobile,authorId:a.data.authorId,serverId:a.data.id,json:a.data.json}));case 52:return v.abrupt("break",112);case 53:return v.next=55,Object(Ri.h)(li(a.data));case 55:return v.next=57,Object(Ri.h)(ci.setPropertyChatState(Nc));case 57:return v.next=59,Object(Ri.j)(Ii.getPropertyHistoryLoaded);case 59:return d=v.sent,v.next=62,Object(Ri.j)(Ii.getPropertyLicense);case 62:if(p=v.sent,go.removeItem("securedToken"),go.removeOldSecretTokenCookie(p),d){v.next=68;break}return v.next=68,Object(Ri.h)(ci.removePropertySecuredToken());case 68:return v.abrupt("break",112);case 69:return v.next=71,Object(Ri.h)(di({id:a.data.id,name:a.data.name,jobTitle:a.data.jobTitle,avatarUrl:yo(a.data.avatarUrl)}));case 71:return v.next=73,Object(Ri.j)(Ii.getPropertyChatId);case 73:if(v.sent){v.next=77;break}return v.next=77,Object(Ri.h)(ci.setPropertyChatId(a.data.chatId));case 77:return v.abrupt("break",112);case 78:return v.next=80,Object(Ri.h)(hi({numberInQueue:a.data.numberInQueue,waitingTime:a.data.waitingTime}));case 80:return v.abrupt("break",112);case 81:return v.next=83,Object(Ri.h)(vi({authorId:a.data.authorId,isTyping:a.data.isTyping}));case 83:return v.abrupt("break",112);case 84:return v.t3=Ri.h,v.t4=o,v.next=88,Object(Ri.j)(Ii.getPropertyVisitorCustomIdMap);case 88:return v.t5=a.data.id,v.t6=v.sent[v.t5],v.t7=a.data.id,v.t8={id:v.t6,customId:v.t7,type:"visitor"},v.t9=v.t4.messageSeen.call(v.t4,v.t8),v.next=95,(0,v.t3)(v.t9);case 95:return v.abrupt("break",112);case 96:return v.next=98,Object(Ri.h)(Ci({id:String(a.uniqueId),timestamp:a.timestamp,integrationName:a.data.integrationName,data:a.data.data}));case 98:return v.abrupt("break",112);case 99:return v.next=101,Object(Ri.j)(Ii.getPropertyServerIdsMap);case 101:if(f=v.sent,h=null,f){v.next=105;break}return v.abrupt("break",112);case 105:if(Object(m.q)(function(e,t){e.serverId===a.data.message.id&&(h=t)},f),h){v.next=108;break}return v.abrupt("break",112);case 108:return v.next=110,Object(Ri.h)(_i({id:h,customId:a.data.message.id,type:"agent"}));case 110:return v.abrupt("break",112);case 111:return v.abrupt("return");case 112:case"end":return v.stop()}},wd)}function Sd(){var e,t;return zi.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Ri.a)($l.getActionName(),Pi.b.expanding());case 2:e=n.sent;case 3:return n.next=6,Object(Ri.l)(e);case 6:return t=n.sent,n.next=9,Object(Ri.c)(Id,t);case 9:n.next=3;break;case 11:case"end":return n.stop()}},Cd)}var kd=zi.a.mark(zd),Td=zi.a.mark(Rd),Ad=zi.a.mark(Dd),Pd=[Di,Ki,ao,Xi,si].map(function(e){return e.getActionName()}),Md=function(e){var t=e.type,n=e.payload;return t===ci.setPropertyClientLimitExceeded.getActionName()&&!0===n.data},Nd=function(e){var t=e.type,n=e.payload;return t===ci.setPropertyClientLimitExceeded.getActionName()&&!1===n.data};function zd(){var e,t,n;return zi.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ho(Object(Ri.e)(vd));case 2:e=r.sent;case 3:return r.next=6,Object(Ri.i)([Object(Ri.l)(Pd),Object(Ri.l)(Nd)]);case 6:return r.next=8,ho(Object(Ri.e)(ll));case 8:return t=r.sent,r.next=11,ho(Object(Ri.e)(ol));case 11:return n=r.sent,r.next=14,Object(Ri.i)([Object(Ri.l)(Gi.getActionName()),Object(Ri.l)(Md)]);case 14:return r.next=16,Object(Ri.h)(ci.setPropertyPingSent(void 0));case 16:return r.next=18,Object(Ri.d)(t,e,n);case 18:r.next=3;break;case 20:case"end":return r.stop()}},kd)}function Rd(){var e,t,n;return zi.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(Ri.l)(ci.setPropertyGroup);case 3:return e=r.sent,t=e.payload.data,r.next=7,Object(Ri.j)(Ii.getPropertyLicense);case 7:n=r.sent,go.setPrefix("_livechat_"+n+"_"+t),r.next=0;break;case 11:case"end":return r.stop()}},Td)}function Dd(e){var t,n;return zi.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.emitter,n=e.serverConfig,r.next=3,Object(Ri.j)(Ii.getPropertyChatBetweenGroups);case 3:if(!1!==r.sent){r.next=7;break}return r.next=7,ho(Object(Ri.e)(Rd));case 7:return r.next=9,ho(Object(Ri.e)(Yu));case 9:return r.next=11,ho(Object(Ri.e)(Xl,{emitter:t}));case 11:return r.next=13,ho(Object(Ri.e)(Sd));case 13:return r.next=15,ho(Object(Ri.e)(zd));case 15:return r.next=17,Object(Ri.c)(Pc,n);case 17:case"end":return r.stop()}},Ad)}var Ld="undefined"!==typeof document,Bd=function(e){return function(t){var n=void 0===t?{}:t,r=n.text,a=n.customId,i=n.json,o=Object(ai.a)();return r&&a?(e.dispatch(Di({customId:a,text:r,json:i,promise:o})),o.promise):(o.reject({type:"missing argument",reason:"Missing text or customId parameter"}),o.promise)}},qd=function(e){return function(t){var n=t.text,r=Object(ai.a)();return e.dispatch(Ui({text:n,promise:r})),r.promise}},Ud=function(e){return function(t){var n=void 0===t?{}:t,r=n.rate,a=n.comment,i=Object(ai.a)();return r||a?r&&"good"!==r&&"none"!==r&&"bad"!==r?(i.reject({type:"wrong argument",reason:'Rate argument should be equal "good", "bad" or "none"'}),i.promise):(e.dispatch(qi({rate:r,comment:a,promise:i})),i.promise):(i.reject({type:"missing argument",reason:"Missing rate parameter"}),i.promise)}},Fd=function(e){return function(t){var n=(void 0===t?{}:t).email,r=Object(ai.a)();return n?(e.dispatch(Fi({email:n,promise:r})),r.promise):(r.reject({type:"missing argument",reason:"Missing email parameter"}),r.promise)}},Vd=function(e){return function(){var t=Object(ai.a)();return e.dispatch(Vi({promise:t})),t.promise}},Gd=function(e){return function(){var t=Object(ai.a)();return e.dispatch(Gi({promise:t})),t.promise}},Hd=function(e,t){return function(){t.off("*"),e.cancel()}},Wd=function(e){return function(t){var n=(void 0===t?{}:t).group,r=Object(ai.a)();return e.dispatch(Hi({promise:r,group:n})),r.promise}},Yd=function(e){return function(){var t=Object(ai.a)();return e.dispatch(Zi({promise:t})),t.promise}},Jd=function(e){return function(t){var n=void 0===t?{}:t,r=n.file,a=n.onProgress,i=String(Math.random()),o=Object(ai.a)();return r?r.size>10485760?(o.reject({type:"wrong argument",reason:"Cannot upload a file over 10MB"}),o.promise):(e.dispatch(Yi({file:r,customId:i,promise:o,onProgress:a})),{then:function(e,t){return o.promise.then(e,t)},catch:function(e){return o.promise.catch(e)},cancel:function(){e.dispatch(Ji({customId:i}))}}):(o.reject({type:"missing argument",reason:"Missing file"}),o.promise)}},Qd=function(e){return function(t){void 0===t&&(t={});var n=Object(ai.a)();return e.dispatch(Wi({answers:t,promise:n})),n.promise}},Kd=function(e){return function(t){var n=void 0===t?{}:t,r=n.name,a=n.email,i=n.customProperties,o=n.pageUrl,c=n.pageTitle,s=n.update,u=Object(ai.a)();return r||a||i||o||c?(e.dispatch(Li({name:r,email:a,customProperties:i,pageUrl:o,pageTitle:c,update:s,promise:u})),u.promise):(u.reject({type:"missing argument",reason:"Missing name, email, url or customProperties"}),u.promise)}},Zd=function(e){return function(){var t=Object(ai.a)();return e.dispatch(Bi({promise:t})),t.promise}},Xd=function(e){return function(){var t=Object(ai.a)();return e.dispatch(Qi({promise:t})),t.promise}},$d=function(e){return function(t){void 0===t&&(t={});var n=Object(ai.a)();return e.dispatch(Ki({promise:n,answers:t})),n.promise}},ep=function(e){return function(){var t=Object(ai.a)();return e.dispatch(Xi({promise:t})),t.promise}},tp=function(e){return function(){var t=Object(ai.a)();return e.dispatch($i({promise:t})),t.promise}},np=function(e){return function(t){void 0===t&&(t={});var n=Object(ai.a)();return e.dispatch(eo({promise:n,answers:t})),n.promise}},rp=function(e){return function(){var t=Object(ai.a)();return e.dispatch(to({promise:t})),t.promise}},ap=function e(t){return function(n){var r=Object(ai.a)();return t.dispatch(no({id:n,promise:r})),e.promise}},ip=function(e){return function(t){var n=Object(ai.a)();return e.dispatch(ro({promise:n,messageId:t})),n.promise}},op=function(e){return function(){var t=Object(ai.a)();return e.dispatch(ao({promise:t})),t.promise}},cp=function(e){return function(t){var n="undefined"!==typeof t?parseInt(t,10):void 0,r=Object(ai.a)();return e.dispatch(io({promise:r,group:n})),r.promise}},sp=function(e){return function(t){e.dispatch(oo({group:parseInt(t,10)}))}},up=function(e){return function(){var t=Object(ai.a)();return e.dispatch(co({promise:t})),t.promise}},lp=function(e,t){var n,r=void 0===e?{}:e,a=r.license,i=r.group,o=r.environment,c=void 0===o?"production":o,s=r.page,u=void 0===s?{}:s,l=r.visitor,d=void 0===l?{}:l,p=r.region,f=r.external,h=void 0===f||f,v=r.mobile,b=void 0!==v&&v;if(!a)throw new Error("Missing license parameter");if("production"!==c&&"labs"!==c&&"staging"!==c)throw new Error("Wrong environment parameter");var y=Object(w.a)(),j=y.emit,O=[];y.emit=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];O.push(t)},setTimeout(function(){y.emit=j,O.forEach(function(e){y.emit.apply(y,e)}),O=null},0);var x=String(Math.random()),_=function(e){if(void 0===e&&(e={}),e.__lc&&!1===e.__lc.chat_between_groups)return!1;var t=Object(m.u)("location.href",Ld&&document),n=t&&Object(g.g)(t);return!(n&&"1"===n.unique_groups||"1"===n.unique_group)}(t);_?go.setPrefix("_livechat_"+a):go.setPrefix("_livechat_"+a+"_"+i);var C=((n={environment:c})[oi.LICENSE]=a,n[oi.GROUP]=i,n[oi.SESSION_ID]=x,n[oi.MOBILE]=b,n.visitorData={email:d.email||null,name:d.name||null,pageUrl:u.url||Object(m.v)("unknown","location.href",Ld&&document),pageTitle:u.title||Object(m.v)("unknown","0.innerHTML",Ld&&document.getElementsByTagName("title")||{}),pageReferrer:u.referrer,customProperties:d.customProperties&&!Object(m.B)(d.customProperties)?d.customProperties:null},n[oi.SECURED_TOKEN]=go.getItem("securedToken")||cl("secret_token_"+a),n[oi.SECRET_ID]=go.getItem("secretId"),n[oi.CHAT_BETWEEN_GROUPS]=_,n);p&&(C[oi.REGION]=p);var E=Mi(C,{external:h}),I=go.getItem("visitorId");I&&E.dispatch(ci.setPropertyVisitorId(I));var S=E.runSaga(Dd,{emitter:y,serverConfig:t});return{sendMessage:Bd(E),setSneakPeek:qd(E),setVisitorData:Kd(E),getVisitorData:Zd(E),rateChat:Ud(E),forwardChatTranscript:Fd(E),closeChat:Vd(E),disconnect:Gd(E),getTicketForm:Wd(E),getTranslations:Yd(E),sendTicketForm:Qd(E),sendFile:Jd(E),on:y.on,off:y.off,destroy:Hd(S,y),getPrechatForm:Xd(E),sendPrechatForm:$d(E),getPredictedAgent:ep(E),getPostChatForm:tp(E),sendPostChatForm:np(E),getConfig:rp(E),acceptInvitation:ap(E),markMessageAsSeen:ip(E),startChat:op(E),checkGroupStatus:cp(E),setVisitorGroup:sp(E),getQueueForm:up(E)}};var dp,pp={group_select:"select",name:"text",subject:"text"},fp=function(e){return e.replace(/index[0-9]*_/gi,"")},mp=function(e,t){var n=Object(m.k)(function(e){return"groupSelect"===e.meta},e);return Object.keys(t).reduce(function(r,a){var i=t[a];if("rateComment"===a)return r.rateComment=i,r;if("rating"===a)return r.rate=null===i?i:fp(i),r;var o=Object(m.k)(function(e){return e.name===a},e),c=o.serverName;return n&&c&&c===n.serverName&&(r.choosenGroupIndex=t[n.name].match(/index([0-9]*)_/)[1],r.choosenGroup=parseInt(fp(i),10)),o.options?r.fields[c]=Object(m.A)(i)?i.map(fp):fp(i):r.fields[c]=i,r},{fields:{}})},hp=function(e,t){return Object(h.a)({},t,{type:e,fields:t.fields.reduce(function(e,t){var n=t.name,r=Object(v.a)(t,["name"]),a=Object(h.a)({},r,{type:pp[r.type]||r.type,serverType:r.type});if(a.options){a.options=a.options.map(function(e,t){return Object(h.a)({},e,{value:"index"+t+"_"+e.value,originalValue:e.value})});var i=a.options.filter(function(e){return e.checked});i.length&&(a.defaultValue=i.map(function(e){return e.value}))}if("information"===r.type&&(a.value=a.value.replace(/<br(\s)?(\/)?>/gi,"\n")),"group_select"===r.type&&(a.meta="groupSelect",a.options=a.options.map(function(e){return Object(h.a)({},e,{groupNumber:parseInt(e.originalValue,10)})})),n&&(a.serverName=n),"name"===r.type)a.name="name";else if("email"===r.type)a.name="email";else{if("rating"===r.type)return a.name="rating",[].concat(e,[a,{name:"rateComment",type:"textarea",label:a.commentLabel,required:!1,dependOn:"rating"}]);n&&(a.name="name_"+n)}return[].concat(e,[a])},[])})},vp=function(e,t){var n=t.id,r=t.serverId,a=void 0===r?n:r,i=t.author,o=t.timestamp,c=t.seen,s=void 0!==c&&c,u=t.type,l=Object(v.a)(t,["id","serverId","author","timestamp","seen","type"]);return{id:n,serverId:a,type:e,author:i,timestamp:o,seen:s,properties:Object(h.a)({serverType:u},l)}},bp=function(e){return e.urlDetails?function(e){var t=e.urlDetails;return vp("url_preview",Object(h.a)({},e,{title:t.title,description:t.description,image:{url:t.image_url,link:t.url}}))}(e):ar(e.text)?Op(e):vp("message",e)},gp=function(e){return e.replace(/\w/g,"$&[\\r\\n\\t]*")},yp=new RegExp("^[\0-\x1f]*("+gp("javascript")+"|"+gp("data")+"):","i"),jp=function(e){var t=Object(m.Z)(["title","subtitle","image","buttons"],e);return t.buttons&&(t.buttons=t.buttons.filter(function(e){return"url"!==e.type&&"webview"!==e.type||(t=e.value,!yp.test(t));var t})),{template:"default",elements:t}},Op=function(e){return vp("emoji",e)},xp=function(e){if("quick_replies"===e.template){var t=e.elements[0],n=t.title,r=t.buttons;return bp(Object(h.a)({},e,{text:n,quickReplies:r}))}return"sticker"===e.template?function(e){return vp("sticker",Object(h.a)({},e,{sticker:e.elements[0].image}))}(e):e.elements.length>1?vp("carousel",Object(h.a)({},e,{cards:e.elements.map(jp)})):vp("rich_message",Object(h.a)({},e,{card:jp(e.elements[0])}))},_p=function(e){var t=e.text,n=Object(v.a)(e,["text"]);return vp("system_message",Object(h.a)({},n,{seen:!0,defaultText:t}))},wp=function(e){var t=e.thumbnails,n=Object(v.a)(e,["thumbnails"]);if(t){var r=Object(h.a)({},t.default,{link:n.url});return t.high&&(r.srcset=t.default.url+" 1x, "+t.high.url+" 2x"),vp("rich_message",Object(h.a)({},n,{card:jp({image:r})}))}return vp("message",Object(h.a)({},n,{text:n.name}))},Cp=function(e,t){return e.filter(function(e){return e.serverName in t}).map(function(e){return{type:e.type,label:e.label,value:e.options?Object(m.i)(t[e.serverName]).map(function(t){return Object(m.k)(function(e){return e.originalValue===t},e.options).label}).join(", "):t[e.serverName]}})},Ep=function(e,t){var n=e.getEvent("liveChatChatId",t),r=n.author,a=n.timestamp,i=n.properties.text,o=e.getUser(r),c=o.type,s={text:i,timestamp:Math.floor(a/1e3),user_type:"agent"===c?c:"visitor"};"agent"===c?(s.agent_name=o.name,s.agent_login=o.id):s.visitor_name=o.name,e.emit("on_message",s)},Ip=function(e,t,n,r){e.emit("on_"+t+"_survey_submitted",{form_data:Cp(n,r)})},Sp=function(e,t,n){Ip(e,"prechat",t,n)},kp=function(e,t,n){Ip(e,"postchat",t,n)},Tp=function(e,t){e.emit("on_rating_comment_submitted",t)},Ap=function(e,t){e.emit("on_rating_submitted",null===t?"none":t)},Pp=function(e,t,n){e.emit("on_message",{text:t.properties.text,timestamp:n/1e3,user_type:"visitor",visitor_name:e.getSessionUser().name})},Mp=function(e,t,n,r){var a=r.id,i=r.text,o=r.visitor,c=o.email,s=o.name,u=r.subject,l={form_data:Cp(t,n),ticket_id:a,text:i,visitor_name:s,visitor_email:c};u&&(l.ticket_subject=u),e.emit("on_ticket_created",l)},Np=function(e){return pa()(za(e,function(e){return e.application.ready}),ea()(Boolean),Ta()(1),Ca.a)},zp=function(e,t){return new Promise(function(n){var r=Object(m.l)(function(e){return"groupSelect"===e.meta},t);if(-1!==r){var a,i=t[r],o=i.options.map(function(e){return parseInt(e.groupNumber,10)});(a=o.map(e.checkGroupStatus),Promise.all(a.map(function(e){return e.then(function(e){return{status:"fulfilled",value:e}},function(e){return{status:"rejected",reason:e}})}))).then(function(e){n(Object(m.pb)(r,Object(h.a)({},i,{options:Object(m.sb)(function(e,t){return"fulfilled"!==t.status?e:Object(h.a)({},e,{meta:{online:"online"===t.value.groupStatus}})},i.options,e)}),t))})}else n(null)})},Rp=function(e){return Object(h.a)({},e,{serverId:null,timestamp:Date.now(),seen:!0,properties:e.properties?e.properties:{}})},Dp=function(e,t,n){return Rp(Object(h.a)({id:Object(m.t)(e.getChat("liveChatChatId").events),type:"system_message",author:"system",systemMessageType:t},Object(m.d)({textVariables:n})))},Lp=function(e,t){var n=mp(e,t),r=n.fields;return{properties:{fields:e.filter(function(e){return void 0!==e.serverName&&"rating"!==e.type&&"information"!==e.type&&(!e.meta||"confirm_subscription"!==e.meta)}).map(function(e){var t=e.label,a=e.serverName;if("groupSelect"===e.meta)return{label:t,answer:e.options[n.choosenGroupIndex].label};if(Object(m.A)(e.options)){var i=Object(m.x)(a,r)?Object(m.i)(r[a]):[],o=e.options.filter(function(e){return Object(m.z)(e.originalValue,i)}).map(function(e){return e.label});return 0===o.length?null:{label:t,answer:"checkbox"===e.type?o:o[0]}}return Object(m.x)(a,r)?{label:t,answer:r[a]}:null}).filter(Boolean)}}},Bp=function(e,t,n){var r=e.license,a=e.group,i=e.region,o=e.mobile;t.updateFeature("chatHistory",{enabled:!1});var c=t.getSessionUser(),s={name:c.name,email:c.email};c.properties&&(s.customProperties=c.properties);var u={license:r,environment:"production",page:t.getApplicationState("page"),visitor:s,external:!1,region:i,mobile:o};null!==a&&(u.group=a);var l=lp(u,n);var d=function(e){void 0===e&&(e=!1);var t=[],n=e;return{add:function(e){n?e():t.push(e)},run:function(){n=!0;var e=t;t=[],e.forEach(function(e){return e()})},pause:function(){n=!1}}}(),p=function(e){return function(t){return d.add(function(){return e(t)})}},f=function(){l.destroy(),t.setApplicationState({destroyed:!0})},b=!1,g=function(){var e=t.getChat("liveChatChatId"),n=e.active,r=e.properties;if(!n&&!r.queued){if(!En(t))return t.updateView("minimized",{hidden:!0}),t.setDefaultView("Chat","timeline"),void qr(t);if(Sn(t,"offline")){if(Pn(t))return;Nr(t)}else l.getTicketForm().then(function(e){t.updateView("Chat/offline",hp("offline",e)),Pn(t)||Nr(t)},f)}},y=function(){var e=t.getChat("liveChatChatId"),n=e.active,r=e.properties,a=t.getDefaultView("Chat");if(n)t.setDefaultView("Chat","timeline");else if(!r.queued&&"queue"!==a){var i=t.getApplicationState().maximized;if(t.updateView("minimized",{hidden:!1}),!function(e){return gn(e,"prechat")}(t))return an("liveChatChatId",t)?(Ur(t),void t.setDefaultView("Chat","timeline")):void(Cn(t)?Er(t):i&&(b||(b=!0,t.setDefaultView("Chat","loader"),l.getPredictedAgent().then(function(e){var n=void 0===e?{}:e,r=n.name,a=n.id,i=n.avatarUrl,o=n.jobTitle,c=n.message,s=n.isBot;if(b=!1,t.setDefaultView("Chat","timeline"),"offline"!==t.getApplicationState("availability")){if(Ur(t),a){if(t.hasUser(a)||t.addUser({id:a,name:r,type:"agent",avatar:i,properties:{jobTitle:o,isBot:s||!1}}),t.addParticipant("liveChatChatId",a),Cr(t,a),!t.hasEvent("liveChatChatId","welcome_message")){var u=Rp({id:"welcome_message",type:"message",author:a,text:zn(t,c),originalText:c});x(u)}return s?l.startChat().catch(f):void 0}l.startChat().catch(f)}}).catch(function(){return b=!1,t.setDefaultView("Chat","timeline"),l.startChat().catch(f)}))));Er(t)}},j=function(e){var n=e.id,r=e.authorId,a=e.text,i=e.receivedFirstTime;l.acceptInvitation(n),Mr(t,{authorId:r,text:a,receivedFirstTime:i})},O=function(e){var n=t.getSessionUser();return n.serverId===e.author?n.id:e.author},x=function(e){var n=function(e){var t=Object(h.a)({},e,{id:String(e.id),author:O(e),properties:{}});switch(t.type){case"message":return bp(t);case"rich_message":return xp(t);case"file":return wp(t);case"system_message":return _p(t);default:return}}(e);mr(t,"liveChatChatId",n),"message"===n.properties.serverType&&t.getApplicationState("ready")&&Ep(t,n.id),t.getChat("liveChatChatId").properties.agentIsTyping&&n.author!==t.getSessionUser().serverId&&t.updateChat("liveChatChatId",{properties:{agentIsTyping:!1}})},_=function(e){return e.buttons?Object(h.a)({},e,{buttons:e.buttons.map(function(e){var t={text:e.text,type:e.type,value:e.value,users:e.user_ids,postback:e.postback_id};return e.webview_height&&(t.webviewHeight=e.webview_height),t})}):e},w=function(e){return e.elements?Object(h.a)({},e,{elements:e.elements.map(_)}):e},C=function(e){t.updateChat("liveChatChatId",{properties:{rate:e}}),x(Dp(t,"good"===e?"rate_me_confirmation_good":"bad"===e?"rate_me_confirmation_bad":"rate_me_cancel"))},E=new Promise(function(e){l.on("ready",function t(){l.off("ready",t),e()})}),I=new Promise(function(e){l.on("status_changed",function t(){l.off("status_changed",t),e()})});Promise.all([l.getTranslations(),l.getPrechatForm().catch(function(){return null}),l.getConfig(),E,I]).then(function(e){var n=e[0],r=e[1],a=e[2];t.setLocalization(n),kr(a,t),r&&t.updateView("Chat/prechat",hp("prechat",r)),d.run(),sn("liveChatChatId",t)&&Or(t),"offline"===t.getApplicationState().availability?g():y(),t.setApplicationState({ready:!0})}),l.on("visitor_data",p(function(e){t.getSessionUser().serverId||Br(t,e.id);var n=Object(m.Z)(["email","name"],e);Object(m.B)(n)||t.updateUser(t.getSessionUserId(),n)})),l.on("chat_ended",p(function(e){switch(e.reason){case"inactivity":x(Dp(t,"client_inactive"));break;case"closed_by_agent":x(Dp(t,"operator_closed_session",{operator:Yt("liveChatChatId",t).name}));break;default:x(Dp(t,"chat_session_closed"))}br(t),t.setDefaultView("Chat","loader"),l.getPostChatForm().then(function(e){Ir(t,hp("postchat",e)),t.setDefaultView("Chat","timeline")},function(){t.setDefaultView("Chat","timeline")})})),l.on("chat_started",p(function(e){var n=e.chatId;xr(t,{id:n})})),l.on("status_changed",function(e){var n=e.status;t.setApplicationState({availability:n}),t.getApplicationState().ready&&("offline"===n?g():y())}),l.on("agent_changed",p(function(e){var n=e.id,r=e.name,a=e.avatarUrl,i=e.jobTitle,o=t.getChat("liveChatChatId").properties,c=o.ended,s=o.queued;c&&t.flushChat("liveChatChatId"),s&&t.updateChat("liveChatChatId",{properties:{queued:!1}});var u=Yt("liveChatChatId",t);null!==u&&u.id!==n&&x(Dp(t,"user_transfer",{operator:r})),t.hasUser(n)||(t.addUser({id:n,name:r,type:"agent",avatar:a,properties:{jobTitle:i}}),t.addParticipant("liveChatChatId",n)),Cr(t,n)})),l.on("new_invitation",p(function(e){on(t)&&(yn(t)?t.updateChat("liveChatChatId",{properties:{postponedInvitation:e}}):cn("liveChatChatId",t)&&j(e))})),l.on("new_message",p(function(e){var n=e.id,r=e.authorId,a=e.timestamp,i=e.text,o=e.customId,c=e.json;if(!t.hasEvent("liveChatChatId",o)&&("welcome_message"!==n||!t.hasEvent("liveChatChatId","invitation"))){var s={id:n,author:r,timestamp:a,seen:!1};c&&"rich_message"===c.type&&c.payload?x(Object(h.a)({},s,w(c.payload),{template:c.payload.template_id,type:"rich_message"})):x(Object(h.a)({},s,{type:"message",text:"welcome_message"===n?zn(t,i):i}))}})),l.on("new_file",p(function(e){var n=e.id,r=e.authorId,a=e.timestamp,i=e.url,o=e.customId,c=e.thumbnail;if(!t.hasEvent("liveChatChatId",o)){var s={id:n,type:"file",author:r,timestamp:a,url:i,name:decodeURIComponent(Object(m.G)(i.split("/")))};c&&(s.thumbnails={default:{url:c.url}}),x(s)}})),l.on("chat_rated",p(function(e){var n=e.rate,r=e.comment;n&&("none"===n?(C(null),t.updateChat("liveChatChatId",{properties:{rateComment:null}})):C(n));r&&function(e){t.updateChat("liveChatChatId",{properties:{rateComment:e}}),x(Dp(t,"rate_me_comment_added",{comment:e}))}(r)})),l.on("message_seen",p(function(e){if("agent"!==e.type){var n=t.hasEvent("liveChatChatId",e.id)?e.id:e.customId;t.hasEvent("liveChatChatId",n)&&t.updateEvent("liveChatChatId",n,{seen:!0})}else(function(e,t,n){var r=n.getSessionUserId();return Kt(e,{authorPredicate:function(e){return e.author===r},lastSeenPredicate:function(e){return e.serverId===t}},n)})("liveChatChatId",e.id,t).forEach(function(e){t.updateEvent("liveChatChatId",e.id,{seen:!0})})})),l.on("visitor_queued",p(function(e){qr(t),t.updateChat("liveChatChatId",{properties:{queued:!0}});var n=e.numberInQueue,r=e.waitingTime;t.updateView("Chat/queue",{numberInQueue:n,waitingTime:r}),t.getView("Chat/queue").template||l.getQueueForm().then(function(e){var n;t.updateView("Chat/queue",{template:(n=e,n.fields.find(function(e){return"information"===e.type}).value)})},m.P)})),l.on("connection_status_changed",p(function(e){var n=e.status;t.setConnectionState("disconnected"===n?Wt:n)})),l.on("typing_indicator",p(function(e){var n=e.isTyping,r=t.getChat("liveChatChatId").properties,a=r.agentIsTyping,i=!!r.messageDraft;t.updateChat("liveChatChatId",{properties:{agentIsTyping:a?n:n&&!i}})})),l.on("protocol_upgraded",p(function(){t.emit("protocol_upgraded",{version:"3"})})),l.on("integration_data",p(function(e){var n=e.id,r=e.integrationName,a=e.data;if("joinme"===r){var i=Yt("liveChatChatId",t);x(function(e,n,r){return{id:e,author:r.id,type:"rich_message",template:"default",elements:[{title:t.localize("joinme_info").replace(/<(\/)?strong>/gi,"").replace(/<br>/gi,"\n").replace(/%sender%/gi,r.name),buttons:[{text:t.localize("button_allow"),type:"url",value:n.link},{text:t.localize("button_link_cancel"),type:"message",value:t.localize("joinme_session_rejected")}]}]}}(n,a,i))}})),t.on("request_update_event",function(e){var n=t.getEvent("liveChatChatId",e.id);if(e.data.seen)l.markMessageAsSeen(n.serverId).then(e.resolve).catch(e.reject);else if("offline"===n.properties.formType){var r=e.data.properties.answers,a=mp(n.properties.fields,r).fields;l.sendTicketForm(a).then(function(r){Mp(t,n.properties.fields,a,r),e.resolve(),Ar(t,e.id),t.setCurrentView("Chat")},function(n){Fr(n,t.localize,e.reject)})}else if("prechat"===n.properties.formType){var i=e.data.properties.answers,o=n.properties.fields,c=mp(o,i);Sp(t,o,c.fields);var s=function n(){l.off("__start_chat_request_succeeded",n),Ar(t,e.id,Lp(o,i))};if(l.on("__start_chat_request_succeeded",s),"number"===typeof c.choosenGroup){var u=Object(m.k)(function(e){return"groupSelect"===e.meta},o),d=Object(m.k)(function(e){return e.groupNumber===c.choosenGroup},u.options);return t.updateFeature("offlineForm",{enabled:!d.ticketFormDisabled}),l.setVisitorGroup(c.choosenGroup),void l.checkGroupStatus(c.choosenGroup).then(function(n){return"offline"===n.groupStatus?d.ticketFormDisabled?void g():l.getTicketForm({group:c.choosenGroup}).then(function(e){t.updateView("Chat/offline",hp("offline",e)),g()}):l.sendPrechatForm(Object(h.a)({},c.fields,{choosenGroupIndex:c.choosenGroupIndex})).then(function(){e.resolve()})}).catch(function(){l.off("__start_chat_request_succeeded",s),f()})}l.sendPrechatForm(c.fields).then(function(){e.resolve()},function(){l.off("__start_chat_request_succeeded",s),e.reject()})}else if("postchat"===n.properties.formType){var p=e.data.properties.answers,v=n.properties.fields,b=mp(v,p);kp(t,v,b.fields);var y=null;if(Object(m.x)("rate",b)){var O=t.getChat("liveChatChatId").properties,x=O.rate,_=O.rateComment,w={},C=x&&b.rate!==x,E=!x&&b.rate;(C||E)&&(w.rate=b.rate),Object(m.x)("rateComment",b)&&b.rateComment!==_&&(w.comment=b.rateComment),Object(m.B)(w)||(y=l.rateChat(w).then(function(){t.updateChat("liveChatChatId",{properties:Object(m.Z)(["rate","rateComment"],b)})},m.P))}Promise.all([l.sendPostChatForm(b.fields),y].filter(Boolean)).then(function(){e.resolve(),Ar(t,e.id,Lp(v,p));var n=t.getApplicationState().availability,r=t.getChat("liveChatChatId").properties.postponedInvitation;"online"===n&&r?Promise.resolve().then(function(){t.updateChat("liveChatChatId",{properties:{postponedInvitation:void 0}}),j(r),t.setDefaultView("Chat","timeline")}):t.setDefaultView("Chat","timeline")})}}),t.on("request_update_chat",function(e){var n=e.resolve,r=e.reject,a=e.data,i=a.properties,o=void 0===i?{}:i,c=Object(v.a)(a,["properties"]);if(o.rateComment)Tp(t,o.rateComment),l.rateChat({comment:o.rateComment}).then(n).catch(r);else if("undefined"!==typeof o.rate){Ap(t,o.rate);var s=null===o.rate;l.rateChat({rate:s?"none":o.rate}).then(function(){s&&t.updateChat("liveChatChatId",{properties:{rateComment:null}}),n()}).catch(r)}else o.transcriptSentTo?l.forwardChatTranscript({email:o.transcriptSentTo}).then(n).catch(r):!1===c.active?l.closeChat().then(n).catch(r):"string"===typeof o.messageDraft&&l.setSneakPeek({text:o.messageDraft}).then(n).catch(r)}),t.on("request_update_user",function(e){var n=e.resolve,r=(e.reject,e.id),a=e.data,i=a.properties,o=Object(v.a)(a,["properties"]);t.getSessionUserId()===r&&(i&&(o.customProperties=i,o.update=!0),l.setVisitorData(o).then(n).catch(m.P))}),t.on("request_set_user_properties",function(e){var n=e.resolve,r=(e.reject,e.id),a=e.properties;if(t.getSessionUserId()===r){var i={};a&&(i.customProperties=a,i.update=!1),l.setVisitorData(i).then(n).catch(m.P)}}),t.on("update_event",function(e){var n=e.event;"file"===n.type&&n.properties.canceled&&vr(t,n.id)}),t.on("send_event",function(e){var n=e.event,r=e.meta;if("file"===n.type)hr(t,n.id),l.sendFile({file:r.file,onProgress:function(e){t.updateEvent("liveChatChatId",n.id,{properties:{progress:e}})}}).then(function(e){var r=e.id,a=e.url;t.setEventServerId("liveChatChatId",n.id,r),t.updateEvent("liveChatChatId",n.id,{delivered:!0,properties:{url:a}}),vr(t,n.id)}).catch(function(e){var r={failed:!0,failReason:"Cannot upload a file over 10MB"===e.reason?t.localize("cannot_upload_a_file_over_10mb"):t.localize("upload_failed")};t.updateEvent("liveChatChatId",n.id,{properties:r})});else if("message"===n.type||"emoji"===n.type){var a={customId:n.id,text:n.properties.text},i=n.properties.triggeredBy;if(i&&"action_button"===i.type){var o=t.getEvent("liveChatChatId",i.event).serverId;a.json={postback:{id:i.button.postback,type:i.button.type,value:i.button.value,event_id:o}}}l.setSneakPeek({text:""}),l.sendMessage(a).then(function(e){Pp(t,n,e.timestamp),t.setEventServerId("liveChatChatId",n.id,e.id),t.updateEvent("liveChatChatId",n.id,{delivered:!0})},function(){t.updateEvent("liveChatChatId",n.id,{failed:!0})})}});var S=pa()(za(t,function(e){return e.application.destroyed}),ea()(Boolean),Ta()(1),Ca.a);pa()(za(t,function(e){return e.application.page}),Sa()(1),Object(Aa.a)(S),ra()(function(e){var t=e.title,n=e.url;return l.setVisitorData({pageTitle:t,pageUrl:n}).catch(m.P)}));var k=function(){t.getApplicationState("destroyed")||l.checkGroupStatus().then(function(e){"online"===e.groupStatus?y():g()}).catch(f)};t.on("flush_chat",function(){var e=t.getView("Chat/prechat");t.getChat("liveChatChatId").active||(Sn(t,"prechat")&&zr(t,e),k())});var T=Np(t),A=function(e){return pa()(T,ba(e))},P=pa()(A(function(){return za(t,function(e){return e.application.maximized})}),ea()(Boolean),Ca.a);pa()(P,ra()(function(){return d.add(function(){return k()})})),pa()(A(function(){if(!Cn(t))return xa.a;var e=za(t,function(){return In(t,"prechat")});return pa()(oa()(P,e),ea()(function(){return In(t,"prechat")}),ba(function(){var e=t.getLastEvent("liveChatChatId");return pa()(Object(la.a)(zp(l,e.properties.fields)),Oa)}))}),ea()(function(e){return e&&In(t,"prechat")}),ra()(function(e){var n=t.getLastEvent("liveChatChatId").id;return t.updateEvent("liveChatChatId",n,{properties:{fields:e}})}))},qp=Object(Vn.b)()?window.localStorage:Vn.a,Up={setItem:function(e,t){return new Promise(function(n){return n(qp.setItem(e,t))})},getItem:function(e){return new Promise(function(t){return t(qp.getItem(e))})},removeItem:function(e){return new Promise(function(t){return t(qp.removeItem(e))})}},Fp=function(e,t,n){return""+("production"===n?"https://accounts.livechatinc.com":"https://accounts.livechatinc.com".replace("accounts.","accounts."+n+"."))+function(e){var t=e.uniqueGroups,n=e.license,r=e.group;return(t?"/licence/g"+n+"_"+r:"")+"/customer"}(e)+"?"+Object(g.a)(function(e,t){var n=e.clientId,r=e.license;return{license_id:String(r),flow:"button",response_type:"token",client_id:n,redirect_uri:t,post_message_uri:t,state:"@livechat/customer-auth"}}(e,t))},Vp=function(e){var t=e.code,n=e.message,r=new Error(n);return r.code=t,r},Gp=function(e,t){if("identity_exception"in e)throw Vp({code:"SSO_IDENTITY_EXCEPTION",message:e.identity_exception});if("oauth_exception"in e)throw Vp({code:"SSO_OAUTH_EXCEPTION",message:e.oauth_exception});return{accessToken:e.access_token,entityId:e.entity_id,expiresIn:1e3*e.expires_in,tokenType:e.token_type,creationDate:Date.now(),license:t}},Hp=function(e,t){var n=e.license,r=function(e){return"production"===e?"https://accounts.livechatinc.com":"https://accounts.livechatinc.com".replace("accounts.","accounts."+e+".")}(t);return new Promise(function(a,i){var o=function(e,t){var n=document.createElement("iframe");return n.style.display="none",n.setAttribute("src",Fp(e,Object(g.d)(String(location))+location.pathname,t)),n}(e,t),c=function(){Object(Na.f)(o),window.removeEventListener("message",u,!1)},s=setTimeout(function(){c(),i(Vp({message:"Request timed out.",code:"REQUEST_TIMEOUT"}))},15e3),u=function(e){var t=e.origin,o=e.data;if(t===r&&function(e){return e&&"@livechat/customer-auth"===e.state}(o)){clearTimeout(s),c();try{a(Gp(o,n))}catch(u){i(u)}}};window.addEventListener("message",u,!1),Object(Na.c)().then(function(e){e.appendChild(o)})})},Wp=function(e){var t=e.license,n=e.clientId;if("number"!==typeof t||"string"!==typeof n)throw new Error("You need to pass valid configuration object: { license, clientId }.")},Yp=function(e,t){Wp(e);var n="@@lc_auth_token:"+e.license+(e.uniqueGroups?":"+e.group:""),r=null,a=null,i=Up.getItem(n).then(function(e){null!==i&&(i=null,e&&(a=JSON.parse(e)))}),o=function(){return r=Hp(e,t).then(function(e){return r=null,Up.setItem(n,JSON.stringify(e)),a=e,e},function(e){throw r=null,e})};return{getFreshToken:o,getToken:function e(){return r||(a&&!function(e){var t=e.creationDate,n=e.expiresIn;return Date.now()>=t+n}(a)?Promise.resolve(a):i?i.then(e):o())},hasToken:function e(){return i?i.then(e):Promise.resolve(!!a)},invalidate:function(){return a=null,i=null,Up.removeItem(n)}}},Jp=n(45),Qp="login",Kp="set_customer_fields",Zp="update_customer",Xp="update_customer_page";function $p(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var ef=function(e){return e.connection.status},tf=function(e,t){return e.requests[t]},nf=function(e){var t={},n=e.users.self;return n.name&&(t.name=n.name),n.email&&(t.email=n.email),t.fields=n.fields,t},rf=function(e){return e.users.self.id},af=function(e,t){var n=e.chats[t];return!!n&&n.active},of=function(e){return"connected"===ef(e)},cf=function(e){var t=e.region;return"https://api"+(t?"-"+t:"")+function(e){var t=e.license,n=e.env;return 1520===t?".staging":"production"===n?"":"."+n}(e)+".livechatinc.com/v3.0/customer"},sf=function(e){var t=e.license,n=e.group,r=void 0===n?null:n,a=e.customer,i=void 0===a?{}:a,o=e.env,c=e.page,s=void 0===c?null:c,u=e.region,l=e.referrer,d=void 0===l?null:l,p=e.uniqueGroups,f=void 0!==p&&p;return{license:t,env:o,group:r,chats:{},connection:{status:"disconnected"},page:s,region:u,referrer:d,requests:{},users:{self:{id:null,type:"customer",name:null,email:null,fields:{}},others:{}},customerUpdate:{name:i.name||null,email:i.email||null,fieldsToSet:i.fields||null,fieldsToUpdate:null},uniqueGroups:f}},uf=function(e,t){var n=t.id,r=e.requests,a=(r[n],Object(D.a)(r,[n].map($p)));return Object(x.a)({},e,{requests:a})},lf=function(e,t){return Object(m.db)("connection.status",e,t)},df=T(null,((dp={}).change_region=function(e,t){var n=t.region;return Object(x.a)({},e,{region:n})},dp.clear_customer_update=function(e){return Object(x.a)({},e,{customerUpdate:{name:null,email:null,fieldsToSet:null,fieldsToUpdate:null}})},dp.destroy=function(e){return lf("destroyed",e)},dp.login_success=function(e){return lf("connected",e)},dp.pause_connection=function(e){return lf("paused",e)},dp.request_failed=uf,dp.response_received=uf,dp.send_request=function(e,t){var n=t.action,r=t.promise,a=t.resolve,i=t.reject,o=t.id,c=t.data;return Object(m.db)("requests."+o,{promise:r,resolve:a,reject:i,action:n,data:c},e)},dp.set_chat_active=function(e,t){var n=t.id,r=t.active;return Object(m.db)("chats."+n+".active",r,e)},dp.set_customer_data=function(e,t){var n=nf(e),r={};return n.name!==t.name&&(r.name=t.name),n.email!==t.email&&(r.email=t.email),Object(m.eb)(n.fields,t.fields)||(r.fields=t.fields),Object.keys(r).length?Object(x.a)({},e,{users:Object(x.a)({},e.users,{self:Object(x.a)({},e.users.self,r)})}):e},dp.set_customer_fields=function(e,t){var n=t.fields;return of(e)?e:Object(x.a)({},e,{customerUpdate:Object(x.a)({},e.customerUpdate,{fieldsToSet:n,fieldsToUpdate:null})})},dp.set_self_id=function(e,t){return Object(m.db)("users.self.id",t,e)},dp.socket_disconnected=function(e){var t=ef(e);var n=lf("disconnected"===t?"disconnected":"reconnecting",e);return Object(x.a)({},n,{requests:{}})},dp.update_customer=function(e,t){var n=t.name,r=t.email,a=t.fields;if(of(e))return e;var i={};return"string"===typeof n&&(i.name=n),"string"===typeof r&&(i.email=r),Object(m.D)(a)&&(i.fieldsToUpdate=Object(x.a)({},e.customerUpdate.fieldsToUpdate,a)),Object.keys(i).length?Object(x.a)({},e,{customerUpdate:Object(x.a)({},e.customerUpdate,i)}):e},dp.update_customer_page=function(e,t){return Object(x.a)({},e,{page:Object(x.a)({},e.page,t)})},dp));var pf="CONNECTION_LOST",ff="MISDIRECTED_CONNECTION",mf="REQUEST_TIMEOUT";function hf(e){var t=e.message,n=e.code,r=new Error(t);return r.code=n,r}var vf=function(e){var t={type:e.type};switch(e.type){case"message":t.text=e.text;break;case"filled_form":t.form_id=e.formId,t.fields=e.fields;break;default:t=e}return"string"===typeof e.customId&&(t.custom_id=e.customId),e.postback&&(t.postback=e.postback),Object(m.D)(e.properties)&&(t.properties=e.properties),t},bf=function(e){var t=e.access,n=e.events,r=e.chatProperties,a=e.threadProperties,i={};return t&&t.groups&&(i.access={group_ids:t.groups}),n&&(i.thread={events:n.map(vf)}),r&&(i.properties=r),a&&(i.thread=i.thread||{},i.thread.properties=a),{chat:i}},gf=function(){return{type:"clear_customer_update"}},yf=function(e){return{type:"destroy",payload:{reason:e}}},jf=function(e){return{type:"login_success",payload:e}},Of=function(e){return void 0===e&&(e=!1),{type:"prefetch_token",payload:{fresh:e}}},xf=function(e){return{type:"reconnect",payload:{delay:e}}},_f=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n={}),{type:"send_request",payload:{action:e,data:t},meta:n}},wf=function(e,t){return{type:"set_chat_active",payload:{id:e,active:t}}},Cf=function(e){return{type:"set_self_id",payload:e}},Ef=function(e,t){t.payload.id=Object(m.t)(e.getState().requests);var n=C(),r=n.resolve,a=n.reject,i=n.promise;return t.payload.promise=i,t.payload.resolve=r,t.payload.reject=a,e.dispatch(t),i},If=n(78),Sf="AUTHENTICATION",kf="USERS_LIMIT_REACHED",Tf="WRONG_PRODUCT_VERSION",Af=function(e){var t=e.getState(),n=t.license,r=t.group;return"side_storage_"+n+(t.uniqueGroups?":"+r:"")},Pf=function(e){return Up.getItem(Af(e)).catch(m.P).then(function(e){return void 0===e&&(e="{}"),JSON.parse(e)}).catch(function(){return{}})},Mf=function(e,t,n){var r=e.slice(0),a=!1;return function e(i){var o=r.shift();Object(If.a)(function(){return o(i)}).then(function(n){a||(r.length?e(n):t(n))},function(e){a||n(e)})}(),{cancel:function(){a=!0}}},Nf=function(e,t,n){return Ef(e,_f(t,n,{source:"login"}))},zf=function(e){return new Promise(function(t){setTimeout(t,e)})},Rf=function(e){var t={};return e.name&&(t.name=e.name),e.email&&(t.email=e.email),t},Df=function(e){var t=Rf(e);return e.fieldsToSet&&(t.fields=e.fieldsToSet),t},Lf=function(e,t){var n=Rf(e);return e.fieldsToUpdate&&(n.fields=Object(x.a)({},t||{},e.fieldsToUpdate)),n};function Bf(e,t){var n,r,a=null,i=null,o=new po.a({min:300,max:6e4,jitter:.3}),c=function(){return n.dispatch(gf())},s=function(e){return n.dispatch(yf(e))},u=function(){return n.dispatch(xf(o.duration()))},l=function(){return Promise.all([t.getToken(),Pf(n)])},d=function(e){var t=e[0],r=e[1];return null===rf(n.getState())&&n.dispatch(Cf(t.entityId)),[t,r]},p=function(e){var t=e[0],r=e[1],o=n.getState(),s=o.group,u=o.page,l=o.referrer,d=o.customerUpdate,p=Df(d);a=d.fieldsToUpdate,c();var f={token:t.tokenType+" "+t.accessToken,customer:p,customer_side_storage:r};return"number"===typeof s&&(f.group_id=s),null!==u&&(i=u,f.customer_page=u),null!==l&&(f.referrer=l),Promise.race([Nf(n,Qp,f),zf(15e3).then(function(){return Promise.reject(hf({message:"Request timed out.",code:mf}))})])};return function(e){n=e,r&&r.cancel(),r=Mf([l,d,p],function(e){r=null,o.reset(),function(){var e=n.getState(),t=e.customerUpdate,r=e.page;i!==r&&Nf(n,Xp,r).catch(m.P);var o=t.fieldsToSet;o&&(a=null,Nf(n,Kp,{fields:o}).catch(m.P));var s=Lf(t,a);Object.keys(s).length&&Nf(n,Zp,s).catch(m.P),a=null,i=null,c()}(),n.dispatch(jf(e))},function(e){switch(e.code){case Sf:return t.getFreshToken(),void u();case pf:case ff:return;case"SSO_IDENTITY_EXCEPTION":case"SSO_OAUTH_EXCEPTION":return"server_error"===e.message||"temporarily_unavailable"===e.message?void u():void s(e.message);case kf:case Tf:return void s(e.code.toLowerCase());default:return void u()}})}}var qf,Uf,Ff,Vf=function(e,t){var n=e.getState,r=e.dispatch,a=function(e){return e.requests}(n());r({type:"fail_all_requests",payload:{rejects:Object.keys(a).map(function(e){return a[e].reject}),reason:t}})},Gf=function(e,t,n){var r=e.getState,a=e.dispatch,i=t.payload.id;a({type:"request_failed",payload:{id:i,reject:r().requests[i].reject,error:n}})},Hf=function(e){var t=e.getState,n=e.dispatch,r=t();n({type:"socket_disconnected",payload:{previousStatus:ef(r)}})},Wf=((qf={})[pf]="Connection lost.",qf[ff]="Connected to wrong region.",qf),Yf=function(e,t){var n=e.getState(),r=t.payload.action;if("push_received"===t.type){var a=t.payload.push;switch(r){case"incoming_chat_thread":return void e.dispatch(wf(a.data.chat,!0));case"thread_closed":return void e.dispatch(wf(a.chat,!1));case"customer_updated":return void e.dispatch({type:"set_customer_data",payload:a});default:return}}var i=t.payload.response;switch(r){case"close_thread":return void e.dispatch(wf(t.payload.data.chat_id,!1));case"get_chats_summary":return void i.chatsSummary.filter(function(e){var t=e.id,r=e.active;return af(n,t)!==r}).forEach(function(t){var n=t.id,r=t.active;e.dispatch(wf(n,r))});case"activate_chat":case"start_chat":return void e.dispatch(wf(i.data.chat,!0));case Zp:case Kp:return void e.dispatch({type:"set_customer_data",payload:i});default:return}},Jf=function(e,t){t.forEach(function(t){e("user_data",t)})},Qf=function(e,t){var n=e.emit,r=e.store,a=t.payload,i=a.action,o=a.push;switch(i){case"chat_properties_updated":case"chat_thread_properties_updated":case"last_seen_timestamp_updated":case"thread_closed":return void n(i,o);case"customer_side_storage_updated":return void function(e,t){Up.setItem(Af(e),JSON.stringify(t)).catch(m.P)}(r,o.customer_side_storage);case"chat_user_added":return Jf(n,[o.user]),void(o.joined&&n("user_joined_chat",{chat:o.chat,user:o.user.id}));case"chat_user_removed":return void n("user_left_chat",o);case"customer_disconnected":switch(o.reason){case"access_token_expired":r.dispatch(Of(!0)),n("disconnected",o);break;case"customer_banned":case"license_not_found":case"product_version_changed":case"too_many_connections":case"unsupported_version":r.dispatch(yf(o.reason));break;case"misdirected_connection":Vf(r,ff),r.dispatch({type:"change_region",payload:o.data});break;default:n("disconnected",o)}return;case"incoming_chat_thread":return Jf(n,o.users),void n("incoming_chat_thread",o.data);case"incoming_event":return void n("new_event",o);case"incoming_typing_indicator":return void n(o.isTyping?"user_is_typing":"user_stopped_typing",{chat:o.chat,user:o.user});default:return void n(i,o)}},Kf=function(e){var t=e.auth,n=e.emitter,r=e.socket,a=n.emit,i=Bf(0,t);return function(e,o){var c=e.type,s=e.payload;switch(c){case"change_region":return Hf(o),void r.reinitialize();case"check_goals":return void function(e,t){t.getToken().then(function(t){var n=e.getState();null===rf(n)&&e.dispatch(Cf(t.entityId));var r=n.page;if(r&&r.url){var a=Object(g.a)({license_id:n.license}),i={customer_fields:nf(n).fields,group_id:n.group||0,page_url:r.url};Object(b.a)(cf(n)+"/action/check_goals?"+a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:t.tokenType+" "+t.accessToken},body:JSON.stringify({payload:i})},m.P)}})}(o,t);case"destroy":return r.destroy(),"manual"!==s.reason&&a("disconnected",s),void n.off();case"emit_events":return void e.payload.forEach(function(e){var t=e[0],n=e[1];a(t,n)});case"fail_all_requests":var u=s.reason,l={message:Wf[u],code:u};return void s.rejects.forEach(function(e){e(hf(l))});case"login_success":var d=s.dynamicConfig,p=Object(D.a)(s,["dynamicConfig"]);return Object.defineProperty(p,"__unsafeDynamicConfig",{value:d}),void a("connected",p);case"pause_connection":return void r.disconnect();case"prefetch_token":return s.fresh?void t.getFreshToken().catch(m.P):void t.hasToken().then(function(e){return e?t.getToken().then(function(e){if(!(e.creationDate+e.expiresIn-Date.now()>36e5))return t.invalidate().then(t.getFreshToken)}):t.getToken()}).catch(m.P);case"push_received":return"customer_disconnected"===e.payload.action?void Qf({emit:a,store:o},e):(Yf(o,e),void Qf({emit:a,store:o},e));case"reconnect":return void r.reconnect(e.payload.delay);case"request_failed":return void s.reject(hf(s.error));case"response_received":return Yf(o,e),void function(e,t){var n=e.emit,r=t.payload,a=r.action,i=r.resolve,o=r.response;switch(a){case"get_chat_threads":return Jf(n,o.users),void i(o.threads);case"get_chats_summary":var c=o.chatsSummary,s=o.totalChats,u=o.users;return Jf(n,u),void i({chatsSummary:c,totalChats:s});case"send_event":return void i(o.event);case"activate_chat":case"start_chat":return Jf(n,o.users),void i(o.data);default:i(o)}}({emit:a,store:o},e);case"send_request":var f=o.getState();return function(e){return"destroyed"===ef(e)}(f)?void Gf(o,e,{code:"SDK_DESTROYED",message:"SDK destroyed."}):of(f)||"login"===e.meta.source?void function(e,t){var n=t.payload,r=n.id,a=n.action,i=n.data,o={};o.request_id=r,o.action=a,null!==i&&(o.payload=i),e.emit(o)}(r,e):void Gf(o,e,{code:"NO_CONNECTION",message:"No connection."});case"set_customer_fields":if(!of(o.getState()))return;return void Ef(o,_f(Kp,s)).catch(m.P);case"set_self_id":return void a("customer_id",s);case"socket_disconnected":return void("connected"===s.previousStatus&&a("connection_lost"));case"socket_connected":return void i(o);case"socket_recovered":if(!of(o.getState()))return;return void a("connection_recovered");case"socket_unstable":if(!of(o.getState()))return;return void a("connection_unstable");case"start_connection":return r.connect(),void o.dispatch(Of());case"update_customer":if(!of(o.getState()))return;return void Ef(o,_f(Zp,s)).catch(m.P);case"update_customer_page":if(!of(o.getState()))return;return void Ef(o,_f(Xp,s)).catch(m.P);default:return}}},Zf=function(e){var t=Object(m.gb)(function(e,t){var n=t+e.totalEvents;return[n>=25,n]},0,e);return[t[0],t[1].map(function(e){return e.id})]},Xf=function(e,t){var n=Zf(t.filter(function(t){return t.order<e.lastOrderFetched}));e.threadsSummary=n[0],e.threadsToFetch=n[1]},$f=function(e,t){var n={done:!1,idle:!0,lastOrderFetched:1/0,leftToFetch:1/0,queuedTasks:[],totalThreads:1/0,threadsSummary:null,threadsToFetch:[]},r=function(a,i){var o;n.done?a({done:!0}):n.idle?(n.idle=!1,n.threadsSummary?n.threadsToFetch.length>0?o=e.getChatThreads(t,n.threadsToFetch):n.threadsSummary.length>0?(Xf(n,n.threadsSummary),o=e.getChatThreads(t,n.threadsToFetch)):o=function(e,t,n){return e.getChatThreadsSummary(t,{offset:0}).then(function(r){var a=r.totalThreads-n.leftToFetch;return e.getChatThreadsSummary(t,{offset:a})})}(e,t,n).then(function(r){var a=r.threadsSummary;return Xf(n,a),e.getChatThreads(t,n.threadsToFetch)}):o=function(e,t){return e.getChatThreadsSummary(t,{offset:0}).then(function(n){var r=n.threadsSummary,a=n.totalThreads,i=Zf(r),o=i[0],c=i[1];return Promise.all([{threadsSummary:o,totalThreads:a},c.length>0?e.getChatThreads(t,c):[]])})}(e,t).then(function(e){var t=e[0],r=t.threadsSummary,a=t.totalThreads,i=e[1];return n.threadsSummary=r,n.totalThreads=n.leftToFetch=a,i}),o.then(function(e){a(function(e,t){return e.idle=!0,e.threadsToFetch=[],e.leftToFetch-=t.length,e.lastOrderFetched=0!==t.length?t[0].order:0,0===e.leftToFetch?(e.done=!0,{value:t,done:!0}):{value:t,done:!1}}(n,e));var t=n.queuedTasks.shift();t&&r(t.resolve,t.reject)},function(e){return i(function(e,t){return e.idle=!0,e.queuedTasks.forEach(function(e){return(0,e.reject)(t)}),t}(n,e))})):n.queuedTasks.push({resolve:a,reject:i})};return{next:function(){return new Promise(r)}}},em=n(206),tm=n.n(em),nm=function(e){var t=e.min,n=void 0===t?1e3:t,r=e.max,a=void 0===r?5e3:r,i=e.jitter,o=void 0===i?.5:i,c=0;return{duration:function(){var e=n*Math.pow(2,c++);if(o){var t=Math.random(),r=Math.floor(t*o*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,a)},reset:function(){c=0}}},rm=function(e,t){var n,r=void 0===t?{}:t,a=r.query,i=r.transports,o=void 0===i?["websocket","xhr-polling"]:i,c=e+(a?"?"+Object(g.a)(a):""),s=Object(w.a)(),u=nm({min:1e3,max:5e3,jitter:.5}),l=3,d=null,p=function(){l=1,u.reset(),s.emit("connect")},f=function(){l=3,d=null,s.emit("disconnect"),y()},m=function(e){var t=e.data;s.emit("message",t)},h=function(){s.emit("heartbeat")},v=function(){var e;l=3,d&&((e=d).removeEventListener("open",p),e.removeEventListener("close",f),e.removeEventListener("message",m),e.removeEventListener("heartbeat",h),d.close(),d=null)},b=function(){var e;l=0,d=new tm.a(c,void 0,{transports:o}),(e=d).addEventListener("open",p),e.addEventListener("close",f),e.addEventListener("message",m),e.addEventListener("heartbeat",h)},y=function(e){void 0===e&&(e=u.duration()),clearTimeout(n),0!==e?n=setTimeout(b,e):b()},j={connect:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){if(3!==l)throw new Error("Socket is already open or connecting.");clearTimeout(n),b()}),destroy:function(){j.off(),j.disconnect()},disconnect:function(){l=3,clearTimeout(n),v()},reconnect:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){v(),y(e)}),emit:function(e){if(1!==l)throw new Error("Socket is not connected.");d.send(e)},getReadyState:function(){return l},on:s.on,off:s.off};return j},am=function(){var e,t=m.P;return{cancel:function(){clearTimeout(e),t=m.P},check:function(){var n=C();return t=n.resolve,e=setTimeout(function(){var e=new Error("Timeout.");e.code="TIMEOUT",n.reject(e)},2e3),n.promise},resolve:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){clearTimeout(e),t()})}},im=function(e,t){var n,r,a,i=void 0===t?{}:t,o=i.query,c=void 0===o?{}:o,s=i.rescheduleTimeout,u=void 0===s?3e4:s,l=i.transports,d=i.emitter,p=void 0===d?Object(w.a)():d,f=rm(e,{query:Object(x.a)({bh:Object(m.s)()},c),transports:l}),h=am(),v=function(){return 1===f.getReadyState()},b=function(e){f.emit(JSON.stringify(e)),y()},g=function(){b({action:"ping"})},y=function(){clearTimeout(n),n=setTimeout(g,u)},j=function(){h.cancel(),clearTimeout(n)};return r=f,a=p,["connect","disconnect"].forEach(function(e){r.on(e,function(t){a.emit(e,t)})}),f.on("connect",y),f.on("disconnect",j),f.on("heartbeat",g),f.on("message",function(e){h.resolve();var t=JSON.parse(e);"ping"!==t.action&&p.emit("message",t)}),"undefined"!==typeof window&&(window.addEventListener("online",function(){v()&&(h.check().then(function(){h.cancel(),p.emit("connection_recovered")},function(e){if(h.cancel(),"TIMEOUT"!==e.code)throw e;f.reconnect()}),g())}),window.addEventListener("offline",function(){h.cancel(),v()&&p.emit("connection_unstable")})),Object(x.a)({},f,{destroy:function(){j(),f.destroy()},disconnect:function(){j(),f.disconnect()},reconnect:function(e){j(),f.reconnect(e)},emit:b,on:p.on,off:p.off})},om=function(e,t){var n=e.getState(),r=cf(n)+"/rtm/sjs";return im(r,{query:{license_id:n.license},emitter:t})},cm=function(e){var t=Object(w.a)(),n=om(e,t);return Object(x.a)({},Object.keys(n).reduce(function(e,t){return e[t]=function(){var e;return(e=n)[t].apply(e,arguments)},e},{}),{reinitialize:function(){n.disconnect(),(n=om(e,t)).connect()}})},sm=Object.freeze({success:!0}),um=function(e){return void 0===e&&(e={}),e.group_ids?{groups:e.group_ids}:{}},lm=function(e){return"number"===typeof e?1e3*e:null},dm=function(e){return Object(m.J)(function(e){return lm(e.last_seen_timestamp)},Object(m.F)("id",e))},pm=function(e){return Object(m.J)(function(e){return Object(m.J)(function(e){return e.value},e)},e)},fm=function(e,t){var n={id:t.id,author:t.author_id,timestamp:lm(t.timestamp),thread:e,properties:void 0!==t.properties?pm(t.properties):{}};return void 0!==t.custom_id&&(n.customId=t.custom_id),n},mm=function(e,t){var n,r=t.height>t.width?["height","width"]:["width","height"],a=r[0],i=r[1],o=t[a],c=t[i],s=e/o;return(n={})[a]=Math.min(o,e),n[i]=Math.min(s*c,c),n},hm=function(e,t){return void 0!==t.width&&void 0!==t.height?function(e,t){var n=Object(x.a)({},fm(e,t),{type:"file",contentType:t.content_type,url:t.url,name:t.name,width:t.width,height:t.height});return t.thumbnail_url&&(n.thumbnails={default:Object(x.a)({url:t.thumbnail_url},Object(m.J)(Math.ceil,mm(300,t))),high:Object(x.a)({url:t.thumbnail2x_url},Object(m.J)(Math.ceil,mm(600,t)))}),n}(e,t):Object(x.a)({},fm(e,t),{type:"file",contentType:t.content_type,url:t.url,name:t.name})},vm=function(e){var t=Object(m.Z)(["title","subtitle"],e);return e.image&&(t.image={url:e.image.url}),e.buttons&&(t.buttons=e.buttons.map(function(e){var t=e.text,n=e.postback_id,r=e.user_ids,a=e.type,i=e.value,o={text:t,postback:n,users:r};return a&&(o.type=a,o.value=i,"webview"===a&&e.webview_height&&(o.webviewHeight=e.webview_height)),o})),t},bm=function(e,t){switch(t.type){case"file":return hm(e,t);case"filled_form":return function(e,t){return Object(x.a)({},fm(e,t),{type:"filled_form",formId:t.form_id,fields:t.fields})}(e,t);case"message":return function(e,t){return Object(x.a)({},fm(e,t),{type:"message",text:t.text})}(e,t);case"rich_message":return function(e,t){return Object(x.a)({},fm(e,t),{type:"rich_message",template:t.template_id,elements:t.elements.map(vm)})}(e,t);case"system_message":return function(e,t){var n=Object(x.a)({},fm(e,Object(x.a)({},t,{author_id:"system"})),{type:"system_message",text:t.text,systemMessageType:t.system_message_type});return t.text_vars&&(n.textVars=t.text_vars),n}(e,t);default:return function(e,t){return Object(x.a)({},fm(e,t),Object(m.R)(["id","author_id","timestamp","custom_id","order"],t))}(e,t)}},gm=function(e){return{id:e.id,type:"agent",name:e.name,avatar:e.avatar,jobTitle:e.job_title}},ym=function(e){var t={id:e.id,type:e.type,fields:e.fields||{}};return e.name&&(t.name=e.name),e.email&&(t.email=e.email),t},jm=function(e){return"customer"===e.type?ym(e):gm(e)},Om=function(e){var t=e.id,n=e.access,r=e.thread,a=e.users,i=e.properties,o=void 0===i?{}:i;return{data:{chat:t,access:um(n),users:r.user_ids,thread:r.id,events:r.events.map(function(e){return bm(r.id,e)}),chatProperties:pm(o),threadProperties:pm(r.properties||{})},users:a.map(jm)}},xm=function(e){return{url:e.url,title:e.title,timestamp:lm(e.timestamp)}},_m=function(e){return ym(e.customer)},wm=function(e){var t=e.chat,n=t.threads,r=t.users,a=t.id;return{threads:Object(m.Q)("order",n).map(function(e){return function(e,t,n){return{id:n.id,chat:e,active:n.active,access:um(n.access),order:n.order,users:n.user_ids,lastSeenTimestamps:dm(t),events:Object(m.Q)("order",n.events).map(function(e){return bm(n.id,e)}),properties:pm(n.properties||{})}}(a,r,e)}),users:r.map(jm)}},Cm=function(e){return Om(e.chat)},Em=function(e){switch(e.action){case"chat_properties_deleted":return{chat:(t=e.payload).chat_id,properties:t.properties};case"chat_properties_updated":return function(e){return{chat:e.chat_id,properties:pm(e.properties)}}(e.payload);case"chat_thread_properties_deleted":return function(e){return{chat:e.chat_id,thread:e.thread_id,properties:e.properties}}(e.payload);case"chat_thread_properties_updated":return function(e){return{chat:e.chat_id,thread:e.thread_id,properties:pm(e.properties)}}(e.payload);case"chat_user_added":return function(e){var t=e.chat_id,n=e.user;return{chat:t,user:jm(n),joined:n.present}}(e.payload);case"chat_user_removed":return function(e){return{chat:e.chat_id,user:e.user_id}}(e.payload);case"customer_page_updated":return xm(e.payload);case"customer_updated":return _m(e.payload);case"event_properties_deleted":return function(e){return{chat:e.chat_id,thread:e.thread_id,event:e.event_id,properties:e.properties}}(e.payload);case"event_updated":return function(e){var t=e.thread_id;return{chat:e.chat_id,thread:t,event:bm(t,e.event)}}(e.payload);case"incoming_chat_thread":return function(e){return Om(e.chat)}(e.payload);case"incoming_event":return function(e){return{chat:e.chat_id,event:bm(e.thread_id,e.event)}}(e.payload);case"incoming_typing_indicator":return function(e){var t=e.chat_id,n=e.typing_indicator;return{chat:t,user:n.author_id,isTyping:n.is_typing}}(e.payload);case"last_seen_timestamp_updated":return function(e){return{chat:e.chat_id,user:e.user_id,timestamp:lm(e.timestamp)}}(e.payload);case"thread_closed":return{chat:e.payload.chat_id};default:return e.payload}var t},Im=function(e,t){switch(e){case"activate_chat":return Cm(t);case"close_thread":case"delete_chat_properties":case"delete_chat_thread_properties":case"delete_event_properties":return sm;case"get_chat_threads":return wm(t);case"get_chat_threads_summary":return function(e){var t=e.threads_summary,n=e.total_threads;return{threadsSummary:Object(m.Q)("order",t.map(function(e){var t=e.total_events;return{id:e.id,active:e.active,order:e.order,totalEvents:t}})),totalThreads:n}}(t);case"get_chats_summary":return function(e){var t=e.chats_summary.map(function(e){var t=e.id,n=e.active,r=e.access,a=e.order,i=e.last_thread_id,o=e.last_event_per_type,c=e.properties,s=void 0===c?{}:c,u=e.users,l={};if(l.id=t,l.active=n,l.access=um(r),l.order=lm(a),l.properties=pm(s),l.users=u.map(function(e){return e.id}),l.lastThread=i,l.lastSeenTimestamps=dm(u),!o)return l;l.lastEventsPerType=Object(m.J)(function(e){var t=e.thread_id,n=e.event;return bm(t,n)},o);var d=Object.keys(o).map(function(e){return o[e]}),p=Object(m.G)(d.sort(function(e,t){return e.thread_id===t.thread_id?e.event.order-t.event.order:e.thread_order-t.thread_order}));return p&&(l.lastEvent=Object(m.c)(l.lastEventsPerType[p.event.type]),l.lastThreadOrder=p.thread_order),l});return{chatsSummary:Object(m.Q)(function(e){var t=e.lastEvent,n=e.order;return-1*(void 0!==t?t.timestamp:n)},t),totalChats:e.total_chats,users:Object(m.e)(function(e){return e.map(jm)},function(e){return Object(m.ob)(function(e){return e.id},e)},function(e){return Object(m.p)(function(e){return e.users},e)})(e.chats_summary)}}(t);case"get_form":return function(e){return e.enabled?Object(x.a)({},e,{form:Object(x.a)({},e.form,{fields:e.form.fields.map(function(e){if("group_chooser"===e.type)return Object(x.a)({},e,{options:e.options.map(function(e){var t=e.group_id,n=Object(D.a)(e,["group_id"]);return Object(x.a)({},n,{group:t})})});if("rating"===e.type){var t=e.comment_label,n=Object(D.a)(e,["comment_label"]);return Object(x.a)({},n,{commentLabel:t})}return e})})}):e}(t);case"get_groups_status":return function(e){return e.groups_status}(t);case"get_predicted_agent":return function(e){var t=gm(e);return Object(x.a)({},t,{isBot:e.is_bot||!1})}(t);case"get_url_details":return function(e){return{title:e.title,description:e.description,url:e.url,image:{url:"https://"+e.image_url,width:e.image_width,height:e.image_height}}}(t);case Qp:return function(e){return{dynamicConfig:e.__priv_dynamic_config}}(t);case"send_event":return function(e){return{event:bm(e.thread_id,e.event)}}(t);case"send_sneak_peek":return sm;case Kp:return _m(t);case"start_chat":return Cm(t);case"update_chat_properties":case"update_chat_thread_properties":return sm;case Zp:return _m(t);case Xp:return xm(t);case"update_last_seen_timestamp":return{timestamp:lm(t.timestamp)};default:return t}},Sm=function(e,t){switch(t.type){case"authentication":case"group_unavailable":case"groups_offline":case"group_offline":case"group_not_found":case"request_timeout":case"users_limit_reached":case"validation":case"wrong_product_version":return{code:t.type.toUpperCase(),message:t.message};default:return Object(x.a)({code:"REQUEST_FAILED"},t)}},km=function(e,t){var n=e.dispatch,r=e.getState,a=t.request_id,i=t.payload,o=tf(r(),a),c=o.promise,s=o.resolve,u=o.action;n({type:"response_received",payload:{id:a,action:u,data:o.data,promise:c,resolve:s,response:Im(u,i)}})},Tm=((Uf={}).get_chat_threads_summary=!0,Uf.get_chat_threads=!0,Uf.get_chats_summary=!0,Uf.get_form=!0,Uf.get_groups_status=!0,Uf.get_predicted_agent=!0,Uf.get_url_details=!0,Uf[Qp]=!0,Uf.send_rich_message_postback=!0,Uf.send_sneak_peek=!0,Uf),Am=((Ff={}).close_thread="thread_closed",Ff),Pm=function(e,t){var n=e.dispatch,r=e.getState;return t.on("connect",function(){n({type:"socket_connected"})}),t.on("message",function(t){if("response"===t.type)return t.success?void(Tm[t.action]&&km(e,t)):void function(e,t){var n=e.dispatch,r=e.getState,a=t.request_id,i=t.payload,o=tf(r(),a),c=o.reject;o.action,n({type:"request_failed",payload:{id:a,reject:c,error:Sm(0,i.error)}})}(e,t);if("string"===typeof t.request_id){var n=tf(r(),t.request_id);if(n){var a=Am[n.action];if(!a||a===t.action)return void function(e,t){void 0!==tf(e.getState(),t.request_id)&&km(e,t)}(e,t)}}!function(e,t){e.dispatch({type:"push_received",payload:{action:t.action,push:Em(t)}})}(e,t)}),t.on("disconnect",function(){Vf(e,pf),Hf(e)}),t.on("connection_unstable",function(){n({type:"socket_unstable"})}),t.on("connection_recovered",function(){n({type:"socket_recovered"})}),t.off},Mm=function(e){var t,n=e.auth,r=e.chat,a=e.data,i=e.spec,o=e.store,c=!1,s=new Promise(function(e,s){!function(e){if(e.size>10485760){var t=new Error("The file is too big (max size is "+function(e,t){if(void 0===t&&(t=2),e<1024)return e+" b";var n=e/1024;if(e<1048576)return n.toFixed(t)+" kb";var r=n/1024;return e<1073741824?r.toFixed(t)+" MB":(r/1024).toFixed(t)+" GB"}(10485760)+").");throw t.code="TOO_BIG_FILE",t}}(a.file);var u=o.getState(),l=Object(g.a)({license_id:u.license}),d=cf(u)+"/action/send_file?"+l,p=function(e,t){var n={};return n["payload.chat_id"]=e,n["payload.file"]=t.file,t.customId&&(n["payload.custom_id"]=t.customId),n}(r,a);n.getToken().then(function(n){c?s(new Error("Upload cancelled.")):(t=ko(d,p,Object(x.a)({},i,{headers:{Authorization:n.tokenType+" "+n.accessToken}}))).then(function(t){return e(t.payload)},s)})});return{then:function(e,t){return s.then(e,t)},catch:function(e){return s.catch(e)},cancel:function(){c||(c=!0,t&&t.cancel())}}},Nm=function(e,t){var n;void 0===t&&(t="production"),Wp(e);var r=e.autoConnect,a=void 0===r||r,i=Object(D.a)(e,["autoConnect"]),o=function(e){var t=m.y,n=R(),r=Object(_.e)(df,sf(e),t(Object(_.a)(n)));return r.addSideEffectsHandler=n.add,r}(Object(x.a)({},i,{env:t})),c=Object(w.a)(),s=cm(o),u=Yp(i,t);o.addSideEffectsHandler(Kf({emitter:c,socket:s,auth:u})),Pm(o,s);var l=Ef.bind(null,o),d=function(){o.dispatch({type:"start_connection"})},p=Object.freeze(((n={activateChat:function(e,t){return void 0===t&&(t={}),l(_f("activate_chat",function(e,t){return Object(m.N)(bf(t),{chat:{id:e}})}(e,t)))},auth:u,cancelRate:function(e,t){return void 0===t&&(t=["score"]),p.getChatThreadsSummary(e).then(function(n){var r=n.threadsSummary;return p.deleteChatThreadProperties(e,Object(m.G)(r).id,{rating:t})})},closeThread:function(e){return l(_f("close_thread",{chat_id:e}))},connect:d,deleteChatProperties:function(e,t){return l(_f("delete_chat_properties",{chat_id:e,properties:t}))},deleteChatThreadProperties:function(e,t,n){return l(_f("delete_chat_thread_properties",{chat_id:e,thread_id:t,properties:n}))},deleteEventProperties:function(e,t,n,r){return l(_f("delete_chat_thread_properties",{chat_id:e,thread_id:t,event_id:n,properties:r}))},destroy:function(){o.dispatch(yf("manual"))},disconnect:function(){o.dispatch({type:"pause_connection"})},getChatHistory:function(e){return $f(p,e)},getChatsSummary:function(e){void 0===e&&(e={});var t=e,n=t.offset,r=void 0===n?0:n,a=t.limit,i=void 0===a?10:a;return i>25?Promise.reject(new Error("Specified limit is too high (max 25).")):l(_f("get_chats_summary",{offset:r,limit:i}))},getChatThreads:function(e,t){return l(_f("get_chat_threads",{chat_id:e,thread_ids:t}))},getChatThreadsSummary:function(e,t){void 0===t&&(t={});var n=t,r=n.offset,a=void 0===r?0:r,i=n.limit,o=void 0===i?25:i;return o>1e3?Promise.reject(new Error("Specified limit is too high (max 1000).")):l(_f("get_chat_threads_summary",{chat_id:e,offset:a,limit:o}))},getForm:function(e,t){return l(_f("get_form",{group_id:e,type:t}))},getGroupsStatus:function(e){return l(_f("get_groups_status",e?{groups:e,group_ids:e}:{all:!0}))},getPredictedAgent:function(){return l(_f("get_predicted_agent"))},getUrlDetails:function(e){return l(_f("get_url_details",{url:e}))},on:c.on,once:c.once,off:c.off,rateChat:function(e,t){return p.getChatThreadsSummary(e).then(function(n){var r=n.threadsSummary;return p.updateChatThreadProperties(e,Object(m.G)(r).id,{rating:t})})},sendEvent:function(e,t,n){return l(function(e,t,n){var r={chat_id:e,event:vf(t)};return n&&n.attachToLastThread?r.attach_to_last_thread=!0:r.require_active_thread=!0,_f("send_event",r)}(e,t,n))},sendFile:function(e,t,n){return Mm({auth:u,chat:e,data:t,spec:n,store:o})},sendPostback:function(e,t,n,r){var a=r.id,i=r.toggled;return l(_f("send_rich_message_postback",{chat_id:e,event_id:n,thread_id:t,postback:{id:a,toggled:void 0===i||i}}))},setCustomerFields:function(e){o.dispatch({type:"set_customer_fields",payload:{fields:e}})},setSneakPeek:function(e,t){var n=o.getState();af(n,e)&&of(n)&&l(_f("send_sneak_peek",{chat_id:e,sneak_peek_text:t})).catch(m.P)},startChat:function(e){return void 0===e&&(e={}),l(_f("start_chat",bf(e)))},updateChatProperties:function(e,t){return l(_f("update_chat_properties",{chat_id:e,properties:t}))},updateChatThreadProperties:function(e,t,n){return l(_f("update_chat_thread_properties",{chat_id:e,thread_id:t,properties:n}))},updateCustomer:function(e){o.dispatch({type:"update_customer",payload:e})},updateCustomerPage:function(e){o.dispatch({type:"update_customer_page",payload:Object(m.Z)(["title","url"],e)})},updateEventProperties:function(e,t,n,r){return l(_f("update_event_properties",{chat_id:e,event_id:n,thread_id:t,properties:r}))},updateLastSeenTimestamp:function(e,t){return l(_f("update_last_seen_timestamp",function(e){var t={};return t.chat_id=e.chat,"number"===typeof e.timestamp&&(t.timestamp=Math.floor(e.timestamp/1e3)),t}({chat:e,timestamp:t})))}})[Jp.default]=Object(m.U)(function(){return Object.freeze({subscribe:function(e){if(!Object(m.D)(e))throw new TypeError("Expected the observer to be an object.");var t=function(t,n){"function"===typeof e.next&&e.next([t,n])};return c.on("*",t),function(){c.off("*",t)}}})}),n));return a?d():o.dispatch({type:"check_goals"}),p},zm=function(e){var t=Object(g.h)(e);return"https://"+(Object(m.z)("cdn.livechatinc.com/cloud/?uri",t)||Object(m.z)(".livechat-static.com/api/file/",t)?t:"cdn.livechatinc.com/cloud/?"+Object(g.a)({uri:"https://"+t}))};function Rm(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var Dm={group_chooser:"select",header:"information",name:"text",question:"text",subject:"text",checkbox_for_email:"checkbox"},Lm=function(e,t){return e.getSessionUser().serverId===t.author},Bm=function(e,t){return Lm(e,t)?e.getSessionUser().id:t.author},qm=function(e,t){if("file"===t.type)return t.id;if(Lm(e,t))return"customId"in t&&e.hasEvent("liveChatChatId",t.customId)?t.customId:t.id;var n=e.getEventByServerId("liveChatChatId",t.id);return n?n.id:t.id},Um=function(e){return e.groups?e.groups[0]:null},Fm=function(e){return"offline"===e?"offline":"online"},Vm=function(e,t){var n=e.getSessionUser().serverId;return Object(m.G)(t.filter(function(e){return e!==n}))},Gm=function(e,t){var n=t.chat,r=t.access,a=t.thread,i=t.events,o=t.users,c=t.threadProperties;return{id:n,agent:Vm(e,o),events:i.map(function(t){return Jm(e,Object(h.a)({},t,{seen:!1}))}).filter(Boolean),group:Um(r),thread:a,properties:Zm(c)}},Hm=function(e,t){return Object(h.a)({},t,{type:e,fields:t.fields.reduce(function(e,t){var n=t.id,r=Object(v.a)(t,["id"]),a=Object(h.a)({},r,{type:Dm[r.type]||r.type,serverName:n,serverType:r.type});if("information"===a.type)a.value=a.label.replace(/<br(\s)?(\/)?>/gi,"\n");else if("checkbox_for_email"===r.type)a.meta="confirm_subscription",a.label="",a.options=[{label:r.label,checked:r.checked,value:"index0_0",originalValue:"0"}],r.checked&&(a.defaultValue=[a.options[0].value]);else if(r.options){var i="group_select"===r.type;i&&(a.meta="groupSelect"),a.options=a.options.map(function(e,t){var n=i?e.group:e.id,r=Object(h.a)({},Object(m.R)(["id","checked","group"],e),{value:"index"+t+"_"+n,originalValue:n});return i&&(r.groupNumber=e.group),r})}return a.name=Object(m.z)(r.type,["name","email","rating"])?r.type:"name_"+n,"rating"===r.type?[].concat(e,[a,{name:"rateComment",type:"textarea",label:a.commentLabel,required:!1,dependOn:"rating"}]):[].concat(e,[a])},[])})},Wm=function(e,t){return Io(Hm("offline",function(e){return Object(h.a)({},e,{fields:e.fields.map(function(e,t){return Object(h.a)({},e,{id:String(t)})})})}(t)))},Ym=function(e){var t=e.properties,n=Object(v.a)(e,["properties"]);if("lc2"in t){var r=t.lc2;if("greeting_unique_id"in r)return function(e,t){return bp(Object(h.a)({},e,{greetingId:t.greeting_id,greetingUniqueId:t.greeting_unique_id}))}(n,r);if(r.welcome_message)return function(e){return bp(Object(h.a)({},e,{welcomeMessage:!0}))}(n)}return function(e,t){return bp(t.url_details?Object(h.a)({},e,{urlDetails:t.url_details}):e)}(n,t)},Jm=function(e,t){var n=Object(h.a)({},t,{id:qm(e,t),serverId:t.id,author:Bm(e,t)});switch(n.type){case"filled_form":return Qm(n);case"message":return Ym(n);case"rich_message":return xp(n);case"file":return wp(n);case"system_message":return Km(n);default:return null}},Qm=function(e){var t=e.customId,n=e.formId,r=e.fields,a=e.properties,i=Object(v.a)(e,["customId","formId","fields","properties"]);return vp("form",Object(h.a)({},i,{answered:!0,customId:t,formId:n,formType:a.lc2.form_type,fields:r.filter(function(e){return"answer"in e||"answers"in e&&0!==e.answers.length}).map(function(e){if("string"===typeof e.answer)return e;if("answers"in e){var t=e.answers,n=Object(v.a)(e,["answers"]);return Object(h.a)({},n,{answer:t.map(function(e){return e.label})})}return Object(h.a)({},e,{answer:e.answer.label})})}))},Km=function(e){switch(e.systemMessageType){case"archived_customer_disconnected":case"routing.archived_inactive":return _p(Object(h.a)({},e,{systemMessageType:"client_inactive"}));case"manual_archived_agent":return _p(Object(h.a)({},e,{systemMessageType:"operator_closed_session",textVariables:{operator:e.textVars.agent}}));case"manual_archived_customer":case"system_archived":case"customer_banned":case"routing.archived_deleted":case"routing.archived_disconnected":case"routing.archived_offline":case"routing.archived_other":case"routing.archived_remotely_signed_out":case"routing.archived_signed_out":return _p(Object(h.a)({},e,{systemMessageType:"chat_session_closed"}));case"routing.assigned_other":return _p(Object(h.a)({},e,{systemMessageType:"user_transfer",textVariables:{operator:e.textVars.agent}}));case"routing.assigned_deleted":case"routing.assigned_disconnected":case"routing.assigned_inactive":case"routing.assigned_remotely_signed_out":case"routing.assigned_signed_out":return _p(Object(h.a)({},e,{systemMessageType:"user_transfer",textVariables:{operator:e.textVars.agent_added}}));case"chat_transferred":return _p(Object(h.a)({},e,{systemMessageType:"user_transfer",textVariables:{operator:e.textVars.targets}}));case"agent_joined":case"agent_added":return _p(Object(h.a)({},e,{systemMessageType:"operator_joined_conference",textVariables:{operator:e.textVars.agent}}));case"agent_left":case"agent_removed":return _p(Object(h.a)({},e,{systemMessageType:"operator_left_conference",textVariables:{operator:e.textVars.agent}}));case"rating.chat_rated":return _p(Object(h.a)({},e,{systemMessageType:"rate_me_confirmation_"+e.textVars.score}));case"rating.chat_commented":return _p(Object(h.a)({},e,{systemMessageType:"rate_me_comment_added",textVariables:{comment:e.textVars.comment}}));case"rating.chat_rating_canceled":return _p(Object(h.a)({},e,{systemMessageType:"rate_me_cancel"}));default:return null}},Zm=function(e){var t={};if("rating"in e){var n=e.rating,r=n.score,a=n.comment;"number"===typeof r&&(t.rate=1===r?"good":"bad"),"string"===typeof a&&(t.rateComment=a)}if("lc2"in e){var i=e.lc2,o=i.queue_pos,c=i.queue_waiting_time;o>0&&c>0?t.queue={position:o,waitingTime:c}:-1===o&&-1===c&&(t.queue=null)}return t},Xm=function(e,t){return e.sdk.getGroupsStatus(t).then(function(e){return t.reduce(function(t,n){var r=e[n];return t[n]=r?Fm(r):"not_found",t},{})})},$m=function(e,t){return Object(b.a)(t).then(function(e){return e.json()}).then(function(e){var t=e.localization;return Object(m.I)(function(e){return e.toLowerCase()},t)})},eh=function(e,t,n,r){var a=e.sdk;return void 0===r&&(r=Hm),a.getForm(t,n).then(function(e){return e.enabled?{enabled:!0,form:r(n,e.form)}:e})},th=function(e,t){return eh(e,t,"ticket",Wm)},nh=function(e,t,n){var r=e.sdk,a=e.store;return r.getChatThreads(t,[n]).then(function(e){return function(e,t){var n=t.id,r=t.active,a=t.events,i=t.users,o=t.lastSeenTimestamps,c=t.properties,s=e.getSessionUser().serverId,u=o[s],l=Object(v.a)(o,[s].map(Rm)),d=Math.max.apply(Math,Object(m.qb)(l).filter(Boolean));return{id:n,active:r,agent:r?Vm(e,i):null,events:a.map(function(t){var n=t.author===s?d>=t.timestamp:u>=t.timestamp;return Jm(e,Object(h.a)({},t,{seen:n}))}).filter(Boolean),properties:Zm(c)}}(a,e[0])})},rh="SET",ah=function(e){var t=e.localization_url;return"https://"+e.serv+t},ih=function(e,t){var n=t.numberInQueue,r=t.waitingTime;e.updateView("Chat/queue",{numberInQueue:n,waitingTime:r,template:_n(e)})},oh=function(e){var t=e.getChat("liveChatChatId").properties,n=t.rate,r=t.rateComment,a=t.queued,i=e.getView("Chat/queue");return{rate:n,rateComment:r,queue:a?{position:i.numberInQueue,waitingTime:i.waitingTime}:null}},ch=function(e,t,n){var r=e.license,a=e.group,i=e.region,o=e.uniqueGroups,c=!t.getApplicationState("clientLimitExceeded"),s=t.getApplicationState("page"),u=t.getSessionUser(),l={license:r,clientId:"c5e4f61e1a6c3b1521b541bc5c5a2ac5",customer:{name:u.name,email:u.email,fields:u.properties},region:i,page:Object(m.W)(["url","title"],s),referrer:s.referrer,autoConnect:c,uniqueGroups:o};null!==a&&(l.group=a);var d=Nm(l,"production");var p={sdk:d,store:t};n.pre_chat_survey&&t.updateView("Chat/prechat",hp("prechat",Eo(n.pre_chat_survey))),n.offline_form&&t.updateView("Chat/offline",hp("offline",Eo(n.offline_form)));var f=function(){(sn("liveChatChatId",t)||t.getApplicationState().destroyed)&&t.updateView("minimized",{hidden:!0})},b=function(){d.destroy(),t.setApplicationState({destroyed:!0}),f()},y=null,O=null,x=function(){return t.getChat("liveChatChatId").serverId},_=function(e){y=e,null===x()&&(Qt(t)&&(O=d.getChatHistory(e)),t.setChatServerId("liveChatChatId",e))},w=function(e){var n=e.id,r=e.group,a=e.thread,i=e.agent,o=e.events,c=e.properties,s=!!c.queue;if(_(n),o.forEach(L),xr(t,{id:n,thread:a,group:r,queued:s,agent:i}),s){var u=c.queue,l=u.position,d=u.waitingTime;ih(t,{numberInQueue:l,waitingTime:d})}},C=function(e){var n=Um(e);t.getChat("liveChatChatId").properties.group!==n&&t.updateChat("liveChatChatId",{properties:{group:n}})},E=function(){return t.getChat("liveChatChatId").properties.lastThread},I=function(e){return"good"===e?1:"bad"===e?0:null},S=function(e){return d.rateChat(x(),Object(m.d)({comment:e.rateComment,score:I(e.rating)})).then(function(){t.updateChat("liveChatChatId",{properties:Object(m.d)({rate:e.rating,rateComment:e.rateComment})})},m.P)},k=function(e){return d.cancelRate(x(),e).then(function(){t.updateChat("liveChatChatId",{properties:e.reduce(function(e,t){return"comment"===t?e.rateComment=null:"score"===t&&(e.rate=null),e},{})})},m.P)},T=function(){return th(p,t.getApplicationState("group")).then(function(e){e.enabled?(t.updateView("Chat/offline",e.form),Nr(t),t.setCurrentView("Chat")):t.setCurrentView("Chat")})},A=function(){var e,n,r=vn("liveChatChatId",t),a=t.getEvents("liveChatChatId").some(function(e){return"system"!==e.author});if(br(t),r&&!a)return t.getApplicationState("embedded")&&Or(t),void Sr("liveChatChatId",t);(e=p,n=M(),eh(e,n,"postchat")).then(function(e){var n=e.enabled,r=e.form;n&&Ir(t,r)},m.P)},P=function(e){var n=function(e){var n=t.getChat("liveChatChatId").properties,r=n.rate,a=n.rateComment,i={comment:"NOTHING",score:"NOTHING"};e.rating!==r&&(i.score=null===e.rating?"CANCEL":rh);var o="string"===typeof e.rateComment&&""!==e.rateComment;return a&&!o||"CANCEL"===i.score&&a?i.comment="CANCEL":!o||a&&e.rateComment===a||(i.comment=rh),i}(e);if("NOTHING"!==n.score||"NOTHING"!==n.comment){var r=[];return n.score===rh&&n.comment===rh?r.push(S(e)):"CANCEL"===n.score&&"CANCEL"===n.comment?r.push(k(["comment","score"])):("CANCEL"===n.score?r.push(k(["score"])):n.score===rh&&r.push(S({rating:e.rating})),"CANCEL"===n.comment?r.push(k(["comment"])):n.comment===rh&&r.push(S({rateComment:e.rateComment}))),Promise.all(r.map(function(e){return e.catch(m.P)}))}},M=function(){var e=t.getChat("liveChatChatId").properties.group,n=t.getApplicationState("group");return"number"===typeof e?e:n},N=function(e){var n=e.id,r=e.name,a=e.email,i=void 0===a?null:a;if(t.getSessionUser().serverId===n){var o={email:i,properties:e.fields};return"Customer"!==r&&(o.name=r),void t.updateUser(t.getSessionUserId(),o)}t.getUser(n)?"agent"===e.type&&e.isBot&&t.updateUser(n,{properties:{isBot:!0}}):t.addUser({id:n,type:"agent",name:r,avatar:"https://"+Object(g.h)(e.avatar),properties:{jobTitle:e.jobTitle,isBot:e.isBot||!1}})},z=!1,R=function(){z=!0,Sr.apply(void 0,arguments);t.on("update_chat",function e(n){n.active&&(t.off("update_chat",e),z=!1)})},D=function(e){var n=oh(t),r={};if(n.rate!==e.rate&&(r.rate=e.rate),n.rateComment!==e.rateComment&&(r.rateComment=e.rateComment),!Object(m.eb)(n.queue,e.queue)){var a=e.queue;!t.getChat("liveChatChatId").properties.ended&&a?function(e,t){var n=t.thread,r=Object(v.a)(t,["thread"]),a={active:!0,properties:{queued:!0}};n&&(a.properties.lastThread=n),e.updateChat("liveChatChatId",a),ih(e,r)}(t,{numberInQueue:a.position,waitingTime:a.waitingTime}):r.queued=!1}t.updateChat("liveChatChatId",{properties:r})},L=function(e){mr(t,"liveChatChatId",e),"message"===e.properties.serverType&&t.getApplicationState("ready")&&Ep(t,e.id)},B=function(e){return{welcome_author_id:e.author,welcome_text:e.properties.originalText}},q=function(){var e,n=function(e,t){var n=t.getEvents(e);return Object(m.k)(function(e){return"invitation"===e.id},n)}("liveChatChatId",t);if(n)return{lc2:(e=n,Object(h.a)({},B(e),{greeting_id:e.properties.greetingId,greeting_unique_id:e.properties.greetingUniqueId}))};var r=t.getEvent("liveChatChatId","welcome_message");return r?{lc2:B(r)}:null},U=function(e){z=!0;var n=function(e){var t=e.id,n=e.unique_id,r=e.displayed_first_time,a=e.agent,i=e.text;return{author:{id:a.id,name:a.name,avatar:zm(a.avatar),type:"agent",jobTitle:a.job_title,isBot:a.is_bot},event:{authorId:a.id,text:i,receivedFirstTime:r,properties:{greetingId:t,greetingUniqueId:n}}}}(e),r=n.author,a=n.event;N(r),Mr(t,a),z=!1},F=function(e){on(t)&&(!yn(t)&&t.getApplicationState().ready?cn("liveChatChatId",t)&&U(e):t.updateChat("liveChatChatId",{properties:{postponedInvitation:e}}))},V=function(e){return!!e&&-1!==e.indexOf(t.getApplicationState("group"))},G=function(e){t.setApplicationState({availability:V(e)?"online":"offline"})},H=function(e){G(e.online_groups_ids)},W=function(e){return Y(e,!0)},Y=function(e,n){return void 0===n&&(n=!1),nh(p,x(),e).then(function(r){var a=r.events,i=r.agent,o=r.properties;n&&(t.updateChat("liveChatChatId",{active:!0,properties:{ended:!1,lastThread:e}}),Cr(t,i)),D(Object(h.a)({rate:null,queue:null},o)),a.filter(function(e){return!t.hasEvent("liveChatChatId",e.id)}).forEach(L),n&&t.setApplicationState({hidden:!1}),t.setDefaultView("Chat","timeline")})};d.on("chat_thread_properties_deleted",function(e){var n=e.thread,r=e.properties;n===E()&&"rating"in r&&Object(m.z)("score",r.rating)&&D(Object(h.a)({},oh(t),{rate:null}))}),d.on("chat_thread_properties_updated",function(e){var n=e.thread,r=e.properties;n===E()&&D(Object(h.a)({},oh(t),Zm(r)))}),d.on("chat_transferred",function(e){if("group"===e.type){var n=e.ids[0];t.updateChat("liveChatChatId",{properties:{group:n}})}}),d.on("customer_updated",function(e){t.updateUser(t.getSessionUserId(),Object(h.a)({},Object(m.Z)(["name","email"],e),{properties:e.fields}))}),d.on("event_updated",function(e){var n=e.chat,r=e.thread,a=e.event;if(n===x()&&r===E()&&Object(m.u)("properties.lc2.welcome_message",a)){var i=t.getEventByServerId("liveChatChatId",a.id);a.author!==i.author&&(t.setEventData("liveChatChatId",i.id,{author:a.author}),t.recalculateTimeline("liveChatChatId")),a.text!==i.properties.text&&t.updateEvent("liveChatChatId",i.id,{properties:{text:a.text}})}}),t.on("set_application_state",function(e){var n=e.pageFocused;ln(t)&&n&&(t.setConnectionState(Wt),d.connect())}),d.on("disconnected",function(e){var n=e.reason;switch(n){case"product_version_changed":case"wrong_product_version":return void t.emit("protocol_upgraded",{version:"2"});case"too_many_connections":return j(n),void b();case"customer_banned":case"license_not_found":case"unsupported_version":case"users_limit_reached":return void b();case"inactivity_timeout":return void(t.getApplicationState("pageFocused")||(t.setConnectionState(Ht),d.disconnect()));default:return}}),d.on("user_joined_chat",function(e){var n=e.chat,r=e.user;n===x()&&t.getSessionUser().serverId!==r&&Yt("liveChatChatId",t)!==r&&Cr(t,r)}),d.on("user_left_chat",function(e){var n=e.chat,r=e.user;n===x()&&(t.removeParticipant("liveChatChatId",r),t.getSessionUser().serverId!==r&&Yt("liveChatChatId",t)===r&&Cr(t,null))}),d.on("user_data",N);var J=function(){sn("liveChatChatId",t)&&Or(t),t.setApplicationState({ready:!0})},Q=new Promise(function(e){d.on("connected",function t(n){var r=n.__unsafeDynamicConfig;d.getChatsSummary().then(function(n){var a=n.chatsSummary;d.off("connected",t),e({__unsafeDynamicConfig:r,chatsSummary:a})},m.P)})});kr(xc(n),t);var K=function(e){var r=e.__unsafeDynamicConfig,a=e.chatsSummary;if(H(r),f(),0===a.length)return t.setApplicationState({hasChatMoreHistoryInitial:!1,loadedInitialHistory:!0}),Object(m.x)("greeting",r)&&F(r.greeting),null;var i=a[0],o=i.id,c=i.lastThreadOrder,s=!i.active||c>1;if(t.updateChat("liveChatChatId",{properties:{hasMoreHistory:s}}),t.setApplicationState({hasChatMoreHistoryInitial:s,loadedInitialHistory:!s}),_(o),!i.active)return Object(m.x)("greeting",r)&&F(r.greeting),null;C(i.access);var u=function(e,t){var n=e.monitoring,r=e.chats,a=t.id;if(a){var i=Object.keys(r).find(function(e){return Object(m.z)(a,r[e].chat_ids)});if(i!==n.id)return r[i].language_config_url?r[i].language_config_url:void 0}}(r.customer_groups,i);if(u){var l=ah({localization_url:u,serv:n.serv});return $m(0,l).then(function(e){return t.setLocalization(Object(m.W)(["user_in_queue"],e)),W(i.lastThread)})}return W(i.lastThread)};d.once("customer_id",function(e){return Br(t,e)});var Z=Np(t),X=function(e){return pa()(Z,ba(e))},$=pa()(X(function(){return za(t,function(e){return e.application.maximized})}),ea()(Boolean),Ca.a),ee=pa()(za(t,function(){return t.getSessionUser().serverId}),ea()(Boolean),Ta()(1),Ma.a);c?(t.setApplicationState({clientLimitExceededLifted:!0}),$m(0,ah(n)).then(t.setLocalization).then(function(){return Q}).then(K).then(function(){t.setConnectionState(Gt);var e=t.getChat("liveChatChatId"),n=e.active,r=e.properties.postponedInvitation;r&&(t.updateChat("liveChatChatId",{properties:{postponedInvitation:void 0}}),n||U(r)),J()})):Promise.all([$m(0,ah(n)),ee]).then(function(e){var r=e[0];t.setLocalization(r),t.setConnectionState("fakely_connected"),G(n.skills_online),f(),J();var a,i,o=(a=document,i=["click","touchstart"],oa.a.apply(void 0,i.map(function(e){return Object(aa.a)(a,e)})));pa()(oa()(o,$),Ta()(1),ra()(function(){t.setApplicationState({clientLimitExceededLifted:!0}),d.connect(),Q.then(K).then(function(){t.setConnectionState(Gt)})}))}),"ononline"in window&&(d.on("connection_unstable",function(){t.setConnectionState(Wt)}),d.on("connection_recovered",function(){t.setConnectionState(Gt)})),d.on("connection_lost",function(){t.setConnectionState(Wt)}),Q.then(function(){d.on("connected",function(e){var n=e.__unsafeDynamicConfig;d.getChatsSummary().then(function(e){var r=e.chatsSummary;if(0===r.length)return Object(m.x)("greeting",n)&&F(n.greeting),null;var a=x();if(null===a){var i=r[0],o=i.id;return _(o),i.active?(C(i.access),W(i.lastThread),null):(Object(m.x)("greeting",n)&&F(n.greeting),null)}var c=Object(m.k)(function(e){return e.id===a},r);if(!c)return b(),null;var s=t.getChat("liveChatChatId");return c.active?(c.lastThread!==s.properties.lastThread&&R("liveChatChatId",t),C(c.access),W(c.lastThread)):s.active?Y(s.properties.lastThread,!1).then(A):(Object(m.x)("greeting",n)&&F(n.greeting),null)}).then(function(){H(n),t.setConnectionState(Gt)},m.P)})}),d.on("incoming_multicast",function(e){var n=e.type,r=e.content;if("lc2"===n)if("groups_update"===r.name&&Object(m.x)("groups",r)){var a=t.getApplicationState("group"),i=Object(m.k)(function(e){return e.id===a},r.groups);if(!i)return;t.setApplicationState({availability:Fm(i.status)})}else Object(m.x)("greeting",r)&&F(r.greeting)}),d.on("last_seen_timestamp_updated",function(e){var n=e.chat,r=e.user,a=e.timestamp;n===x()&&(t.getSessionUser().serverId===r?Xt:Zt)("liveChatChatId",a,t).forEach(function(e){t.updateEvent("liveChatChatId",e.id,{seen:!0})})}),d.on("new_event",function(e){var n=e.chat,r=e.event;n===x()&&("postchat"===Object(m.u)("properties.lc2.form_type",r)&&(!function(e){if(In(e,"postchat")){var t=e.getLastEvent("liveChatChatId").id;Pr(e,t)}}(t),t.setDefaultView("Chat","timeline")),bn("liveChatChatId",t)&&j("received_event_during_chat_starting"),function(e){var n=Jm(t,e);n&&L(n)}(r))}),d.on("thread_closed",function(e){e.chat===x()&&A()}),d.on("incoming_chat_thread",function(e){R("liveChatChatId",t);var n=Gm(t,e);w(n)});var te=function(e){var n=e.user;if(e.chat!==x())return!1;var r=Yt("liveChatChatId",t);return!!r&&r.id===n},ne=pa()(ca(d,"user_is_typing"),ea()(te),va()(function(){return!0})),re=pa()(ca(d,"user_stopped_typing"),ea()(te),va()(function(){return!1})),ae=pa()(ca(d,"new_event"),ea()(function(e){var n=e.chat,r=e.event.author;return n===x()&&t.getSessionUser().serverId!==r&&"system"!==r}));pa()(oa()(pa()(ne,ea()(function(){return!t.getChat("liveChatChatId").properties.messageDraft})),re,pa()(ae,va()(function(){return!1}))),ba(function(e){return e?Object(Hr.a)(Object(_a.a)(!0),pa()(Object(Pa.a)(1e4),va()(function(){return!1}))):Object(_a.a)(!1)}),Object(Kr.a)(),ra()(function(e){t.updateChat("liveChatChatId",{properties:{agentIsTyping:e}})}));pa()(za(t,function(){return t.getChat("liveChatChatId").properties.loadingHistory}),ea()(Boolean),ra()(function e(){O.next().then(function(n){var r=n.value,a=n.done,i=Object(m.p)(function(e){return e.events},r).filter(function(e){return n=e,!(t.hasEvent("liveChatChatId",n.id)||void 0!==n.customId&&t.hasEvent("liveChatChatId",n.customId)||t.hasEventByServerId("liveChatChatId",n.id));var n}).map(function(e){return Jm(t,Object(h.a)({},e,{seen:!0}))}).filter(Boolean);if(i.length){var o=t.getTimeline("liveChatChatId").length;t.addHistoryEvents("liveChatChatId",i),o!==t.getTimeline("liveChatChatId").length?t.updateChat("liveChatChatId",{properties:{loadingHistory:!1,hasMoreHistory:!a}}):e()}else e()},function(){t.updateChat("liveChatChatId",{properties:{loadingHistory:!1}})})})),t.on("request_update_chat",function(e){var n=e.resolve,r=e.reject,a=e.data,i=a.properties,o=void 0===i?{}:i,c=Object(v.a)(a,["properties"]);if(o.rateComment){var s=o.rateComment;Tp(t,s),d.rateChat(x(),{comment:s}).then(n,r)}else if("undefined"!==typeof o.rate){if(Ap(t,o.rate),null===o.rate)return void d.cancelRate(x()).then(function(){t.updateChat("liveChatChatId",{properties:{rateComment:null}}),n()},r);d.rateChat(x(),{score:I(o.rate)}).then(n,r)}else o.transcriptSentTo?d.updateChatThreadProperties(x(),E(),{routing:{transcript_email:o.transcriptSentTo}}).then(n,r):!1===c.active?d.closeThread(x()).then(function(){A(),n()},r):"string"===typeof o.messageDraft&&(t.getChat("liveChatChatId").active&&d.setSneakPeek(x(),o.messageDraft),n())});var ie=function(e){return"confirm_subscription"===e.meta?"checkbox_for_email":"groupSelect"===e.meta?"group_chooser":"name"===e.name?"name":"text"===e.type?"question":e.type},oe=function(e,t){var n=e.id,r=e.properties,a=r.formType,i=r.formId,o=r.fields,c=mp(o,t),s=c.fields,u={filledForm:{customId:n,type:"filled_form",formId:i,fields:o.filter(function(e){return void 0!==e.serverName&&"rating"!==e.type&&"information"!==e.type}).map(function(e){var t=e.label,n=e.serverName,r={label:t,type:ie(e),id:n};if("groupSelect"===e.meta)r.answer={group_id:c.choosenGroup,label:e.options[c.choosenGroupIndex].label};else if(Object(m.A)(e.options)){var a=Object(m.x)(n,s)?Object(m.i)(s[n]):[],i=e.options.filter(function(e){return Object(m.z)(e.originalValue,a)}).map(function(e){return{label:e.label,value:e.originalValue}});if("confirm_subscription"===e.meta)r.label=e.options[0].label,r.answer=!!a.length;else if("checkbox"===r.type)r.answers=i.map(function(e){return{label:e.label,id:e.value}});else if(i.length){var o=i[0];r.answer={id:o.value,label:o.label}}}else Object(m.x)(n,s)&&(r.answer=s[n]);return r}),properties:{lc2:{form_type:a}}}};return void 0!==c.choosenGroup&&(u.choosenGroup=c.choosenGroup),u};t.on("request_update_event",function(e){var n,r,a,i=t.getEvent("liveChatChatId",e.id);if(e.data.seen)d.updateLastSeenTimestamp(x(),i.timestamp).then(e.resolve,e.resolve);else if("offline"===i.properties.formType){var o=e.data.properties.answers,c=i.properties.fields,s=mp(c,o).fields,u=t.getApplicationState(),l=t.getSessionUser(),f=i,h=Zc({license:u.license,group:u.group,visitorId:l.serverId,visitorData:{pageUrl:u.page.url},defaultValues:{name:t.localize("client")}},(a=f.properties,Io(Eo(a))),s);Ro("v2/tickets/new",{environment:"production",license:u.license,body:h}).then(function(n){var r=i.properties.fields;Mp(t,r,s,Xc(n.id,h)),e.resolve(),Ar(t,e.id),t.setCurrentView("Chat")},function(n){Fr(n,t.localize,e.reject)})}else if("prechat"===i.properties.formType){var v=e.data.properties.answers,g=i.properties.fields;Sp(t,g,mp(g,v).fields);var y=Object(m.Z)(["name","email"],v);Object(m.B)(y)||d.updateCustomer(y);var j=oe(i,v),O=j.filledForm,_=j.choosenGroup,w={event:O},C=function(){pe(w).then(function(){e.resolve(),t.setDefaultView("Chat","timeline")},function(t){"GROUPS_OFFLINE"!==t.code?"GROUP_NOT_FOUND"!==t.code?e.reject():b():T().then(e.resolve,e.reject)})};if(void 0!==_)return w.access={groups:[_]},void(n=p,r=_,Xm(n,[r]).then(function(e){return e[r]})).then(function(e){if("not_found"===e){var t=new Error('Group "'+_+'" not found (most likely it has been removed).');throw t.code="GROUP_NOT_FOUND",t}return e}).then(function(n){t.setApplicationState({group:_}),"online"===n?C():th(p,t.getApplicationState("group")).then(function(e){e.enabled?(!function(e,t){Tr(e,t,{enabled:!0})}(t,"offlineForm"),t.updateView("Chat/offline",e.form)):function(e,t){Tr(e,t,{enabled:!1})}(t,"offlineForm"),t.setApplicationState({availability:"offline"})},function(t){"CONNECTION_LOST"!==t.code?b():e.reject()})},function(t){"CONNECTION_LOST"!==t.code?b():e.reject()});C()}else if("postchat"===i.properties.formType){var E=e.data.properties.answers,I=i.properties.fields;kp(t,I,mp(I,E).fields);var S=oe(i,E).filledForm;d.sendEvent(x(),S,{attachToLastThread:!0}).then(function(n){e.resolve(),Ar(t,e.id,Jm(t,n));var r=t.getApplicationState().availability,a=t.getChat("liveChatChatId").properties.postponedInvitation;"online"===r&&a?Promise.resolve().then(function(){t.updateChat("liveChatChatId",{properties:{postponedInvitation:void 0}}),U(a),t.setDefaultView("Chat","timeline")}):t.setDefaultView("Chat","timeline"),"rating"in E&&P(E)})}}),t.on("request_update_user",function(e){var n=e.resolve,r=e.id,a=e.data,i=a.properties,o=Object(v.a)(a,["properties"]);if(t.getSessionUserId()===r){var c=Object(m.d)({name:o.name,email:o.email,fields:i});d.updateCustomer(c),n()}}),t.on("update_event",function(e){var n=e.event;"file"===n.type&&n.properties.canceled&&vr(t,n.id)}),t.on("request_set_user_properties",function(e){var n=e.resolve,r=e.id,a=e.properties;t.getSessionUserId()===r&&(d.setCustomerFields(a),n())});var ce=function(e){var n=e.type,r=e.id;if("filled_form"===n)return e;if("message"===n||"url_preview"===n||"emoji"===n){var a=e.properties,i=a.text,o=a.triggeredBy,c={type:"message",customId:r,text:i};if(o&&"action_button"===o.type){var s=t.getEvent("liveChatChatId",o.event),u=s.serverId,l=s.properties.thread;c.postback={id:o.button.postback,type:o.button.type,value:o.button.value,event_id:u,thread_id:l}}return c}},se=function(e,n){var r=n.id,a=n.timestamp,i=n.thread;Pp(t,e,a),t.setEventServerId("liveChatChatId",e.id,r),t.updateEvent("liveChatChatId",e.id,{delivered:!0,properties:{serverTimestamp:a,thread:i}})},ue=function(e){t.updateEvent("liveChatChatId",e.id,{failed:!0})},le=function(e){var n=e.event,r=e.meta;if("file"===n.type)return hr(t,n.id),d.sendFile(x(),{customId:n.id,file:r.file},{onProgress:function(e){t.updateEvent("liveChatChatId",n.id,{properties:{progress:e}})}}).then(function(e){var r=e.url;t.updateEvent("liveChatChatId",n.id,{delivered:!0,properties:{url:r}}),vr(t,n.id)},function(e){var r={failed:!0,failReason:"TOO_BIG_FILE"===e.code?t.localize("cannot_upload_a_file_over_10mb"):t.localize("upload_failed")};t.updateEvent("liveChatChatId",n.id,{properties:r})});if("message"===n.type||"emoji"===n.type)return d.sendEvent(x(),ce(n)).then(function(e){se(n,e)},function(){ue(n)});if("rich_message_postback"===n.type){var a=n.properties,i=a.eventId,o=Object(v.a)(a,["eventId"]),c=t.getEvent("liveChatChatId",i),s=c.id,u=c.properties.thread;return d.sendPostback(x(),u,s,o).catch(m.P)}if("url_preview"===n.type){var l=d.getUrlDetails(n.properties.url).catch(function(){return null});return d.sendEvent(x(),ce(n)).then(function(e){se(n,e),l.then(function(r){if(null!==r){var a=r.title,i=r.description,o=r.image,c=o.url,s=o.width,u=o.height,l=r.url;return t.updateEvent("liveChatChatId",n.id,{properties:{title:a,description:i,image:{url:c,link:l}}}),d.updateEventProperties(x(),e.thread,e.id,{url_details:{title:a,description:i,url:l,image_url:c,image_width:s,image_height:u}})}}).catch(m.P)},function(){ue(n)})}},de=[],pe=function(e){t.updateChat("liveChatChatId",{properties:{starting:!0}});var n=t.getSessionUser();"Customer"!==n.name&&n.name||d.updateCustomer({name:t.localize("client")});var r=function(e){return void 0===e&&(e={}),Object(h.a)({threadProperties:q()||{}},e.access&&{access:e.access},e.event&&{events:[ce(e.event)]})}(e);return function(e,t){var n=e.sdk,r=e.store,a=r.getChat("liveChatChatId").serverId;return a?n.activateChat(a,t).then(function(e){return Gm(r,e)},function(e){if("VALIDATION"===e.code&&"Chat is already active"===e.message){var t=new Error(e.message);throw t.code="CHAT_ALREADY_ACTIVE",t}throw e}):n.startChat(t).then(function(e){return Gm(r,e)},function(e){if("VALIDATION"===e.code&&"Customer chats limit reached"===e.message){var t=new Error(e.message);throw t.code="CHAT_ALREADY_ACTIVE",t}throw e})}(p,r).then(function(e){var n=e.events,r=Object(v.a)(e,["events"]);t.updateChat("liveChatChatId",{properties:{starting:!1}});var a=t.getSessionUser().id;n.forEach(function(e){e.author===a?function(e,t){var n=t.timestamp;"message"===t.properties.serverType&&Pp(e,t,n),e.setEventServerId("liveChatChatId",t.id,t.serverId);var r={delivered:!0,properties:{serverTimestamp:n,thread:t.properties.thread}};"form"===t.type&&(r.properties.answered=!0,r.properties.fields=t.properties.fields),e.updateEvent("liveChatChatId",t.id,r)}(t,e):e.properties.welcomeMessage||"greetingUniqueId"in e.properties?function(e,t){var n=t.serverId,r=t.author,a=t.properties.text,i=en("liveChatChatId",e);e.setEventServerId("liveChatChatId",i.id,n);var o=i.author!==r;o&&e.setEventData("liveChatChatId",i.id,{author:r}),i.properties.text!==a&&e.updateEvent("liveChatChatId",i.id,{properties:{text:a}}),o&&(Cr(e,r),e.recalculateTimeline("liveChatChatId"))}(t,e):L(e)}),w(Object(h.a)({},r,{events:[]}));var i=de;return de=[],i.forEach(le),r},function(e){t.updateChat("liveChatChatId",{properties:{starting:!1}});var n=de;throw de=[],n.forEach(function(e){t.updateEvent("liveChatChatId",e.id,{failed:!0})}),e})};t.on("send_event",function(e){bn("liveChatChatId",t)?de.push(e):t.getChat("liveChatChatId").active?le(e):pe(e).catch(function(n){"GROUPS_OFFLINE"!==n.code?t.updateEvent("liveChatChatId",e.event.id,{failed:!0}):T()})});var fe=function(){if(z||t.getChat("liveChatChatId").properties.queued)return{type:"nothing"};var e=t.getApplicationState();return t.getApplicationState("destroyed")?{type:"nothing"}:"offline"===t.getApplicationState("availability")?En(t)?Pn(t)?{type:"nothing"}:{type:"show_offline_form"}:{type:"hide_prechat_form"}:an("liveChatChatId",t)?{type:"hide_offline_form"}:e.maximized?Cn(t)?{type:"show_prechat"}:un(t)?d.getPredictedAgent().then(function(e){return"offline"===t.getApplicationState("availability")?{type:"nothing"}:[{type:"hide_offline_form"},{type:"predicted_agent",agent:e}]},function(e){if("offline"===t.getApplicationState("availability"))return{type:"nothing"};switch(e.code){case"GROUP_UNAVAILABLE":return[{type:"hide_offline_form"},{type:"start_thread"}];case"GROUP_OFFLINE":return{type:"nothing"};default:return{type:"panic"}}}):{type:"nothing"}:{type:"nothing"}},me=function(){var e=t.getChat("liveChatChatId");return!e.active&&!e.properties.starting&&!e.properties.ended},he=function(){t.updateView("minimized",{hidden:!1})},ve=pa()(za(t,function(e){return e.application.destroyed}),ea()(Boolean),Ta()(1),Ca.a);pa()($,ra()(he));var be=pa()(ca(t,"flush_chat"),Ea.a);pa()(be,ra()(function(){_(y);var e=t.getApplicationState().hasChatMoreHistoryInitial;!z&&Sn(t,"prechat")&&Er(t),t.updateChat("liveChatChatId",{properties:{hasMoreHistory:e}}),t.setApplicationState({loadedInitialHistory:!e})}));var ge=pa()(za(t,function(e){return e.application.availability}),Sa()(1),Ea.a,Object(wa.a)(function(e){return"online"===e})),ye=ge[0],je=ge[1];pa()(je,ea()(me),ra()(function(){f()})),pa()(ye,ea()(me),ra()(function(){t.getView("minimized").hidden&&he()})),pa()(X(function(){if(!Cn(t))return xa.a;var e=za(t,function(){return In(t,"prechat")});return pa()(oa()($,e),ea()(function(){return In(t,"prechat")}),ba(function(){var e=t.getLastEvent("liveChatChatId");return pa()(Object(la.a)(function(e,t){var n=Object(m.l)(function(e){return"groupSelect"===e.meta},t);if(-1===n)return Promise.resolve(null);var r=t[n],a=r.options.map(function(e){return parseInt(e.groupNumber,10)});return a.length>20?Promise.resolve(null):Xm(e,a).then(function(e){return Object(m.pb)(n,Object(h.a)({},r,{options:r.options.map(function(t){return Object(h.a)({},t,{meta:{online:"online"===e[parseInt(t.groupNumber,10)]}})})}),t)})}(p,e.properties.fields)),Oa)}))}),ea()(function(e){return e&&In(t,"prechat")}),ra()(function(e){var n=t.getLastEvent("liveChatChatId").id;return t.updateEvent("liveChatChatId",n,{properties:{fields:e}})}));var Oe=pa()(za(t,function(){return un(t)}),ea()(Boolean),Ca.a);pa()(X(function(){return oa()($,ye,je,be,Oe)}),ea()(me),Object(Xr.a)(function(){return Object(la.a)(Object(If.a)(fe))}),ba(function(e){return _a.a.apply(void 0,Object(m.i)(e))}),ra()(function(e){switch(e.type){case"panic":return void b();case"predicted_agent":var n=e.agent;N(n),Cr(t,n.id);var r=t.localize("welcome_to_chat"),a=(i={id:"welcome_message",type:"message",author:n.id,text:zn(t,r),originalText:r},Object(h.a)({},i,{serverId:null,timestamp:Date.now(),seen:!0,properties:i.properties?i.properties:{}}));return L(bp(a)),n.isBot?(t.setDefaultView("Chat","loader"),pe().catch(function(e){"CHAT_ALREADY_ACTIVE"!==e.code&&("GROUPS_OFFLINE"!==e.code?b():T())})):void t.setDefaultView("Chat","timeline");case"show_offline_form":return void Nr(t);case"hide_prechat_form":return void qr(t);case"hide_offline_form":return void(In(t,"offline")&&(Ur(t),t.setDefaultView("Chat","timeline")));case"show_prechat":return void Er(t);case"start_thread":return void pe().catch(function(e){"WIDGET_DESTROYED"!==e.code&&("GROUPS_OFFLINE"!==e.code?b():T())});default:return}var i})),pa()(za(t,function(e){return e.application.page}),Sa()(1),Object(Aa.a)(ve),ra()(function(e){var t=e.url,n=e.title;d.updateCustomerPage({url:t,title:n})}))},sh=function(e){return e.some(m.y)},uh=function(e,t){var n=pa()(function(){var e=Object(ya.a)(function(){return!!document.hasFocus&&document.hasFocus()}),t=va()(function(){return!0})(Object(aa.a)(window,"focus")),n=va()(function(){return!1})(Object(aa.a)(window,"blur"));return oa()(e,t,n)}(),Ca.a);if(t){var r,a=(r=t,pa()(Object(Qr.a)(function(){return Object(la.a)(Promise.race([r.call("isFocused"),new Promise(function(e){return ga(r,"focus",e)})]))}),ba(function(e){return pa()(ca(r,"focus"),ma()(e))})));pa()(n,ra()(function(n){e.setApplicationState({applicationFocused:n}),t.emit("focus",n)})),pa()(Gr()(n,a),Object(Jr.a)(50),va()(sh),Object(Kr.a)(),ra()(function(t){e.setApplicationState({pageFocused:t})}))}else pa()(n,ra()(function(t){e.setApplicationState({pageFocused:t,applicationFocused:t})}))},lh=/\.(\w+)$/i,dh=new Audio,ph={mp3:"audio/mpeg",ogg:"audio/ogg"},fh=function(e){var t=function(e){var t=e.match(lh);return t?t[1].toLowerCase():""}(e);if(t in ph){if(""!==dh.canPlayType(ph[t]))return!0}else 0;return!1},mh=function(e){return new Promise(function(t,n){var r=new Audio(e);r.onloadeddata=function(){t(r)},r.onerror=n})},hh=function(e){var t=e.play();return Object(m.E)(t)?t:Promise.resolve()},vh=function(e){return"function"===typeof e.start&&"function"===typeof e.stop},bh=function(e){vh(e)?e.start(0):e.noteOn(0)},gh=function(){var e=new(window.AudioContext||window.webkitAudioContext),t=!0,n=[],r=function(t){return new Promise(function(n,r){e.decodeAudioData(t,n,r)})},a=function(t){return{play:function(){var n=e.createBufferSource();return n.connect(e.destination),n.buffer=t,{playback:new Promise(function(t,r){if(n.onended=function(){return t()},bh(n),"running"!==e.state){var a=new Error("Playback failed, AudioContext is in incorrect state '"+e.state+"'");a.name="PlaybackError",r(a)}}),stop:function(){!function(e){vh(e)?e.stop(0):e.noteOff(0)}(n)}}}}};return{preload:function(e){return function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.onload=function(){t(r.response)},r.onerror=n,r.open("GET",e),r.responseType="arraybuffer",r.send()})}(e).then(r).then(a)},playSound:function(e){var r=e.play();return t&&n.push(r),r.playback},resumeOnInteraction:function(){var r=function r(){document.removeEventListener("click",r,!0),document.removeEventListener("touchend",r,!0),t&&(n.forEach(function(e){e.stop()}),n=[],t=!1),e.resume(),function(){var t=e.createBuffer(1,1,22050),n=e.createBufferSource();n.buffer=t,n.connect(e.destination),bh(n)}()};document.addEventListener("click",r,!0),document.addEventListener("touchend",r,!0)}}},yh=function(){return"function"===typeof window.webkitAudioContext?function(){var e=gh(),t=Object(m.L)(function(t){var n=e.preload(t);return n.catch(m.P),n});return{play:function(n){var r=t(n).then(e.playSound);return r.catch(m.P),r},preload:t,unlock:function(){return e.resumeOnInteraction()}}}():function(){var e=Object(m.L)(mh);return{play:function(t){return e(t).then(hh)},preload:e,unlock:m.P}}()},jh=function(e){var t=yh(),n=function(e){return Object.keys(e).reduce(function(t,n){var r=Object(m.k)(function(e){return fh(e)},Object(m.i)(e[n]));return t[n]=r,t},{})}(e);return{play:function(e){var r=n[e];t.play(r).then(m.P,m.P)},preload:function(e){var r=n[e];t.preload(r).then(m.P,m.P)},resumeOnInteraction:function(){return t.unlock()}}},Oh=n(207),xh=n.n(Oh),_h=n(208),wh=n.n(_h),Ch=function(){var e,t=jh(((e={}).new_message=[wh.a,xh.a],e));return t.resumeOnInteraction(),t.preload("new_message"),Object(m.H)(2e3,function(e){t.play(e)})},Eh=function(e,t){return"system"!==e.author&&"welcome_message"!==e.id&&e.author!==t},Ih=function(e){var t=Ch();e.on("add_event",function(n){var r=n.event;if(!e.getApplicationState().muted){var a=e.getSessionUserId();Eh(r,a)&&t("new_message")}})},Sh="init",kh="invitation",Th="chatStarted",Ah=n(79),Ph=n.n(Ah),Mh=n(112),Nh=function(e){var t=e.amplitudeKey,n=e.children;return t?Rt.createElement(Mh.AmplitudeProvider,{amplitudeInstance:Ph.a.getInstance(),apiKey:t},n):n},zh=n(209),Rh=n(14),Dh=n(3),Lh=new(function(){function e(){this.storage=new Map}var t=e.prototype;return t.get=function(e,t){var n=this.storage.get(t);if(n&&n.formId===e)return n.value},t.set=function(e,t,n){var r={formId:e,value:n};return this.storage.set(t,r),this},t.delete=function(e){return this.storage.delete(e)},e}()),Bh=Rt.createContext(Lh),qh=function(e){var t=e.children;return Rt.createElement(Bh.Provider,{value:Lh},t)},Uh=Bh,Fh=n(8),Vh=n(92),Gh=Object(Dh.D)("0%{transform:scale(0);}25%{transform:scale(0);}50%{transform:scale(1.3);}100%{transform:scale(1.0);}"),Hh=Object(Dh.E)("div",{target:"e8j27gz0"})("width:auto;min-width:1.5em;border-radius:10px;padding:0 4px;flex-shrink:0;background-color:#e92660;color:#fff;height:1.5em;line-height:1.5em;text-align:center;font-size:0.8em;box-shadow:0 0.2em 0.2em rgba(0,0,0,0.2);font-weight:bold;animation-name:",Gh,";animation-duration:0.625s;animation-timing-function:cubic-bezier(0.175,0.885,0.32,1.275);"),Wh=Object(Dh.E)("p",{target:"ejp8d810"})("margin:1em 0;"),Yh=n(314),Jh=function(e){return e/16+"rem"},Qh=function(e){return Object(Dh.A)("display:inline-block;flex-shrink:0;width:1em;height:1em;font-size:",e?Jh(e):"inherit",";user-select:none;fill:currentColor;")},Kh=function(e){var t=e.className,n=e.size,r=e.color,a=void 0===r?"inherit":r,i=Object(v.a)(e,["className","size","color"]);return Rt.createElement("svg",Object(h.a)({color:a,className:Object(Dh.B)(Qh(n),t)},i))},Zh=function(e,t){return Rt.memo(function(n){return Rt.createElement(Kh,Object(h.a)({},t,n),e)})},Xh=Zh(Rt.createElement("path",{d:"M5.5,6l6.5,5.7L18.5,6H5.5z M20,7.3l-7.3,6.4c-0.4,0.3-0.9,0.3-1.3,0L4,7.3V17c0,0.6,0.4,1,1,1h14 c0.6,0,1-0.4,1-1V7.3z M5,4h14c1.7,0,3,1.3,3,3v10c0,1.7-1.3,3-3,3H5c-1.7,0-3-1.3-3-3V7C2,5.3,3.3,4,5,4z"}),{size:24,viewBox:"0 0 24 24"}),$h=Zh(Rt.createElement("path",{d:"M18,10.6l1.3-1.3c0.4-0.4,1-0.4,1.4,0c0.4,0.4,0.4,1,0,1.4L19.4,12l1.3,1.3c0.4,0.4,0.4,1,0,1.4 c-0.4,0.4-1,0.4-1.4,0L18,13.4l-1.3,1.3c-0.4,0.4-1,0.4-1.4,0c-0.4-0.4-0.4-1,0-1.4l1.3-1.3l-1.3-1.3c-0.4-0.4-0.4-1,0-1.4 c0.4-0.4,1-0.4,1.4,0L18,10.6L18,10.6z M7,8l4.3-3.7C11.9,3.7,13,4.1,13,5v14c0,0.9-1.1,1.3-1.7,0.7L7.2,16H4c-0.6,0-1-0.4-1-1V9 c0-0.6,0.4-1,1-1H7z M11,7.4L8.3,9.7C8.1,9.9,7.9,10,7.6,10H5v4h2.6c0.3,0,0.5,0.1,0.7,0.3l2.7,2.3V7.4z"}),{size:24,viewBox:"0 0 24 24"}),ev=Zh(Rt.createElement("path",{d:"M15,19v-2c2.8,0,5-2.2,5-5s-2.2-5-5-5V5c3.9,0,7,3.1,7,7S18.9,19,15,19z M15,16v-2c1.1,0,2-0.9,2-2s-0.9-2-2-2 V8c2.2,0,4,1.8,4,4S17.2,16,15,16z M7,8l4.3-3.7C11.9,3.7,13,4.1,13,5v14c0,0.9-1.1,1.3-1.7,0.7L7.2,16H4c-0.6,0-1-0.4-1-1V9 c0-0.6,0.4-1,1-1H7z M11,7.4L8.3,9.7C8.1,9.9,7.9,10,7.6,10H5v4h2.6c0.3,0,0.5,0.1,0.7,0.3l2.7,2.3V7.4z"}),{size:24,viewBox:"0 0 24 24"}),tv=Zh(Rt.createElement("path",{d:"M18,10c0.6,0,1,0.4,1,1v9c0,1.6-1.2,3-2.7,3h-0.6c-1.5,0-2.7-1.4-2.7-3V9c0-2.2,2.1-4,4.5-4h1C20.9,5,23,6.8,23,9\tv12c0,3.9-3.1,7-7,7s-7-3.1-7-7v-8c0-0.6,0.4-1,1-1c0.6,0,1,0.4,1,1v8c0,2.8,2.2,5,5,5s5-2.2,5-5V9c0-1.1-1.1-2-2.5-2h-1\tC16.1,7,15,7.9,15,9v11c0,0.6,0.4,1,0.7,1h0.6c0.4,0,0.7-0.4,0.7-1v-9c0-0.3,0.1-0.5,0.3-0.7C17.5,10.1,17.7,10,18,10z"}),{size:32,viewBox:"0 0 32 32"}),nv=Zh(Rt.createElement("path",{d:"M6.4,5.6l21,9.5c0.5,0.2,0.7,0.8,0.5,1.3c-0.1,0.2-0.3,0.4-0.5,0.5l-21,9.5\tc-0.5,0.2-1.1,0-1.3-0.5c-0.1-0.3-0.1-0.6,0-0.8L8.6,18L20.5,16L8.6,14.1L5.1,6.9c-0.2-0.5,0-1.1,0.5-1.3C5.8,5.5,6.1,5.5,6.4,5.6z"}),{size:32,viewBox:"0 0 32 32"}),rv=Zh(Rt.createElement("path",{d:"M17.4,16l5.3,5.3c0.4,0.4,0.4,1,0,1.4c-0.4,0.4-1,0.4-1.4,0L16,17.4l-5.3,5.3c-0.4,0.4-1,0.4-1.4,0\tc-0.4-0.4-0.4-1,0-1.4l5.3-5.3l-5.3-5.3c-0.4-0.4-0.4-1,0-1.4c0.4-0.4,1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0\tc0.4,0.4,0.4,1,0,1.4L17.4,16z"}),{size:32,viewBox:"0 0 32 32"}),av=Zh(Rt.createElement("path",{d:"M11,22c-0.6,0-1-0.4-1-1s0.4-1,1-1h15c0.6,0,1,0.4,1,1s-0.4,1-1,1H11z"}),{size:32,viewBox:"0 0 32 32"}),iv=Zh(Rt.createElement("path",{d:"M8,18c-1.1,0-2-0.9-2-2s0.9-2,2-2s2,0.9,2,2S9.1,18,8,18z M16,18c-1.1,0-2-0.9-2-2s0.9-2,2-2\ns2,0.9,2,2S17.1,18,16,18z M24,18c-1.1,0-2-0.9-2-2s0.9-2,2-2s2,0.9,2,2S25.1,18,24,18z"}),{size:32,viewBox:"0 0 32 32"}),ov=Zh(Rt.createElement("path",{d:"M11,14h1.47c.35-.5.9-1.35,1.64-2.53a3.68,3.68,0,0,0,.23-.44,6.34,6.34,0,0,0,.52-2.42C15.05,6.82,15.51,6,17,6c1.66,0,2.65,1.06,2.92,2.86V14h3c3,0,3.76,2.26,2.51,6.65S23.35,26,19.93,26H14a1,1,0,0,1-.71-.3L11.55,24H11v0a1,1,0,0,1-1,1H6a1,1,0,0,1-1-1V14a1,1,0,0,1,1-1h4a1,1,0,0,1,1,1Zm0,2v6h1a1,1,0,0,1,.7.3L14.37,24H20c2.37,0,2.44-.15,3.51-3.9.94-3.31.68-4.1-.6-4.1h-4A1,1,0,0,1,18,15V9.08C17.87,8.27,17.54,8,17,8a5.27,5.27,0,0,0-.13.81,8.19,8.19,0,0,1-.69,3.06,5.37,5.37,0,0,1-.36.66,34.81,34.81,0,0,1-2.06,3.11A1,1,0,0,1,13,16ZM7,15v8H9V15Z"}),{size:32,viewBox:"0 0 32 32"}),cv=Zh(Rt.createElement("path",{d:"M20,19H18.56c-.35.5-.91,1.35-1.64,2.53a3.75,3.75,0,0,0-.24.44,6.74,6.74,0,0,0-.52,2.42C16,26.18,15.49,27,14,27c-1.66,0-2.74-1.2-3-3V19H8c-3,0-3.64-2.26-2.4-6.65S7.58,7,11,7h6a1.11,1.11,0,0,1,.75.3L19.48,9H20V9a1,1,0,0,1,1-1h4a1,1,0,0,1,1,1V19a1,1,0,0,1-1,1H21a1,1,0,0,1-1-1Zm0-2V11h-.94a1,1,0,0,1-.71-.3L16.65,9H11c-2.38,0-2.45.15-3.51,3.9C6.58,16.21,6.75,17,8,17h4a1,1,0,0,1,1,1v5.92c.12.81.46,1.07,1,1.08a4.54,4.54,0,0,0,.12-.81,8.39,8.39,0,0,1,.69-3.06q.17-.33.36-.66a34.1,34.1,0,0,1,2.07-3.11,1,1,0,0,1,.76-.36Zm4,1V10H22v8Z"}),{size:32,viewBox:"0 0 32 32"}),sv=Zh(Rt.createElement("path",{d:"M17.6,17H7c-0.6,0-1-0.4-1-1s0.4-1,1-1h10.6l-2.3-2.3c-0.4-0.4-0.4-1,0-1.4c0.4-0.4,1-0.4,1.4,0l4,4 c0.4,0.4,0.4,1,0,1.4l-4,4c-0.4,0.4-1,0.4-1.4,0c-0.4-0.4-0.4-1,0-1.4L17.6,17L17.6,17z M8,12c0,0.6-0.4,1-1,1s-1-0.4-1-1V8.1 C6,7,7,6,8.1,6h15.8C25,6,26,7,26,8.1v15.8c0,1.2-1,2.1-2.1,2.1H8.1C7,26,6,25,6,23.9V20c0-0.6,0.4-1,1-1s1,0.4,1,1v3.9 C8,23.9,8.1,24,8.1,24h15.8c0.1,0,0.1-0.1,0.1-0.1V8.1C24,8.1,23.9,8,23.9,8H8.1C8.1,8,8,8.1,8,8.1V12z"}),{size:32,viewBox:"0 0 32 32"}),uv=Zh(Rt.createElement("path",{d:"M18.8,16.3C17.9,16.8,17,17,16,17c-1,0-1.9-0.2-2.8-0.7c-3.2,0.8-5.2,2.8-5.2,5c0,0.8,0,0.9,0,2c0,0,0,0,0.1,0\tc0.4,0.1,1,0.3,1.9,0.4c1.6,0.2,3.8,0.3,6.1,0.3s4.5-0.1,6.1-0.3c0.8-0.1,1.4-0.2,1.9-0.4c0,0,0.1,0,0.1,0v-2\tC24,19.2,21.9,17.1,18.8,16.3z M20.6,14.8c3.2,1.2,5.4,3.7,5.4,6.5v2.4c0,1.8-3.7,2.2-10,2.2S6,25.5,6,23.8c0-1.5,0-1.5,0-2.4\tc0-2.9,2.2-5.3,5.4-6.5c-0.9-1-1.4-2.4-1.4-3.8c0-3.3,2.7-6,6-6s6,2.7,6,6C22,12.5,21.5,13.8,20.6,14.8z M16,15c2.2,0,4-1.8,4-4\ts-1.8-4-4-4s-4,1.8-4,4S13.8,15,16,15z"}),{size:32,viewBox:"0 0 32 32"}),lv=Zh(Rt.createElement("path",{d:"M8.7,15.2c-0.4-0.4-1-0.4-1.4,0c-0.4,0.4-0.4,1,0,1.4l5.7,5.7c0.4,0.4,1,0.4,1.4,0l9.9-9.9 c0.4-0.4,0.4-1,0-1.4c-0.4-0.4-1-0.4-1.4,0l-9.2,9.2L8.7,15.2z"}),{size:32,viewBox:"0 0 32 32"}),dv=Zh(Rt.createElement("path",{d:"M16.5,21.1l-6.3,3.8C9,25.5,7.6,24.3,8.1,23l2.2-5.7l-3.8-3.7c-1-0.9-0.4-2.6,1-2.6h5.3l2.3-5.1 c0.5-1.2,2.2-1.2,2.8,0l2.3,5.1h5.4c1.4,0,2,1.7,1,2.6l-3.9,3.7l2.2,5.7c0.5,1.3-0.9,2.5-2.2,1.8L16.5,21.1z M10.5,22.3l5.3-3.1l0,0 c0.4-0.2,1-0.2,1.5,0l5.3,3.1l-1.8-4.7c-0.2-0.6,0-1.2,0.4-1.6l3.2-3h-4.4c-0.6,0-1.1-0.4-1.4-0.9l-2-4.4l-2,4.4 c-0.2,0.6-0.8,0.9-1.4,0.9H8.8l3.1,3c0.4,0.4,0.6,1,0.4,1.6L10.5,22.3z"}),{size:32,viewBox:"0 0 32 32"}),pv=Object(Dh.E)(Dh.i,{target:"ejrzz680"})("padding:0;border-radius:6px;"),fv=Object(Dh.E)(pv,{target:"e1bjcwou0"})("width:",Jh(24),";height:",Jh(24),";border-radius:50%;background:rgba(255,255,255,0.5);margin-bottom:",function(e){return.5*e.theme.spaceBase},"px;visibility:",function(e){return e.mobile?"visible":"hidden"},";"),mv=Object(Dh.A)("font-size:",Jh(24),";"),hv=function(e){var t=e.mobile,n=void 0!==t&&t,r=e.onClick;return Rt.createElement(fv,{onClick:r,mobile:n},Rt.createElement(rv,{className:mv}))},vv=Object(Dh.E)(Dh.h,{displayName:"Invitation",section:!0,target:"e18yipk00"})("margin-bottom:8px;&:hover{",fv,"{visibility:visible;}}",Dh.c,"{color:#424d57;box-shadow:0 4px 12px rgba(0,0,0,0.3);}"),bv=Object(Dh.A)("max-width:255px;cursor:pointer;"),gv=function(e){var t=e.onClick,n=e.children;return Rt.createElement(Dh.c,{className:bv,onClick:t},Rt.createElement(Dh.o,null,n))},yv=n(313),jv=function(e){return void 0===e&&(e=0),Object(Dh.A)("transition-delay:",e,"ms;&-enter,&-appear{opacity:0;transform:translateY(8px);}&-enter-active,&-appear-active{opacity:1;transform:translateY(0);transition:opacity 100ms ease-in,transform 200ms ease-in;}&-exit{opacity:1;transform:translateY(0);}&-exit-active{opacity:0;transform:translateY(8px);transition:opacity 100ms ease-in,transform 200ms ease-in;}")},Ov=function(e){var t=e.delay,n=void 0===t?0:t,r=Object(v.a)(e,["delay"]);return Rt.createElement(yv.a,Object(h.a)({},r,{timeout:400+n,classNames:jv(n)}))},xv=function(e){return void 0===e&&(e=0),Object(Dh.A)("transition-delay:",e,"ms;&-enter,&-appear{opacity:0;}&-enter-active,&-appear-active{opacity:1;transition:opacity 200ms ease-out;}&-exit{opacity:1;}&-exit-active{opacity:0;transition:opacity 200ms ease-out;}")},_v=function(e){var t=e.delay,n=void 0===t?0:t,r=Object(v.a)(e,["delay"]);return Rt.createElement(yv.a,Object(h.a)({},r,{timeout:200+n,classNames:xv(n)}))},wv=Object(Dh.E)(Dh.s,{target:"e46npph0"})("margin-bottom:",function(e){return e.noMargin?0:8},"px;"),Cv=function(e){var t=e.reverse,n=e.noMargin,r=e.children,a=Object(v.a)(e,["reverse","noMargin","children"]);return Rt.createElement(Ov,a,Rt.createElement(wv,{reverse:t,noMargin:n},r))},Ev=Object(Dh.A)("max-width:255px;margin-bottom:10px;cursor:pointer;"),Iv=Object(Dh.A)("font-size:",Jh(24),";"),Sv=Object(Dh.E)(pv,{target:"e2lb6850"})("background:rgba(255,255,255,0.5);border-radius:50%;display:flex;padding:0;justify-content:center;align-items:center;margin-bottom:0.4em;visibility:",function(e){return e.mobile?"visible":"hidden"},";"),kv=Object(Dh.E)("div",{displayName:"Invitation",section:!0,target:"e2lb6851"})("display:flex;flex-direction:column;align-items:",function(e){return e.alignToRight?"flex-end":"flex-start"},";&:hover{*{visibility:visible;}}",Dh.c,"{box-shadow:0 0.1em 1.2em rgba(0,0,0,0.3);}"),Tv=function(e){var t=e.screenPosition,n=e.mobile,r=e.onClose,a=e.onClick,i=e.text;return Rt.createElement(kv,{alignToRight:"right"===t},Rt.createElement(Dh.s,{reverse:"right"===t},Rt.createElement(Sv,{mobile:n,onClick:r},Rt.createElement(rv,{className:Iv}))),Rt.createElement(Dh.c,{className:Ev,onClick:a},Rt.createElement(Dh.o,null,i)))},Av=["0px, 0px","0px, -8px","0px, -10px","0px, -6px","0px, -2px","0px, 3px","0px, 2px","0px, -1px"],Pv=function(e){return Object(Dh.D)(e.map(function(e,t){return e+" { transform: translate("+Av[t]+"); }"}))},Mv=Pv(["0%, 66.67%, 100%","6.67%","13.33%, 20%","26.67%","33.33%","40%","46.67%","53.33%"]),Nv=Pv(["0%, 6.67%, 73.33%, 100%","13.33%","20%, 26.67%","33.33%","40%","46.67%","53.33%","60%"]),zv=Pv(["0%, 13.33%, 80%, 100%","20%","26.67%, 33.33%","40%","46.67%","53.33%","60%","66.67%"]),Rv=Object(Dh.E)("circle",{target:"epoxe490"})("transform-box:fill-box;transform-origin:50% 50%;animation-duration:1.5s;animation-iteration-count:infinite;animation-timing-function:cubic-bezier(0,0,1,1);animation-name:",function(e){return e.animationName},";"),Dv=function(e){var t=e.height,n=e.width,r=e.color,a=void 0===r?"#424d57":r;return Rt.createElement("svg",{x:"0px",y:"0px",viewBox:"0 0 60 40",height:t,width:n,fill:a},Rt.createElement(Rv,{cx:"9",cy:"20",r:"6",animationName:Mv}),Rt.createElement(Rv,{cx:"30",cy:"20",r:"6",animationName:Nv}),Rt.createElement(Rv,{cx:"51",cy:"20",r:"6",animationName:zv}))},Lv=Object(Dh.A)("overflow:hidden;margin-bottom:0;"),Bv=function(e){var t=e.avatar;return Rt.createElement(Dh.k,{avatar:t,className:Lv},Rt.createElement(Dh.j,null,Rt.createElement(Dh.c,null,Rt.createElement(Dh.o,null,Rt.createElement(Dv,{height:"16px",width:"24px"})))))},qv=function(e){var t=e.text,n=e.mobile,r=e.onClose,a=e.onShow,i=e.onMaximize,o=e.onResize,c=e.screenPosition,s=e.defaultShowIndicator,u="right"===c,l=Rt.useState(s),d=l[0],p=l[1];return Rt.useEffect(function(){if(a(),s){var e=setTimeout(function(){return p(!1)},2e3);return function(){return clearTimeout(e)}}},[]),Rt.createElement(vv,null,Rt.createElement(Yh.a,{appear:!0,component:null},d&&Rt.createElement(Cv,{noMargin:!0,reverse:u,onExited:o},Rt.createElement(Dh.h,null,Rt.createElement(Cv,{noMargin:!0,reverse:u},Rt.createElement(hv,{mobile:n,onClick:r})),Rt.createElement(gv,{onClick:i},Rt.createElement(Dv,{width:"32px",height:"21px"})))),!d&&Rt.createElement(Cv,{reverse:u,delay:400,onEnter:o},Rt.createElement(Dh.h,null,Rt.createElement(Cv,{noMargin:!0,reverse:u},Rt.createElement(hv,{mobile:n,onClick:r})),Rt.createElement(gv,{onClick:i},t)))))},Uv=zt(function(e){return{testGroup:jn(e),isNonProduction:xn(e)}})(function(e){var t=e.children,n=e.testGroup,r=e.isNonProduction,a=e.includeProduction,i="A"===n;return t(void 0!==a&&a?i:r&&i)}),Fv=Object(Dh.E)("div",{displayName:"Minimized",section:!0,target:"extks10"})("padding:",function(e){return"circle"===e.minimizedType?"0.5em 0.5em 1em 1em":"0.8em 0.8em 0 0.8em"},";position:absolute;bottom:0;z-index:2;will-change:tranform,opacity;backface-visibility:hidden;",function(e){return e.position},":0;"),Vv=Object(Dh.E)("div",{displayName:"MinimizedBubble",section:!0,target:"extks11"})("background:#427fe1;display:flex;width:60px;height:60px;box-shadow:0 4px 8px rgba(0,0,0,0.3);border-radius:50%;justify-content:center;&:hover{cursor:pointer;}"),Gv=Object(Dh.E)("div",{displayName:"MinimizedBar",section:!0,target:"extks12"})("width:255px;height:50px;box-shadow:0 0 12px rgba(0,0,0,0.3);background:#fff;border-radius:8px 8px 0 0;display:flex;padding:0 0.9em;align-items:center;&:hover{cursor:pointer;}"),Hv=Object(Dh.E)(Wh,{target:"extks13"})("flex-grow:1;font-weight:700;font-size:0.9em;"),Wv=Object(Dh.A)("padding:0;"),Yv=Object(Dh.A)("position:absolute;right:0;top:0;"),Jv=Object(Dh.A)("align-items:flex-end;"),Qv=function(e){var t=e.invitationText,n=e.invitationHidden;return Boolean(t&&!n)},Kv=function(e){function t(){return e.apply(this,arguments)||this}Object(Rh.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){Qv(e)!==Qv(this.props)&&this.props.onResize()},n.render=function(){var e=this.props,t=e.dir,n=e.avatar,r=e.invitationText,a=e.minimizedType,i=e.minimizedText,o=e.hideInvitation,c=e.innerRef,s=e.mobile,u=e.onMaximize,l=e.unseenCount,d=e.screenPosition,p=e.onResize,f=e.invitationReceivedFirstTime,m=e.invitationDisplayed,h=e.handleInvitationDisplayed,v=r?function(e,t){var n=t.split(" "),r=0,a=!1,i=n.map(function(t){return!a&&t.length+r<e?(r+=t.length+1,t):(a=!0,null)}).filter(function(e){return"string"===typeof e}).join(" ");return a?i+"...":i}(s?70:200,r):null,b=Qv(this.props);return Rt.createElement(Fv,{dir:t,innerRef:c,minimizedType:a,position:d},Rt.createElement(Dh.h,null,b&&Rt.createElement(Dh.s,{reverse:"right"===d},Rt.createElement(Uv,{includeProduction:!0},function(e){return e?Rt.createElement(qv,{mobile:s,onShow:h,onResize:p,onClick:u,onMaximize:u,onClose:o,text:v,screenPosition:d,defaultShowIndicator:f&&!m}):Rt.createElement(Tv,{mobile:s,onClick:u,onClose:o,text:v,screenPosition:d})})),Rt.createElement(Dh.s,{reverse:"right"===d,className:Jv,dir:"circle"===a?"ltr":t},"circle"===a&&Rt.createElement(Rt.Fragment,null,Rt.createElement(Vv,{hasAvatar:Boolean(n),onClick:u},l>0?Rt.createElement(Hh,{className:Yv},l<99?l:"99+"):null,Rt.createElement(Dh.i,{className:Wv},n?Rt.createElement(Dh.b,{imgUrl:n,size:"60px"}):Rt.createElement(Dh.f,null)))),"bar"===a&&Rt.createElement(Gv,{onClick:u},l>0?Rt.createElement(Hh,{className:Yv},l<99?l:"99+"):null,Rt.createElement(Hv,{ellipsis:!0},i),Rt.createElement(Dh.f,{noShrink:!0})))))},t}(Rt.Component);Kv.defaultProps={innerRef:m.P,onResize:m.P};var Zv=zt(function(e){var t=function(){yr(e)},n=function(){var t;(t=e).setApplicationState({invitation:Object(h.a)({},t.getApplicationState().invitation,{displayed:!0})})};return function(e){var r=e.getApplicationState().mobile,a=tn(e),i=hn("liveChatChatId",e),o=i.invitationHidden,c=i.invitationDisplayed,s=i.minimizedText,u=i.invitationText,l=i.unseenCount,d=i.avatar,p=i.invitationReceivedFirstTime;return{avatar:d,invitationText:u,minimizedType:a,minimizedText:s,hideInvitation:t,invitationHidden:o,invitationDisplayed:c,mobile:r,unseenCount:l,invitationReceivedFirstTime:p,handleInvitationDisplayed:n,screenPosition:nn(e)}}})(Kv),Xv=n(57),$v=n(200),eb=n(90),tb=n(109);var nb=function(e,t){Rt.useEffect(function(){var n=t.current;if(n){var r=function(e){e.preventDefault()};return n.addEventListener(e,r,{passive:!1}),function(){return n.removeEventListener("touchmove",r)}}},[])},rb=0,ab=null,ib=function(){ab="keyboard"},ob=function(){ab="click"},cb=function(){return Rt.useEffect(function(){return 0===rb&&(document.addEventListener("keydown",ib,!0),document.addEventListener("mousedown",ob,!0),document.addEventListener("touchstart",ob,!0)),rb++,function(){--rb>0||(ab=null,document.removeEventListener("keydown",ib,!0),document.removeEventListener("mousedown",ob,!0),document.removeEventListener("touchstart",ob,!0))}},[]),Rt.useCallback(function(){return ab},[])},sb=function(e){return Object(Xv.a)(function(){var t=e,n=[];return{subscribe:function(e){return n.push(e),function(){n.splice(n.indexOf(e))}},next:function(e){t=e,n.forEach(function(t){return t(e)})},get:function(){return t}}})},ub=function(e){var t=Rt.useState(e.get()),n=t[0],r=t[1];return Rt.useEffect(function(){var t=e.get();return n!==t&&r(t),e.subscribe(r)},[]),n},lb=function(e,t){var n=Rt.useRef(!1);return Rt.useEffect(function(){if(n.current){var e=n.current;n.current=!1,e()}}),Rt.useCallback(function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];n.current=function(){return e.apply(void 0,r)}},t)},db={duration:0},pb=["End","Home","Space","PageUp","PageDown","ArrowUp","ArrowDown"];var fb=function(e,t){void 0===t&&(t={});var n=t,r=n.firstItemKey,a=n.lastItemKey,i=n.topThreshold,o=void 0===i?20:i,c=n.bottomThreshold,s=void 0===c?20:c,u=n.initialScrollTop,l=n.onIsUserScrollingChanged,d=n.onIsScrolledToTopChanged,p=n.onIsScrolledToBottomChanged,f=n.isScrollingChangedTimeout,h=void 0===f?300:f,v=Rt.useRef(0),b=Rt.useRef(0),g=Rt.useRef(!1),y=Rt.useRef(!1),j=Rt.useRef(!1),O=Rt.useRef(!1),x=Rt.useRef(null),_=Rt.useRef({timeout:0,value:!1}),w=Object(tb.a)("y",e),C=function(){O.current=!0,w.apply(void 0,arguments)},E=Object(eb.a)(r),I=Object(eb.a)(a),S=Rt.useCallback(function(){return O.current=!1},[]),k=Rt.useCallback(function(){return y.current},[]),T=Rt.useCallback(function(){return j.current},[]),A=Rt.useCallback(function(e){return C(0,e)},[w]),P=Rt.useCallback(function(t){if(e.current){var n=e.current,r=n.scrollHeight,a=n.clientHeight;C(r-a,t)}},[C]),M=Rt.useCallback(function(e){return x.current=e},[]),N=Rt.useCallback(function(){return!!e.current&&e.current.scrollHeight>e.current.clientHeight},[]),z=Rt.useCallback(function(){_.current.value||(_.current.value=!0,l&&l(_.current.value)),clearTimeout(_.current.timeout),_.current.timeout=window.setTimeout(function(){_.current.value&&(_.current.value=!1,l&&l(_.current.value))},h)},[h]),R=Rt.useCallback(function(){var t=e.current,n=t.scrollTop,r=t.scrollHeight,a=v.current>n,i=v.current<n,c=v.current===n,u=r<b.current;if(v.current=n,b.current=r,N()&&!O.current&&z(),!c||!g.current){var l=y.current&&a,f=j.current&&(i||u),m=l||Object(Na.e)(t,o),h=f||Object(Na.d)(t,s);d&&(!y.current&&m?d(!0):y.current&&!m&&d(!1)),p&&(!j.current&&h?p(!0):j.current&&!h&&p(!1)),y.current=m,j.current=h}},[d,p,z]),D=function(){C(x.current.offsetTop,db),x.current=null},L=function(){x.current?D():(E!==r&&function(){var t=e.current.scrollHeight,n=b.current-v.current;C(t-n,db)}(),I!==a&&j.current&&P())};return Rt.useEffect(function(){var e=function(e){Object(m.z)(e.key,pb)&&S()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}},[]),Rt.useEffect(function(){!1===g.current?(x.current?D():C("number"===typeof u?u:e.current.scrollHeight,db),R(),g.current=!0):L()}),{scrollTo:C,scrollToTop:A,scrollToBottom:P,getIsOnTop:k,getIsOnBottom:T,getIsScrollable:N,setScrollTargetNode:M,onScroll:R,onWheel:S,onTouchStart:S}};var mb=function(e){Rt.useEffect(e,[])},hb=function(e,t){var n=new Date(e);return n.toLocaleDateString()===(new Date).toLocaleDateString()?t.today(n):function(e){var t=new Date;return t.setDate(t.getDate()-1),e.toLocaleDateString()===t.toLocaleDateString()}(n)?t.yesterday(n):n.toLocaleDateString([],{year:"numeric",month:"2-digit",day:"2-digit"})},vb=function(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window},bb=function(e,t,n){var r=Object(m.qb)(t).sort(function(e,t){return e.timestamp-t.timestamp}),a=Object(m.l)(function(t){return t.node===e},r);if(a>-1)return{currentTimestamp:r[a].timestamp,previousTimestamp:a>0?r[a-1].timestamp:n}},gb=function(e,t){var n=Rt.useRef({beginingOfTime:t,currentTimestamp:0,subscribers:[],dividers:{}}),r=function(e){var t=e.rootRef,n=e.rootMargin,r=e.threshold,a=e.intersectionHandler;if(vb()){var i=Rt.useRef(null),o=Rt.useRef(a),c=Rt.useRef([]);return Rt.useEffect(function(){o.current=a}),Rt.useEffect(function(){return i.current=new IntersectionObserver(function(e,t){o.current&&o.current(e,t)},{root:t.current,rootMargin:n,threshold:r}),c.current.forEach(function(e){return i.current.observe(e)}),c.current=[],function(){return i.current.disconnect()}},[]),Object(Xv.a)(function(){return{add:function(e){i.current?i.current.observe(e):c.current.push(e)},remove:function(e){i.current?i.current.unobserve(e):c.current=c.current.filter(function(t){return t!==e})}}})}}({rootRef:e,intersectionHandler:function(e){var t=function(e,t,n){var r=e.filter(function(e){return e.isIntersecting}).sort(function(e,t){return e.boundingClientRect.top-t.boundingClientRect.top})[0];if(r){var a=bb(r.target,t,n);return a&&a.previousTimestamp}var i=e.filter(function(e){return e.boundingClientRect.top<=e.rootBounds.top}).sort(function(e,t){return e.boundingClientRect.top-t.boundingClientRect.top}).reverse()[0];if(i){var o=bb(i.target,t,n);return o&&o.currentTimestamp}}(e,n.current.dividers,n.current.beginingOfTime);if(t){var r={timestamp:t,direction:t>n.current.currentTimestamp?"down":"up"};n.current.currentTimestamp=t,n.current.subscribers.forEach(function(e){return e(r)})}},threshold:.2});return Rt.useEffect(function(){var e=Object(m.qb)(n.current.dividers).map(function(e){return e.timestamp}),t=Math.max.apply(Math,e.concat([n.current.beginingOfTime]));n.current.currentTimestamp=t,n.current.subscribers.forEach(function(e){return e({timestamp:t,direction:"up"})})},[]),Object(Xv.a)(function(){return{add:function(e){n.current.dividers[e.timestamp]=e,r&&r.add(e.node)},remove:function(e){r&&r.remove(e.node),delete n.current.dividers[e.timestamp]},subscribe:function(e){n.current.subscribers.push(e)},unsubscribe:function(e){n.current.subscribers=n.current.subscribers.filter(function(t){return t!==e})},setBeginingOfTime:function(e){n.current.beginingOfTime=e},currentTimestamp:function(){return n.current.currentTimestamp}}})},yb=Rt.createContext(null),jb=function(e){var t=e.children,n=e.rootRef,r=e.beginingOfTime,a=gb(n,r);return Rt.useEffect(function(){a.setBeginingOfTime(r)}),Rt.createElement(yb.Provider,{value:a},t)},Ob=Object(Dh.E)("span",{displayName:"DividerLabel",target:"eceo2x80"})("padding:4px 8px;font-size:12px;"),xb=Object(Dh.E)(Ob,{target:"e1g4em790"})("color:#424d57;overflow:hidden;border:1px solid #e7e7e7;background-color:#fcfcfc;border-radius:6px;padding:2px 6px;transition:opacity 150ms linear;",function(e){return!e.visible&&Object(Dh.A)("opacity:0;pointer-events:none;")}),_b=Object(Dh.E)("span",{target:"e1g4em791"})(),wb=function(e){return Object(Dh.A)("&-enter ",_b,",&-exit ",_b,"{position:relative;}&-enter ",_b,"{top:","up"===e?"-2em":"2em",";}&-enter-active ",_b,"{top:0;transition:top ",200,"ms ease-out;}&-exit{opacity:1;}&-exit-active{opacity:0;transition:opacity ",200,"ms ease-out;}&-exit ",_b,"{top:0;position:relative;}&-exit-active ",_b,"{top:","up"===e?"2em":"-2em",";transition:top ",200,"ms ease-out;}")},Cb=function(e){var t=e.isUserScrollingSource,n=Object(v.a)(e,["isUserScrollingSource"]),r=ub(t);if(!vb())return null;var a=Rt.useContext(yb);if(!a)throw new Error("DividerContext is missing a Provider");var i=Rt.useState({direction:"up",timestamp:a.currentTimestamp()}),o=i[0],c=i[1];return Rt.useEffect(function(){a.subscribe(c);var e=a.currentTimestamp();return e!==o.timestamp&&c({direction:"up",timestamp:e}),function(){return a.unsubscribe(c)}},[]),o.timestamp?Rt.createElement(Ft,null,function(e){var t=hb(o.timestamp,{today:function(){return e("today")},yesterday:function(){return e("yesterday")}});return Rt.createElement(Yh.a,{component:null,childFactory:function(e){return Rt.cloneElement(e,{classNames:wb(o.direction)})}},Rt.createElement(yv.a,{key:t,classNames:wb(o.direction),timeout:200},Rt.createElement(xb,Object(h.a)({},n,{visible:r}),Rt.createElement(_b,null,t))))}):null},Eb=function(e){var t=Rt.useContext(yb);if(!t)throw new Error("DividerContext is missing a Provider");Rt.useEffect(function(){var n={timestamp:e.timestamp,node:e.nodeRef.current};return t.add(n),function(){t.remove(n)}},[])},Ib=Object(Dh.E)("div",{target:"ehmqpie0"})("height:20px;margin:16px -0.5em;text-align:center;overflow:hidden;"),Sb=Object(Dh.E)(Ob,{target:"ehmqpie1"})("position:relative;padding:0 8px;&:before,&:after{content:'';width:50vw;height:0;border-top:1px solid;border-top-color:inherit;position:absolute;top:50%;}&:before{right:100%;}&:after{left:100%;}"),kb=function(e){var t=e.timestamp,n=Rt.useRef(null);return Eb({timestamp:t,nodeRef:n}),Rt.createElement(Ft,null,function(e){return Rt.createElement(Ib,{innerRef:n},Rt.createElement(Sb,null,hb(t,{today:function(e){return e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},yesterday:function(){return e("yesterday")}})))})},Tb=function(){return!0},Ab=zt(function(e,t){var n=t.name,r=t.condition,a=void 0===r?Tb:r;return function(e){var t=Jt(n,e),r=t.enabled,i=Object(v.a)(t,["enabled"]);return{shouldRender:r&&a(i)}}})(function(e){var t=e.shouldRender,n=e.children;return t?n:null}),Pb=function(e){return document.getElementById(e)},Mb=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={portal:Pb(t.props.portalId)},t}Object(Rh.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.state.portal||this.setState({portal:Pb(this.props.portalId)})},n.render=function(){var e=this.state.portal;return e?ri.createPortal(this.props.children,e):null},t}(Rt.Component);Mb.defaultProps={portalId:"app-portal"};var Nb=function(e){return{enter:300,exit:e+300}},zb=function(e){return Object(Dh.A)("&-enter{background-color:rgba(0,0,0,0);}&-enter-active,&-enter-done{background-color:rgba(0,0,0,0.5);transition:background-color ",300,"ms ","cubic-bezier(0.33, 0, 0.67, 1)",";}&-exit{background-color:rgba(0,0,0,0.5);}&-exit-active,&-exit-done{background-color:rgba(0,0,0,0);transition:background-color ",300,"ms ","cubic-bezier(0.33, 0, 0.67, 1)",";transition-delay:",e,"ms;}")},Rb=Object(Dh.A)("z-index:999;position:absolute;top:0;left:0;right:0;bottom:0;border-radius:inherit;"),Db=function(e){var t=Rt.useRef(null);return nb("touchmove",t),Rt.createElement("div",Object(h.a)({ref:t,className:Rb},e))},Lb=Rt.memo(function(e){var t=e.shown,n=e.exitDelay,r=void 0===n?100:n,a=e.onClick;return Rt.createElement(Yh.a,{component:null},t&&Rt.createElement(yv.a,{classNames:zb(r),timeout:Nb(r)},Rt.createElement(Db,{onClick:a})))}),Bb=27,qb=Object(Dh.A)("margin:0;background:transparent;"),Ub=Object(Dh.E)("div",{target:"e37ga8f0"})("position:absolute;z-index:1500;width:calc(100% - 2rem);max-width:290px;top:1em;left:50%;background:#fff;box-shadow:0 0.2em 0.8em rgba(0,0,0,0.2);padding:",function(e){return 1*e.theme.spaceBase},"px;border-radius:6px;"),Fb=Object(Dh.E)("div",{target:"e37ga8f1"})("display:flex;flex-direction:row-reverse;"),Vb=Object(Dh.E)("div",{target:"e37ga8f2"})("padding:",function(e){return 1*e.theme.spaceBase},"px;padding-top:0;"),Gb={enter:300,exit:300},Hb=Object(Dh.A)("&-enter{transform:translate(-50%,20%);opacity:0;}&-enter-active,&-enter-done{transition:transform ",300,"ms ","cubic-bezier(0.14, 0, 0, 1)",",opacity ",300,"ms ","cubic-bezier(0.14, 0, 0, 1)",";transform:translate(-50%,0%);opacity:1;}&-exit{transform:translate(-50%,0%);opacity:1;}&-exit-active,&-exit-done{transform:translate(-50%,20%);opacity:0;transition:transform ",300,"ms ","cubic-bezier(0.14, 0, 0, 1)",",opacity ",150,"ms ease-out 50ms;}"),Wb=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleKeyDown=function(e){e.keyCode===Bb&&t.props.onClose()},t}Object(Rh.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){document.addEventListener("keydown",this.handleKeyDown)},n.componentWillUnmount=function(){document.removeEventListener("keydown",this.handleKeyDown)},n.render=function(){var e=this.props,t=e.onClose,n=e.shown,r=e.children;return Rt.createElement(Mb,null,Rt.createElement(Lb,{shown:n,onClick:t,exitDelay:25}),Rt.createElement(Yh.a,{component:null},n&&Rt.createElement(yv.a,{classNames:Hb,timeout:Gb},Rt.createElement(Ub,null,Rt.createElement(Fb,null,Rt.createElement(pv,{className:qb,onClick:t},Rt.createElement(rv,null))),Rt.createElement(Vb,null,r)))))},t}(Rt.Component);Wb.defaultProps={onClose:m.P};var Yb=Wb,Jb=n(18),Qb=n(113),Kb=Object(Dh.E)("form",{displayName:"Form",section:!0,target:"e1nyj5rz0"})(),Zb=Object(Dh.E)(Wh,{target:"exlwksr0"})("margin:0;transition:height 100ms cubic-bezier(0,0,1,1);overflow:hidden;",function(e){return e.theme.typography.errorCaption}),Xb=function(e){var t=Rt.useRef(null);return Rt.useLayoutEffect(function(){var e=t.current,n=getComputedStyle(e).height;e.style.height="0",function(e){e.scrollTop}(e),e.style.height=n},[]),Rt.createElement(Zb,Object(h.a)({innerRef:t,role:"alert"},e))},$b=Object(Dh.E)("label",{target:"e2zxkge0"})("display:inline-block;width:100%;",function(e){return e.theme.typography.basic});$b.defaultProps={textWrap:!0};var eg=$b,tg=Object(Dh.E)("legend",{target:"e1kph7ea0"})("padding:0;display:inline-block;width:100%;",function(e){return e.theme.typography.basic});tg.defaultProps={textWrap:!0};var ng=tg,rg=Object(Dh.E)("div",{target:"e1oy1v900"})(function(e){return{margin:.25*e.theme.spaceBase+"px 0"}}),ag=Object(Dh.E)(pv,{target:"e1oy1v901"})("width:40px;height:40px;"),ig=Object(Dh.E)("div",{target:"e1oy1v902"})("width:",function(e){return.75*e.theme.spaceBase},"px;display:inline-block;"),og=function(e){var t=e.input,n=e.meta,r=function(e){return function(n){var r=t.value===e;n.preventDefault(),t.onChange(r?null:e)}};return Rt.createElement(rg,null,Rt.createElement(ag,{active:"good"===t.value,onClick:r("good")},Rt.createElement(ov,null)),Rt.createElement(ig,null),Rt.createElement(ag,{active:"bad"===t.value,onClick:r("bad")},Rt.createElement(cv,null)),n.error&&n.touched&&Rt.createElement(Xb,null,n.error))},cg=function(e){return Rt.createElement("svg",Object(h.a)({width:"32px",height:"32px",viewBox:"0 0 32 32",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},e),Rt.createElement("path",{d:"M21.3331175,12.2868932 C21.7144399,11.9043689 22.3326857,11.9043689 22.7140082,12.2868932 C23.0953306,12.6694174 23.0953306,13.2896117 22.7140082,13.6721359 L17.1904454,19.2131068 C16.8091229,19.5956311 16.1908771,19.5956311 15.8095546,19.2131068 L10.2859918,13.6721359 C9.90466939,13.2896117 9.90466939,12.6694174 10.2859918,12.2868932 C10.6673143,11.9043689 11.2855601,11.9043689 11.6668825,12.2868932 L16.5,17.1352427 L21.3331175,12.2868932 Z",fill:"#000000",fillRule:"nonzero"}))},sg=Object(Dh.E)("div",{target:"egtcv0s0"})("position:relative;border:1px solid #dde2e6;border-radius:4px;width:100%;background-color:#fff;transition:border-color 100ms linear;",function(e){var t=e.focused,n=e.theme.spaceBase;return Object(h.a)({margin:.25*n+"px 0"},t?{borderColor:"#2200ff"}:{})}),ug=Object(Dh.E)("select",{target:"egtcv0s1"})("width:100%;-webkit-appearance:none;font-family:inherit;background-color:transparent;border:none;:focus,:active{outline:none;border-color:#2200ff;}::-ms-expand{display:none;}",function(e){var t=e.theme,n=t.spaceBase,r=t.typography;return Object(h.a)({},r.input,{padding:n+"px",paddingRight:"32px",":-moz-focusring":{color:"transparent",textShadow:"0 0 0 "+r.input.color}})}),lg=Object(Dh.A)("position:absolute;pointer-events:none;right:0;top:calc(50% - ",16,"px);"),dg=function(e){var t=e.onFocus,n=e.onBlur,r=Object(v.a)(e,["onFocus","onBlur"]),a=Rt.useState(!1),i=a[0],o=a[1];return Rt.createElement(sg,{focused:i},Rt.createElement(ug,Object(h.a)({},r,{onFocus:function(e){t&&t(e),o(!0)},onBlur:function(e){n&&n(e),o(!1)}})),Rt.createElement(cg,{"aria-hidden":!0,focusable:"false",role:"presentation",className:lg}))},pg=function(e){var t=e.input,n=e.meta,r=Object(v.a)(e,["input","meta"]);return Rt.createElement(Rt.Fragment,null,Rt.createElement(dg,Object(h.a)({},t,r)),n.error&&n.touched&&Rt.createElement(Xb,null,n.error))},fg={},mg={errors:!0,touched:!0},hg={submitError:!0},vg={submitting:!0},bg={values:!0},gg=Object(Qb.a)(),yg={format:function(e){return Object(m.mb)(e||"")},formatOnBlur:!0},jg=Object(Dh.E)("input",{target:"e1xplv9i0"})("width:100%;border:1px solid #dddde6;border-radius:4px;-webkit-appearance:none;background-color:#fff;font-family:inherit;box-shadow:none;transition:border-color 100ms linear;:focus,:active{outline:none;border-color:#2200ff;}",function(e){var t=e.theme,n=t.spaceBase,r=t.typography;return Object(h.a)({},r.input,{padding:n+"px",margin:.25*n+"px 0"})}),Og=function(e){var t=e.input,n=e.meta,r=Object(v.a)(e,["input","meta"]),a=null;return Object(Jb.d)({subscription:vg}).submitting?a=null:n.submitError&&!n.dirtySinceLastSubmit?a=n.submitError:n.touched&&n.error&&(a=n.error),Rt.createElement(Rt.Fragment,null,Rt.createElement(jg,Object(h.a)({},t,r,{value:t.value||""})),a&&Rt.createElement(Xb,null,a))},xg=Object(Dh.E)("textarea",{target:"edsifzp0"})("width:100%;border:1px solid #dddde6;border-radius:4px;-webkit-appearance:none;background-color:#fff;font-family:inherit;box-shadow:none;transition:border-color 100ms linear;resize:none;:focus,:active{outline:none;border-color:#2200ff;}",function(e){var t=e.theme,n=t.spaceBase,r=t.typography;return Object(h.a)({},r.input,{padding:n+"px",margin:.25*n+"px 0"})}),_g=function(e){var t=e.input,n=e.meta,r=Object(v.a)(e,["input","meta"]);return Rt.createElement(Rt.Fragment,null,Rt.createElement(xg,Object(h.a)({},t,r,{value:t.value||""})),n.error&&n.touched&&Rt.createElement(Xb,null,n.error))};function wg(){return Rt.createElement("path",{stroke:"#7a8289",d:"M4,0.5 C2.06700338,0.5 0.5,2.06700338 0.5,4 L0.5,12 C0.5,13.9329966 2.06700338,15.5 4,15.5 L12,15.5 C13.9329966,15.5 15.5,13.9329966 15.5,12 L15.5,4 C15.5,2.06700338 13.9329966,0.5 12,0.5 L4,0.5 Z"})}var Cg=function(e){return Rt.createElement("path",Object(h.a)({fill:"#2200ff",d:"M4,0 L12,0 C14.209139,-4.4408921e-16 16,1.790861 16,4 L16,12 C16,14.209139 14.209139,16 12,16 L4,16 C1.790861,16 0,14.209139 0,12 L0,4 C-4.4408921e-16,1.790861 1.790861,0 4,0 Z"},e))},Eg=function(e){return Rt.createElement("polyline",Object(h.a)({stroke:"#fff",strokeDasharray:"10",strokeLinecap:"round",strokeLinejoin:"round",points:"5 7.90626754 7.06606709 10 12 5"},e))},Ig=Object(Dh.A)("animation-iteration-count:1;animation-timing-function:cubic-bezier(0,0,1,1);animation-fill-mode:forwards;animation-duration:300ms;"),Sg=Object(Dh.D)("0%{opacity:0;}33.33%{opacity:1;}100%{opacity:1;}"),kg=Object(Dh.D)("0%{stroke-dashoffset:10;}33.33%{stroke-dashoffset:10;}77.78%{stroke-dashoffset:0;}100%{stroke-dashoffset:0;}"),Tg=function(e){var t=e.className,n=e.checked,r=e.focused,a=Object(v.a)(e,["className","checked","focused"]);return Rt.createElement("svg",Object(h.a)({width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",fillRule:"evenodd",className:Object(Dh.B)(Object(Dh.A)("border-radius:4px;background-color:#fff;"),r&&Object(Dh.A)("box-shadow:0px 0px 6px 1px ","#3b99fc",";"),t)},a),Rt.createElement(wg,null),n&&Rt.createElement(Rt.Fragment,null,Rt.createElement(Cg,{className:Object(Dh.A)(Ig," animation-name:",Sg,";")}),Rt.createElement(Eg,{className:Object(Dh.A)(Ig," animation-name:",kg,";")})))},Ag=Object(Dh.E)("input",{target:"e81sjne0"})("opacity:0;margin:0;padding:0;height:100%;width:100%;position:absolute;"),Pg=function(e){var t=e.className,n=e.defaultChecked,r=void 0!==n&&n,a=e.checked,i=e.id,o=e.onBlur,c=void 0===o?m.P:o,s=e.onChange,u=void 0===s?m.P:s,l=e.onFocus,d=void 0===l?m.P:l,p=Object(v.a)(e,["className","defaultChecked","checked","id","onBlur","onChange","onFocus"]),f=Rt.useState(void 0!==a?a:r),b=f[0],g=f[1],y=Rt.useState(!1),j=y[0],O=y[1],x=cb();void 0!==a&&b!==a&&g(a);return Rt.createElement("label",{className:Object(Dh.B)(Object(Dh.A)("display:inline-block;position:relative;height:16px;width:16px;"),t)},Rt.createElement(Ag,Object(h.a)({type:"checkbox",checked:b,id:i,onChange:function(e){u(e),void 0===a&&g(function(e){return!e})},onFocus:function(e){d(e),"keyboard"===x()&&O(!0)},onBlur:function(e){c(e),O(!1)}},p)),Rt.createElement(Tg,{"aria-hidden":!0,checked:b,focused:j,focusable:"false",role:"presentation",className:Object(Dh.A)("vertical-align:middle;")}))},Mg=function(e){var t=e.color,n=void 0===t?"#7a8289":t,r=Object(v.a)(e,["color"]);return Rt.createElement("circle",Object(h.a)({fillRule:"nonzero",fill:n,cx:"8",cy:"8",r:"3.5"},r))},Ng=function(e){var t=e.color,n=void 0===t?"#7a8289":t,r=Object(v.a)(e,["color"]);return Rt.createElement("circle",Object(h.a)({fillRule:"nonzero",cx:"8",cy:"8",r:"7.5",stroke:n,strokeWidth:"1"},r))},zg=Object(Dh.D)("0%{transform:scale(0,0);}50%{transform:scale(1.1,1.1);}66.67%{transform:scale(1.1,1.1);}83.33%{transform:scale(0.95,0.95);}100%{transform:scale(1,1);}"),Rg=Object(Dh.D)("0%{opacity:0;}83.33%{opacity:1;}100%{opacity:1;}"),Dg=Object(Dh.A)("animation-duration:200ms;animation-iteration-count:1;animation-fill-mode:forwards;animation-timing-function:cubic-bezier(0,0,0.58,1);"),Lg=function(e){var t=e.className,n=e.checked,r=e.focused,a=Object(v.a)(e,["className","checked","focused"]);return Rt.createElement("svg",Object(h.a)({width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",fillRule:"evenodd",className:Object(Dh.B)(Object(Dh.A)("border-radius:50%;background-color:#fff;"),r&&Object(Dh.A)("box-shadow:0px 0px 6px 1px ","#3b99fc",";"),t)},a),Rt.createElement(Ng,null),n&&Rt.createElement(Rt.Fragment,null,Rt.createElement(Ng,{color:"#2200ff",className:Object(Dh.A)(Dg," animation-name:",Rg,";")}),Rt.createElement(Mg,{color:"#2200ff",className:Object(Dh.A)(Dg," animation-name:",zg,";transform-origin:50% 50%;")})))},Bg=Object(Dh.E)("input",{target:"e12lg4gr0"})("opacity:0;margin:0;padding:0;height:100%;width:100%;position:absolute;"),qg=function(e){var t=e.className,n=e.defaultChecked,r=void 0!==n&&n,a=e.checked,i=e.id,o=e.onBlur,c=void 0===o?m.P:o,s=e.onChange,u=void 0===s?m.P:s,l=e.onFocus,d=void 0===l?m.P:l,p=Object(v.a)(e,["className","defaultChecked","checked","id","onBlur","onChange","onFocus"]),f=Rt.useState(void 0!==a?a:r),b=f[0],g=f[1],y=Rt.useState(!1),j=y[0],O=y[1],x=cb();void 0!==a&&b!==a&&g(a);return Rt.createElement("label",{className:Object(Dh.B)(Object(Dh.A)("display:inline-block;position:relative;height:16px;width:16px;"),t)},Rt.createElement(Bg,Object(h.a)({type:"radio",checked:b,id:i,onChange:function(e){u(e),void 0===a&&g(function(e){return!e})},onBlur:function(e){c(e),O(!1)},onFocus:function(e){d(e),"keyboard"===x()&&O(!0)}},p)),Rt.createElement(Lg,{"aria-hidden":!0,checked:b,focused:j,focusable:"false",role:"presentation",className:Object(Dh.A)("vertical-align:middle;")}))},Ug=Object(Dh.A)("top:-1px;"),Fg=function(e){var t=e.input,n=t.type,r=Object(v.a)(t,["type"]),a=e.id,i="checkbox"===n?Pg:qg;return Rt.createElement(i,Object(h.a)({id:a,className:Object(Dh.A)(Ug," flex-shrink:0;")},r))},Vg=n(27),Gg=Object(Dh.D)("0%{transform:rotate(-90deg);}100%{transform:rotate(270deg);}"),Hg=Object(Dh.E)("circle",{target:"e5pj4iq0"})("animation-duration:1s;transform-origin:center;animation-name:",function(e){return t=e.animationFactor,Object(Dh.D)("0%{stroke-dasharray:",22*t," ",1e3*t,";}50%{stroke-dasharray:",88*t," ",1e3*t,";}100%{stroke-dasharray:",22*t," ",1e3*t,";}");var t},",",Gg,";animation-iteration-count:infinite;animation-timing-function:linear;"),Wg={r:"28",cx:"32",cy:"32",fill:"none",strokeLinecap:"round"},Yg={small:{sideLength:16,strokeWidth:2},medium:{sideLength:32,strokeWidth:4},large:{sideLength:56,strokeWidth:4}},Jg=Object(Vg.b)(function(e){var t=e.size,n=e.adjustToColor,r=void 0===n?"#ffffff":n,a=e.theme,i=Object(v.a)(e,["size","adjustToColor","theme"]),o=Rn(r)?"rgba(0, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)",c=Rn(r)?a.colors.cta:"#fff",s=Yg[t],u=s.sideLength,l=s.strokeWidth;return Rt.createElement("svg",Object(h.a)({height:u+"px",width:u+"px",viewBox:"0 0 64 64"},i),Rt.createElement("circle",Object(h.a)({},Wg,{strokeWidth:l,stroke:o,vectorEffect:"non-scaling-stroke"})),Rt.createElement(Hg,Object(h.a)({},Wg,{strokeWidth:l,stroke:c,vectorEffect:"non-scaling-stroke",animationFactor:u/56})))}),Qg=Object(Dh.E)("button",{displayType:"Button",target:"esv0owm0"})("color:#fff;border-radius:4px;font-size:inherit;font-weight:bold;border:0;font-family:inherit;width:100%;max-width:320px;flex-shrink:0;cursor:pointer;display:flex;justify-content:center;align-items:center;",function(e){var t=e.capitalize,n=e.color,r=e.disabled,a=e.dark,i=e.theme,o=i.spaceBase,c=i.typography;return Object(h.a)({},c.basicContrast,{padding:1.5*o+"px",backgroundColor:""+(a?Object(O.a)(.2,n):n)},r?{":hover":{cursor:"default"}}:{},t?{textTransform:"capitalize"}:{})}),Kg=Object(Dh.E)("div",{target:"esv0owm1"})("display:flex;margin-left:0.5em;"),Zg=Object(Vg.b)(function(e){var t=e.children,n=e.destructive,r=e.disabled,a=void 0!==r&&r,i=e.pending,o=void 0!==i&&i,c=e.theme,s=Object(v.a)(e,["children","destructive","disabled","pending","theme"]),u=n?c.colors.destructiveColor:c.colors.cta;return Rt.createElement(Qg,Object(h.a)({},s,{disabled:a,dark:o||a,color:u}),t,o&&Rt.createElement(Kg,null,Rt.createElement(Jg,{size:"small",adjustToColor:u})))});var Xg=function(e){var t=e.label,n=e.submitting,r=Object(v.a)(e,["label","submitting"]);return Rt.createElement(Zg,Object(h.a)({pending:n,disabled:n,type:"submit"},r),Rt.createElement("span",null,t))},$g=function(){return Rt.createElement(Jb.c,{subscription:hg},function(e){var t=e.submitError;return t?Rt.createElement(Xb,null,t):null})},ey=document.hasFocus?function(){return document.hasFocus()}:function(){return!1},ty=function(e){return void 0===e&&(e=/mobile/gi.test(navigator.userAgent)),!e&&ey()},ny=Object(Dh.E)("div",{target:"e1n7ru1l0"})("text-align:center;"),ry=function(e){var t=e.id,n=e.children,r=e.mobile,a=e.initialValues,i=e.submitLabel,o=e.validate,c=e.onSubmit,s="form_"+t;return Rt.useEffect(function(){ty(r)&&function(e){var t=Object(Qb.b)(e)();if(t.length){var n=t[0],r=n.tagName;("INPUT"===r&&!Object(m.z)(n.type,["checkbox","radio"])||"TEXTAREA"===r)&&n.focus({preventScroll:!0})}}(s)},[]),Rt.createElement(Jb.b,{decorators:[gg],initialValues:a,onSubmit:c,subscription:fg,validate:o},function(e){var t=e.handleSubmit;return Rt.createElement(Kb,{name:s,onSubmit:t},n,Rt.createElement($g,null),Rt.createElement(ny,null,Rt.createElement(Jb.c,{subscription:vg},function(e){var t=e.submitting;return Rt.createElement(Xg,{submitting:t,label:i})})))})},ay=Object(Dh.E)("div",{target:"eptvlbh0"})("display:flex;flex-direction:column;width:100%;margin-bottom:",function(e){return e.theme.spaceBase+"px"},";"),iy=n(26),oy=n.n(iy),cy=function(e){return e.stopPropagation()},sy=Object(Dh.E)("a",{target:"e153l5x70"})("color:inherit;"),uy=function(e){return Rt.createElement(sy,Object(h.a)({},e,{onClick:cy,rel:"nofollow noopener",target:"_blank",textWrap:!0}))},ly=Object(Dh.E)("span",{target:"efoufa70"})(function(e){return e.theme.typography.errorCaption}),dy=function(){return Rt.createElement(ly,{"aria-hidden":!0},"\xa0","*")},py=function(e){var t=e.children,n=e.htmlFor,r=e.showRequiredMark,a=void 0!==r&&r;return Rt.createElement(eg,{htmlFor:n},Rt.createElement(oy.a,{component:uy},t),a&&Rt.createElement(dy,null))},fy=function(e){var t=e.label,n=e.name,r=e.required;return Rt.createElement(ay,null,t&&Rt.createElement(py,{showRequiredMark:r,htmlFor:n},t),Rt.createElement(Jb.a,Object(h.a)({},yg,{component:_g,name:n,id:n})))},my=Object(Dh.E)("div",{target:"e1mnxbjv0"})("display:flex;justify-content:center;"),hy=Object(Dh.E)("div",{target:"e1mnxbjv1"})("background-color:#dde2e6;border-radius:50%;display:flex;justify-content:center;align-items:center;",function(e){return{width:e.size,height:e.size}},";"),vy=function(e){var t=e.size,n=void 0===t?"64px":t,r=e.children,a=Object(v.a)(e,["size","children"]);return Rt.createElement(my,null,Rt.createElement(hy,Object(h.a)({size:n},a),r))},by="DISABLE_PERMANENTLY",gy="TOOLTIP_HOVER_START",yy="TOOLTIP_HOVER_END",jy="TRIGGER_HOVER_START",Oy="TRIGGER_HOVER_END",xy=Object(Dh.E)("div",{displayName:"Tooltip",target:"ezqijrk0"})("display:inline-block;background-color:#424d57;color:#fff;padding:1em;position:fixed;border-radius:8px;z-index:9;font-size:0.8em;white-space:nowrap;font-weight:normal;margin-top:0.5em;border-bottom:1px solid #000;",function(e){var t=e.position;return{left:t.left?t.left-10+"px":"auto",right:t.right?t.right-10+"px":"auto",top:t.top+"px"||"auto"}},";"),_y=Object(Dh.E)("svg",{displayName:"TooltipArrow",target:"ezqijrk1"})("position:absolute;fill:#424d57;margin-top:-1.5em;",function(e){var t=e.position,n=e.horizontalFactor;return{left:t.left?n-10+"px":"auto",right:t.right?n-10+"px":"auto",top:"0"}},";"),wy=Object(Dh.E)("div",{target:"ezqijrk2"})("position:relative;"),Cy=function(e){var t=e.getBoundingClientRect(),n=t.left,r=t.right,a=t.bottom,i=window,o=i.innerWidth,c=i.pageXOffset,s=a+pageYOffset;return n+c>o/2?{top:s,right:o-(r+c)}:{top:s,left:n+c}},Ey={permanentlyDisabled:!1,triggerHovered:!1,tooltipHovered:!1,triggerData:null},Iy=function(e,t){switch(t.type){case by:return Object(h.a)({},Ey,{permanentlyDisabled:!0});case gy:return Object(h.a)({},e,{tooltipHovered:!0});case yy:return Object(h.a)({},e,{tooltipHovered:!1});case jy:return Object(h.a)({},e,{triggerHovered:!0,triggerData:{position:t.position,targetWidth:t.targetWidth}});case Oy:return Object(h.a)({},e,{triggerHovered:!1});default:return e}};var Sy=function(e){var t=e.children,n=e.label,r=e.disabled,a=void 0!==r&&r,i=Object(v.a)(e,["children","label","disabled"]),o=Rt.useReducer(Iy,Ey),c=o[0],s=c.tooltipHovered,u=c.triggerHovered,l=c.triggerData,d=c.permanentlyDisabled,p=o[1];return a&&u&&p({type:Oy}),Rt.createElement(Rt.Fragment,null,Rt.createElement("div",Object(h.a)({className:Object(Dh.A)("display:flex;align-items:stretch;flex-shrink:0;"),onMouseEnter:function(e){var t=e.currentTarget;a||d||p({type:jy,position:Cy(t),targetWidth:t.offsetWidth})},onMouseLeave:function(){return p({type:Oy})},onTouchStart:function(){return p({type:by})}},i),t),(u||s)&&l&&Rt.createElement(Mb,{portalId:"tooltip-portal"},Rt.createElement(xy,{onMouseEnter:function(){return p({type:gy})},onMouseLeave:function(){return p({type:yy})},position:l.position},Rt.createElement(wy,null,Rt.createElement(_y,{horizontalFactor:l.targetWidth/2,height:"10",position:l.position,width:"16"},Rt.createElement("polygon",{points:"0,10 16,10 8,0"})),n))))},ky=Object(Dh.A)("text-align:center;"),Ty=Object(Dh.A)("font-size:inherit;"),Ay=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={opened:!1,selectedRate:t.props.chatRate},t.handleRate=Object(m.L)(function(e){return function(){var n=t.state.selectedRate===e,r=n?null:e;t.rateChat(r),t.setState({selectedRate:r,opened:!n})}}),t.closeModal=function(){t.setState({opened:!1})},t.validate=function(e){if(!e.comment)return{comment:t.props.localize("survey_fill_in_required_fields")}},t.handleSubmit=function(e){t.props.rateChat({comment:e.comment}),t.closeModal()},t.getRateButtonProps=function(e){var n=t.props,r=n.chatRate;return{disabled:n.disabled,active:r===e,onClick:t.handleRate(e)}},t}Object(Rh.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){e.chatRate!==this.props.chatRate&&this.setState({rate:this.props.chatRate})},n.rateChat=function(e){var t=this;this.props.rateChat({rate:e}).catch(function(){return t.setState({rate:t.props.chatRate})})},n.render=function(){var e=this.state,t=e.opened,n=e.selectedRate,r=this.props,a=r.disabled,i=r.chatRate,o=r.mobile,c=r.localize;return Rt.createElement(Rt.Fragment,null,Rt.createElement(Sy,{disabled:a,label:c("good"===i?"rate_me_cancel_tooltip":"rate_me_good_tooltip")},Rt.createElement(pv,this.getRateButtonProps("good"),Rt.createElement(ov,{className:Ty}))),Rt.createElement(Sy,{disabled:a,label:c("bad"===i?"rate_me_cancel_tooltip":"rate_me_bad_tooltip")},Rt.createElement(pv,this.getRateButtonProps("bad"),Rt.createElement(cv,{className:Ty}))),Rt.createElement(Yb,{shown:t,onClose:this.closeModal},Rt.createElement(vy,null,"good"===n?Rt.createElement(ov,null):Rt.createElement(cv,null)),Rt.createElement("p",{className:ky},c("rate_me_add_comment")),Rt.createElement(ry,{id:"rate_comment",mobile:o,onSubmit:this.handleSubmit,submitLabel:c("button_add_feedback"),validate:this.validate},Rt.createElement(Dh.s,null,Rt.createElement(fy,{name:"comment",required:!0,mobile:o})))))},t}(Rt.Component),Py=zt(function(e,t){var n=t.chatId,r=function(t){var r=t.rate,a=t.comment,i={};return void 0!==r&&(i.rate=r),void 0!==a&&(i.rateComment=a),e.requestUpdateChat(n,{properties:i})};return function(e){var t=e.getChat(n),a=t.active,i=t.properties,o=i.ended;return{chatRate:i.rate,disabled:!o&&!a,iconTheme:e.getApplicationState("config").theme.iconTheme,mobile:e.getApplicationState("mobile"),rateChat:r,localize:e.localize}}})(Ay),My=Object(Dh.E)("div",{displayName:"Divider",target:"evqzb400"})("border-top:1px solid rgba(0,0,0,0.05);margin:0 1em;margin-bottom:-1px;z-index:10;position:relative;"),Ny=Object(Dh.E)(Dh.a,{target:"e1ac7kkx0"})("position:relative;box-shadow:0 0.15em 0.3em rgba(0,0,0,0.05);@media (max-height:330px){display:none;}"),zy=Object(Dh.E)("div",{target:"e1ac7kkx1"})("display:flex;align-items:center;position:relative;margin-right:0.5em;"),Ry=Object(Dh.A)("flex:1;justify-content:center;"),Dy=Object(Dh.E)("div",{target:"e1ac7kkx2"})("width:12px;height:12px;background:#70d526;border:2px solid #fff;position:absolute;border-radius:50%;right:0;top:0;"),Ly=Object(Dh.A)("position:absolute;bottom:0;left:50%;z-index:3;transform:translate(-50%,50%);"),By=Object(Dh.A)("margin-right:0;"),qy=Object(Dh.A)("justify-content:center;"),Uy=Object(Dh.A)(qy," min-width:auto;"),Fy=Object(Dh.E)("img",{target:"e1ac7kkx3"})("height:auto;max-height:50px;"),Vy=Object(Dh.E)("div",{target:"e1ac7kkx4"})("position:relative;z-index:3;"),Gy=Object(m.L)(function(e){return function(t){return t.position===e}}),Hy=zt(function(e,t){var n=t.chatId;return function(e){var t;return{agent:Yt(n,e),hasChatHistory:Qt(e)&&function(e){return!!e.getView("Chat").liveChatChatId.hasDividers}(e),chatActive:e.getChat(n).active,showAvatar:Jt("agentAvatar",e).enabled,logoPath:(t=Jt("logo",e).path,"https://"+Object(g.h)(t)),showLogo:Jt("logo",e).enabled&&"modern"===wn(e),showAgentBar:Tn(e)}}})(function(e){var t=e.agent,n=e.chatId,r=e.showAvatar,a=e.logoPath,i=e.showLogo,o=e.hasChatHistory,c=e.showAgentBar,s=e.isUserScrollingSource;return Rt.createElement(Vy,null,c&&Rt.createElement(Rt.Fragment,null,Rt.createElement(My,null),Rt.createElement(Ny,{noShrink:!0},Rt.createElement(Dh.s,{flexFill:!0},r&&t.avatar&&Rt.createElement(zy,null,Rt.createElement(Dh.b,{className:By,imgUrl:t.avatar}),Rt.createElement(Dy,null)),Rt.createElement(Dh.s,{flexFill:!0},Rt.createElement(Dh.h,{className:Ry,flexFill:!0},Rt.createElement(Dh.y,{ellipsis:!0},t.name),t.properties.jobTitle&&Rt.createElement(Dh.u,{ellipsis:!0},t.properties.jobTitle),Rt.createElement(Ab,{condition:Gy("bottom"),name:"rating"},Rt.createElement(Dh.s,null,Rt.createElement(Py,{chatId:n})))),Rt.createElement(Ab,{condition:Gy("right"),name:"rating"},Rt.createElement(Dh.h,{className:qy,noShrink:!0},Rt.createElement(Dh.s,null,Rt.createElement(Py,{chatId:n})))),i&&Rt.createElement(Dh.h,{className:Uy},Rt.createElement(Fy,{alt:"",src:a})))))),o&&Rt.createElement(Cb,{className:Ly,isUserScrollingSource:s}))}),Wy=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={disabled:!1},t.handleButtonClick=function(e,n){t.disableButtons();var r=t.props,a=r.card.buttons[n],i=r.eventId;(0,r.onActionButtonClick)({button:a,event:i})},t}Object(Rh.a)(t,e);var n=t.prototype;return n.parseCard=function(){var e=this.state.disabled,t=this.props,n=t.card,r=t.disabledButtons;return n.buttons?Object(h.a)({},n,{buttons:n.buttons.map(function(t){var n=t.type,a=t.value,i=Object(v.a)(t,["type","value"]),o=r&&!!r.find(function(e){return e===n});return i.disabled=o||e,"url"===n?(i.href=a,i.target="_blank",i):"phone"===n?(i.href="tel:"+a,i):i})}):n.image?Object(h.a)({},n,{image:Object(h.a)({},n.image,{link:n.image.link||n.image.url})}):n},n.disableButtons=function(){var e=this;this.setState({disabled:!0}),this._timeoutId=setTimeout(function(){e.setState({disabled:!1})},1e3)},n.componentWillUnmount=function(){clearTimeout(this._timeoutId)},n.render=function(){return Rt.createElement(Dh.d,{card:this.parseCard(this.props.card,this.state.disabled,this.props.disabledButtons),onButtonClick:this.handleButtonClick})},t}(Rt.Component),Yy=zt(function(e){return{mobile:e.getApplicationState("mobile")}},{shouldHandleStateChanges:Boolean("")})(function(e){var t=e.carousel,n=t.id,r=t.properties.cards,a=e.mobile,i=Object(v.a)(e,["carousel","mobile"]);return Rt.createElement(Dh.e,{mobile:a},r.map(function(e,t){var r=e.elements;return Rt.createElement(Wy,Object(h.a)({card:r,eventId:n,key:t},i))}))}),Jy=function(e){var t=e.richMessage,n=t.id,r=t.properties.card.elements,a=Object(v.a)(e,["richMessage"]);return Rt.createElement(Wy,Object(h.a)({card:r,eventId:n},a))},Qy=function(e){return e.stopPropagation()},Ky=Object(Dh.A)("color:inherit;"),Zy=function(e){var t=e.children,n=Object(v.a)(e,["children"]);return Rt.createElement("a",Object(h.a)({},n,{onClick:Qy,className:Ky,rel:"nofollow noopener",target:"_blank"}),t)},Xy=function(e){var t=e.text,n=e.url;return Rt.createElement(Dh.o,null,n?Rt.createElement(Zy,{href:n},t):Rt.createElement(oy.a,{component:Zy},t))},$y=function(e){var t=e.message,n=e.radiusType;return Rt.createElement(Dh.c,{radiusType:n},Rt.createElement(Xy,{text:t.properties.text,url:t.properties.url}))},ej=function(e){return e.stopPropagation()},tj=function(e){return Rt.createElement("a",Object(h.a)({},e,{onClick:ej,rel:"nofollow noopener",target:"_blank"}))},nj=Object(Dh.A)("width:100%;max-height:150px;object-fit:cover;"),rj=Object(Dh.E)("div",{target:"ew1pqaq0"})("width:100%;height:150px;margin:0 auto;"),aj=function(e){var t=e.url,n=e.srcset,r=Object(v.a)(e,["url","srcset"]);return Rt.createElement(Dh.n,r,Rt.createElement(rj,null,Rt.createElement("img",Object(h.a)({alt:"",className:nj},function(e,t){var n={src:e};return void 0!==t&&(n.srcSet=t),n}(t,n)))))},ij=function(e){var t=e.link,n=Object(v.a)(e,["link"]);return t?Rt.createElement(tj,{href:t,style:n.style},aj(n)):aj(n)},oj=function(e){function t(){return e.apply(this,arguments)||this}Object(Rh.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e,t,n){n&&this._messageListContext.scrollToBottom()},n.getSnapshotBeforeUpdate=function(e){return!this.shouldRenderPreview(e)&&this.shouldRenderPreview()&&this._messageListContext.isScrollOnBottom()},n.shouldRenderPreview=function(e){return void 0===e&&(e=this.props),Boolean(e.urlPreview.properties.title)},n.render=function(){var e=this;return Rt.createElement(Dh.m,null,function(t){e._messageListContext=t;var n=e.props,r=n.urlPreview.properties,a=n.radiusType;return e.shouldRenderPreview()?Rt.createElement(Dh.c,{radiusType:a},Rt.createElement(ij,r.image),Rt.createElement(Dh.p,{subtitle:r.description,title:r.title})):Rt.createElement(Dh.c,{radiusType:a},Rt.createElement(Xy,{text:r.text}))})},t}(Rt.Component),cj=Object(Dh.E)("div",{target:"e19v7r50"})("max-width:300px;max-height:300px;"),sj=Object(Dh.E)("img",{target:"e19v7r51"})("display:block;width:auto;height:auto;max-width:100%;max-height:100%;"),uj=function(e){var t=e.url,n=e.name;return Rt.createElement(cj,null,Rt.createElement(sj,{alt:n,src:t}))},lj=function(e){var t=e.children;return Rt.createElement(Dh.j,{date:"",showMetaOnClick:!1,system:!0},Rt.createElement(Dh.c,null,Rt.createElement(Xy,{text:t})))},dj=Object(Dh.E)("span",{target:"e1vbunaw0"})("font-size:2.5em;"),pj=function(e){var t=e.emoji,n=e.radiusType;return Rt.createElement(Dh.c,{radiusType:n},Rt.createElement(Dh.o,null,Rt.createElement(dj,null,t.properties.text)))},fj=Object(Dh.E)("div",{target:"efus62t0"})("margin-bottom:8px;"),mj=Object(Dh.E)("div",{target:"efus62t1"})("width:100%;margin-bottom:2px;font-size:14px;color:#9c9c9f;"),hj=Object(Dh.E)("div",{target:"efus62t2"})("width:100%;font-size:14px;color:#3e3e41;"),vj=function(e){var t=e.fields;return Rt.createElement(Rt.Fragment,null,t.map(function(e,t){var n=e.label,r=e.answer;return Rt.createElement(fj,{key:t},Rt.createElement(mj,{textWrap:!0},Rt.createElement(oy.a,{component:uy},n)),Rt.createElement(hj,{textWrap:!0},"string"===typeof r?r:r.join(", ")))}))},bj=function(e){function t(){return e.apply(this,arguments)||this}Object(Rh.a)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){var e=this.props,t=e.form,n=e.name,r=t.getFieldState(n);r&&r.value&&t.change(n,void 0)},n.render=function(){return this.props.children},t}(Rt.Component);var gj=function(e){var t=e.when,n=e.children;return t?Rt.createElement(Jb.c,{subscription:bg},function(n){var r=n.form;return n.values[t]?Rt.createElement(bj,Object(h.a)({},e,{form:r})):null}):Rt.createElement(Rt.Fragment,null,n)},yj=Object(Dh.E)("div",{target:"e7yhn050"})("background-color:#fff;border-radius:6px;"),jj=Object(Dh.E)(yj,{displayName:"SystemCard",target:"e1r9cm3y0"})("padding:8px;margin:2px 0;width:100%;max-width:270px;position:relative;"),Oj=Object(Dh.E)("div",{target:"e1q4zsg90"})("display:flex;flex-direction:row;position:absolute;top:-21px;left:0;right:0;color:white;"),xj=Object(Dh.E)("div",{target:"e1q4zsg91"})("display:flex;justify-content:center;align-items:center;overflow:hidden;margin:0 auto;border-radius:50%;width:",42,"px;height:",42,"px;background-color:",function(e){var t=e.theme;return e.backgroundColor||t.colors.cta},";"),_j=function(e){var t=e.children,n=e.backgroundColor;return Rt.createElement(Oj,null,Rt.createElement(xj,{backgroundColor:n},t))},wj=function(e){return Object(Dh.A)("margin-left:4px;margin-top:3px;fill:currentColor;transform:","scaleY("+("up"===e?-1:1)+")",";")},Cj=function(e){var t=e.direction,n=void 0===t?"down":t;return Rt.createElement("svg",{viewBox:"0 0 7 4",width:"7px",height:"4px",className:wj(n)},Rt.createElement("path",{d:"M1.1,0.2C0.9,0,0.5,0,0.4,0.2s-0.2,0.5,0,0.7l2.8,2.8c0.2,0.2,0.5,0.2,0.7,0l2.8-2.8c0.2-0.2,0.2-0.5,0-0.7S6.2,0,6,0.2 L3.5,2.7L1.1,0.2z"}))},Ej=Object(Dh.E)("div",{target:"eentevd0"})("display:flex;flex-direction:row;align-items:center;justify-content:center;margin-top:8px;font-size:12px;text-align:center;cursor:pointer;color:",function(e){return e.theme.colors.cta},";"),Ij=Object(Dh.E)("div",{target:"e1g195pu0"})("position:absolute;top:50%;bottom:0;left:0;right:0;pointer-events:none;background:linear-gradient(rgba(255,255,255,0),rgba(255,255,255,0.9));"),Sj=Object(Dh.E)("div",{target:"e9s6ynt0"})("position:relative;overflow:hidden;height:auto;transition:max-height 300ms cubic-bezier(0.14,0,0,1);"),kj=Object(Dh.E)("div",{target:"e1cdxu9o0"})("overflow:auto;height:auto;padding:8px;"),Tj=zt(function(e,t){var n=t.icon,r=e.getApplicationState("config").theme;return{showIcon:!!n&&"modern"!==r.name,rtl:e.getApplicationState("rtl")}})(function(e){var t,n,r=e.icon,a=e.showIcon,i=e.children,o=e.collapsible,c=void 0!==o&&o,s=e.defaultCollapsed,u=void 0!==s&&s,l=e.collapsedHeight,d=void 0===l?100:l,p=e.collapseThreshold,f=void 0===p?20:p,m=e.rtl,h=Rt.useRef(0),v=Rt.useRef(!1),b=Rt.useRef(null),g=Rt.useRef(null),y=Rt.useState(!1),j=y[0],O=y[1],x=Rt.useState(c),_=x[0],w=x[1],C=Object(Xv.a)(function(){return c&&u?(e=d+"px",Object(Dh.A)("max-height:",e,";")):null;var e}),E=Rt.useCallback(function(e){g.current.style.maxHeight="number"===typeof e?e+"px":e},[]),I=Rt.useCallback(function(){O(!j)},[j]),S=Rt.useCallback(function(){j||E("none")},[j,E]);return Rt.useEffect(function(){return function(){return cancelAnimationFrame(h.current)}},[]),Rt.useEffect(function(){var e=b.current.offsetHeight,t=e>d&&e-d>f;w(t&&c),!v.current&&c&&O(t&&u),v.current=c},[c,u,d,f]),Rt.useEffect(function(){_?(E(b.current.offsetHeight),j&&(cancelAnimationFrame(h.current),h.current=requestAnimationFrame(function(){return E(d)}))):E("none")},[_,j]),Rt.createElement("div",{className:Object(Dh.B)(a&&(n="21px",Object(Dh.A)("padding-top:",n,";")))},Rt.createElement(jj,{rtl:m},a?r:null,Rt.createElement(Sj,{innerRef:g,onTransitionEnd:S,className:Object(Dh.B)(a&&(t="12px",Object(Dh.A)("margin-top:",t,";")),C)},Rt.createElement(kj,{innerRef:b},i),j&&Rt.createElement(Ij,null)),_&&Rt.createElement(Ej,{onClick:I},Rt.createElement("span",null,j?"Show more":"Show less"),Rt.createElement(Cj,{direction:j?"down":"up"}))))}),Aj=Object(Dh.E)("p",{target:"ecj3oet0"})("margin:0;",function(e){return e.theme.typography.basic}),Pj=function(e){var t=e.children;return Rt.createElement(Aj,null,Rt.createElement(oy.a,{component:uy},t))},Mj=n(39),Nj=function(e){var t=e.name,n=e.label,r=e.required;return Rt.createElement(ay,null,Rt.createElement(py,{showRequiredMark:r,htmlFor:t},n),Rt.createElement(Jb.a,Object(h.a)({},yg,{id:t,autoComplete:"name"===t?t:"off",component:Og,name:t})))},zj=function(e){var t=e.label,n=e.name,r=e.required,a=void 0!==r&&r;return Rt.createElement(ay,null,t&&Rt.createElement(py,{showRequiredMark:a,htmlFor:n},t),Rt.createElement(Jb.a,Object(h.a)({},yg,{autoComplete:"email",id:n,name:n,type:"email",component:Og})))},Rj=function(e){var t=e.children,n=e.showRequiredMark,r=void 0!==n&&n;return Rt.createElement(ng,null,Rt.createElement(oy.a,{component:uy},t),r&&Rt.createElement(dy,null))},Dj=Object(Dh.E)(Dh.s,{target:"evnlvbu0"})(function(e){var t=e.theme,n=t.spaceBase,r=t.typography;return Object(h.a)({},r.basic,{margin:.5*n+"px 0"})}),Lj=Object(Dh.E)(eg,{target:"evnlvbu1"})(function(e){return{paddingLeft:e.theme.spaceBase+"px"}}),Bj=function(e){var t=e.id,n=e.name,r=e.label,a=e.type,i=e.value;return Rt.createElement(Dj,null,Rt.createElement(Jb.a,{id:t,name:n,type:a,value:i,component:Fg}),Rt.createElement(Lj,{htmlFor:t},r))},qj=Object(Dh.A)("border:none;margin:0;padding:0;max-height:100%;"),Uj=function(e){var t=e.options,n=e.label,r=e.name,a=e.type,i=e.required;return Rt.createElement(ay,null,Rt.createElement("fieldset",{className:qj,name:r},Rt.createElement(Rj,{showRequiredMark:i},n),t.map(function(e,t){return Rt.createElement(Bj,{key:t,id:r+"_"+t,label:e.label,name:r,type:a,value:e.value})}),Rt.createElement(Jb.c,{subscription:mg},function(e){var t=e.errors,n=e.touched;return t[r]&&n&&n[r]?Rt.createElement(Xb,null,t[r]):null})))},Fj=Object(Dh.E)("option",{target:"e1t56ivc0"})("color:",function(e){return e.primary?"#090":"inherit"},";"),Vj=function(e){var t=e.meta,n=e.name,r=e.label,a=e.value,i=e.localize,o=void 0!==t&&void 0!==t.online,c=Boolean(t&&t.online),s=" ("+i(c?"skill_status_online":"skill_status_offline")+")";return Rt.createElement(Fj,{name:n,primary:o&&c,value:a},""+r+(o?s:""))},Gj=function(e){var t=e.options,n=e.label,r=e.name,a=e.localize,i=e.required;return Rt.createElement(ay,null,Rt.createElement(py,{showRequiredMark:i,htmlFor:r},n),Rt.createElement(Jb.a,{id:r,name:r,fullWidth:!0,component:pg},Rt.createElement("option",{value:""},a("forms_choose")),t.map(function(e,t){return Rt.createElement(Vj,{key:t,meta:e.meta,label:e.label,localize:a,name:r,value:e.value})})))},Hj=function(e){var t=e.label,n=e.name,r=e.required,a=void 0!==r&&r;return Rt.createElement(ay,null,Rt.createElement(py,{showRequiredMark:a,htmlFor:n},t),Rt.createElement(Jb.a,{id:n,component:og,name:n}))},Wj=Object(Dh.E)(Wh,{target:"e12liu9t0"})("margin:0;a{color:inherit;}",function(e){return e.theme.typography.basic}),Yj={information:function(e){var t=e.value;return Rt.createElement(ay,null,Rt.createElement(Wj,{preserveLines:!0,textWrap:!0},Rt.createElement(oy.a,{component:uy},t)))},text:Nj,textarea:fy,email:zj,rating:Hj,radio:Uj,checkbox:Uj,select:Gj};var Jj=function(e){var t=e.type;return Yj[t]},Qj=function(e,t){switch(t){case"prechat":return e("prechat_submit_label");case"offline":return e("offline_form_submit_label");default:return e("submit")}},Kj=zt(function(e,t){var n=t.chatId,r=t.eventId,a=t.type,i=function(t){if("prechat"===a){var i=t.name,o=t.email,c=Object(m.d)({name:i,email:o});Object(m.B)(c)||e.updateUser(e.getSessionUserId(),c)}return e.requestUpdateEvent(n,r,{properties:{answers:t}})};return function(e){return{localize:e.localize,mobile:e.getApplicationState("mobile"),sendForm:i,sessionUser:e.getSessionUser()}}})(function(e){var t=e.id,n=e.type,r=e.fields,a=e.mobile,i=e.localize,o=e.sendForm,c=e.sessionUser,s=Rt.useContext(Uh),u=Object(Xv.a)(function(){var e=s.get(t,n),a=function(e,t){var n=e.name,r=e.email;return n===t("client")?{email:r}:{email:r,name:n}}(c,i);return function(e,t,n){return e.map(function(e){var r=n?n[e.name]:null,a=t?t[e.name]:null,i=r||a;return i?Object(h.a)({},e,{defaultValue:i}):e}).filter(function(e){return"defaultValue"in e}).reduce(function(e,t){var n=t.name,r=t.defaultValue;return e[n]=r,e},{})}(r,a,e)});return Rt.createElement(ry,{id:t,mobile:a,initialValues:u,validate:function(e){return r.reduce(function(t,n){var r,a,o=n.required,c=n.name;return o&&(a=e[c],Object(m.A)(a)?Object(m.B)(a):!Boolean(a))?Object(h.a)({},t,((r={})[c]=i("survey_fill_in_required_fields"),r)):t},{})},onSubmit:function(e){return o(e).then(function(){s.delete(n)},function(e){var t;return e||((t={})[Mj.a]="Please check your internet connection and then try again.",t)})},submitLabel:Qj(i,n)},r.map(function(e,t){var n=Jj(e);return Rt.createElement(Dh.s,{key:t},Rt.createElement(gj,{name:e.name,when:e.dependOn},Rt.createElement(n,Object(h.a)({},e,{localize:i}))))}),Rt.createElement(Jb.c,{onChange:function(e){var r=e.values;s.set(t,n,r)},subscription:bg}))}),Zj=function(e){var t=e.theme;return Rt.createElement(_j,{backgroundColor:t.colors.cta},Rt.createElement(uv,{color:"#ffffff"}))},Xj=function(e){var t=e.theme;return Rt.createElement(_j,{backgroundColor:t.colors.cta},Rt.createElement(dv,{color:"#ffffff"}))},$j=function(e){var t=e.answered,n=e.theme;return Rt.createElement(_j,{backgroundColor:t?"#2ac874":n.colors.cta},t?Rt.createElement(lv,{color:"#ffffff"}):Rt.createElement(Xh,{color:"#ffffff"}))},eO=function(e){var t=e.localize;return Rt.createElement(Pj,null,t("offline_message_sent"))},tO=Object(Vg.b)(function(e){var t=e.theme,n=e.chatId,r=e.id,a=e.setScrollTargetNode,i=e.form.properties,o=i.formId,c=i.formType,s=i.fields,u=i.answered,l=i.dissmissed,d=s.filter(function(e){return e.answer&&e.label}),p="offline"!==c&&u&&Object(m.B)(d),f=Rt.useRef(null);if(mb(function(){!u&&f.current&&a(f.current)}),l||p)return null;var h=function(e){switch(e){case"prechat":return Zj;case"postchat":return Xj;case"offline":return $j}}(c),v=function(e){switch(e){case"prechat":case"postchat":return vj;case"offline":return eO}}(c);return Rt.createElement("div",{ref:f},Rt.createElement(Ft,null,function(e){return Rt.createElement(Tj,{defaultCollapsed:!0,collapsible:u,icon:Rt.createElement(h,{theme:t,answered:u})},u?Rt.createElement(v,{fields:d,localize:e}):Rt.createElement(Kj,{key:c,chatId:n,eventId:r,id:o,type:c,fields:s}))}))}),nO=["message","webview"],rO=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={shouldHandleSeen:!t.props.event.own&&!t.props.event.seen},t.handleSeen=function(){t.setState({shouldHandleSeen:!1}),t.props.listItemHandlers.markAsSeen(t.props.id)},t.getCardDisabledButtons=function(){var e=t.props,n=e.isChatActive,r=e.isPartOfActiveThread;return n&&r?[]:nO},t}return Object(Rh.a)(t,e),t.getDerivedStateFromProps=function(e,t){return t.shouldHandleSeen&&e.event.seen?{shouldHandleSeen:!1}:null},t.prototype.render=function(){var e,t=this.props,n=t.author,r=t.deliveryStatus,a=t.event,i=t.listItemHandlers,o=t.radiusType,c=t.showMetaOnClick,s=t.chatId,u=t.setScrollTargetNode,l=this.state.shouldHandleSeen;if("system_message"===a.type){var d=a.properties,p=d.systemMessageType,f=d.textVariables,m=d.text;return Rt.createElement(Ft,null,function(e){return Rt.createElement(lj,null,p?e(p,f):m)})}return"form"===a.type?Rt.createElement(tO,{id:a.id,chatId:s,form:a,setScrollTargetNode:u}):Rt.createElement(Dh.j,{authorName:n.name,date:(e=a.timestamp,new Date(e).toTimeString().substr(0,5)),deliveryStatus:r,failed:a.failed,isOwn:a.own,onSeen:this.handleSeen,seen:!l,sending:!a.delivered&&!a.failed,showMetaOnClick:c},"carousel"===a.type&&Rt.createElement(Yy,{carousel:a,disabledButtons:this.getCardDisabledButtons(),onActionButtonClick:i.handleActionButtonClick}),"message"===a.type&&Rt.createElement($y,{message:a,radiusType:o}),"emoji"===a.type&&Rt.createElement(pj,{emoji:a,radiusType:o}),"rich_message"===a.type&&Rt.createElement(Jy,{richMessage:a,radiusType:o,disabledButtons:this.getCardDisabledButtons(),onActionButtonClick:i.handleActionButtonClick}),"sticker"===a.type&&Rt.createElement(uj,a.properties.sticker),"url_preview"===a.type&&Rt.createElement(oj,{radiusType:o,urlPreview:a}))},t}(Rt.Component),aO=zt(function(e,t){var n=t.chatId,r=t.id;return function(e,t){var n;return function(r){var a=e(r);if(void 0===a)return n;var i=t(r,a);return n=i,i}}(function(e){return e.getEvent(n,r)},function(e,t){var a=e.getChat(n),i=a.properties.lastThread;return{event:t,isChatActive:a.active,isPartOfActiveThread:i===t.properties.thread,deliveryStatus:$t(e,n,r),author:e.getUser(t.author),chatId:n}})})(rO),iO=Object(Dh.E)(Dh.r,{target:"e1owdcs60"})("font-family:'Noto Sans';font-size:0.9em;",function(e){var t=e.theme;return Object(Dh.A)("color:",t.colors.cta,";border-color:",t.colors.cta,";")}),oO=function(e){return e.stopPropagation()},cO=function(e,t,n){return function(r){e({button:n[r],event:t})}},sO=function(e){var t=e.eventId,n=e.replies,r=e.onSelect;return Rt.createElement(Dh.q,{onSelect:cO(r,t,n)},n.map(function(e,t){var n=e.text;return Rt.createElement(iO,{key:t,onClick:oO,value:t},n)}))},uO=Object(Dh.A)("font-family:inherit;"),lO=Object(Dh.A)("padding:0;svg *{transition:fill 100ms ease-in-out;}"),dO=Object(Dh.E)("input",{target:"e10ozmh70"})("display:none;"),pO=Object(Dh.E)("label",{target:"e10ozmh71"})("cursor:pointer;display:flex;align-items:center;color:","#424d57",";");var fO=zt(function(e,t){var n=t.chatId,r=function(t){return e.sendEvent(n,{type:"file",properties:{name:t.name}},{file:t})},a=function(t){wr(e,n,t)},i=function(t){e.requestUpdateChat(n,{properties:{messageDraft:t}})};return function(e){var t=e.getChat(n),o=t.active,c=t.properties.queued,s=dn(e);return{allowFileUpload:o&&!s&&Jt("fileSharing",e).enabled,mobile:e.getApplicationState("mobile"),applicationFocused:e.getApplicationState("applicationFocused"),queued:c,reconnecting:s,sendFile:r,sendMessage:a,setMessageDraft:i}}})(function(e){var t=e.allowFileUpload,n=e.mobile,r=e.onHeightChange,a=e.onSendMessage,i=e.queued,o=e.reconnecting,c=e.sendFile,s=e.sendMessage,u=e.setMessageDraft,l=(e.applicationFocused,e.onFocusChanged),d=Object(v.a)(e,["allowFileUpload","mobile","onHeightChange","onSendMessage","queued","reconnecting","sendFile","sendMessage","setMessageDraft","applicationFocused","onFocusChanged"]),p=Rt.useMemo(function(){return Object(m.lb)(1500,u)},[u]),f=Rt.useCallback(function(){l&&l(!0)},[l]),b=Rt.useCallback(function(){l&&l(!1)},[l]),g=Rt.useCallback(function(e){s(e),a&&a()},[s,a]),y=Rt.useCallback(function(e){[].forEach.call(e.target.files,c)},[c]),j=!o&&!i;return Rt.createElement(Ft,null,function(e){return Rt.createElement(Dh.v,Object(h.a)({},d,{active:j,disabled:o,mobile:n,onSend:g,onValueChange:p}),Rt.createElement(Dh.s,{align:"center"},Rt.createElement(Dh.w,{autoFocus:ty(n),className:uO,disabled:o,flexFill:!0,minRows:2,onBlur:b,onFocus:f,onHeightChange:r,placeholder:e("embedded_textarea_placeholder")}),t&&j&&Rt.createElement(pO,{flexFit:!0},Rt.createElement(tv,{color:"#aaa"}),Rt.createElement(dO,{multiple:!0,onChange:y,type:"file",value:""})),Rt.createElement(Dh.t,{flexFit:!0,className:lO,icon:Rt.createElement(nv,null)})))})}),mO=.8,hO=.5,vO=.3,bO={enter:600,exit:400},gO=function(e){return Object(Dh.A)("&-enter{transform:translateY(100%);}&-enter-active{transform:translateY(0);transition:transform ",600*e,"ms ","cubic-bezier(0.14, 0, 0, 1)",";}&-exit{transform:translateY(0);}&-exit-active,&-exit-done{transform:translateY(100%);transition:transform ",400*e,"ms ","cubic-bezier(0.14, 0, 0, 1)",";}")},yO=function(e){var t=e.show,n=e.durationFactor,r=e.onTransitionStart,a=e.onTransitionEnd,i=e.children;return Rt.createElement(Yh.a,{component:null},t&&Rt.createElement(yv.a,{timeout:bO,onExited:a,onEntered:a,onExiting:r,onEntering:r,classNames:gO(n)},i))},jO=function(e){return Object(Dh.A)("position:absolute;z-index:1500;display:flex;flex-direction:column;height:",100*e,"%;min-height:270px;max-height:100%;width:100%;bottom:0;background-color:#fff;border-radius:inherit;color:#424d57;")},OO=function(e){var t=e.heightPercentage,n=Object(v.a)(e,["heightPercentage"]),r=Rt.useRef(null);return nb("touchmove",r),Rt.createElement("div",Object(h.a)({ref:r,className:jO(t)},n))},xO=n(216),_O={allowtransparency:"true",scrolling:"yes",style:{position:"absolute",minWidth:"100%",minHeight:"100%",height:"1px",width:"1px",margin:"0",padding:"0",background:"none",border:"0"}},wO=function(e){if(e){var t=e.scrollTop,n=e.scrollHeight-e.offsetHeight;0===t?e.scrollTop=1:t===n&&(e.scrollTop=n-1)}},CO=function(e){var t=e.hidden;return Object(Dh.A)("flex-grow:1;position:relative;overflow:auto;-webkit-overflow-scrolling:touch;display:",t?"none":"block",";")},EO=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).sdk=void 0,t.containerRef=Rt.createRef(),t.handleIFrameLoad=function(){t.sdk&&(t.props.onLoadingChanged(!1),t.sdk.frame.removeEventListener("load",t.handleIFrameLoad))},t.handleScroll=function(e){wO(e.currentTarget)},t}Object(Rh.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.url,n=e.close,r=e.sendMessage,a=e.setAttributes,i=e.onLoadingChanged,o=e.onMomentDataChanged;t&&this.containerRef.current&&(this.sdk=Object(xO.a)({url:t,container:this.containerRef.current,onConnected:function(e){var t=e.data;i(!1),o(t)}},{close:n,sendMessage:r,setAttributes:a}),Object(Na.a)(_O,this.sdk.frame),i(!0),this.sdk.frame.addEventListener("load",this.handleIFrameLoad),o({title:this.sdk.title}))},n.componentWillUnmount=function(){var e=this.props,t=e.onMomentDataChanged,n=e.onLoadingChanged;this.sdk&&(this.sdk.destroy(),t(null),n(!1))},n.render=function(){return Rt.createElement("div",{ref:this.containerRef,className:CO(this.props),onScroll:this.handleScroll})},t}(Rt.Component),IO=Object(Dh.E)("div",{target:"ekjkgns0"})("flex-grow:1;font-weight:700;font-size:14px;margin:0 8px;"),SO=Object(Dh.E)(Dh.s,{target:"e11d7cwf0"})("border-bottom:1px solid #dde2e6;padding:0 0.8em;height:48px;display:flex;align-items:center;"),kO=n(218),TO=n.n(kO),AO=Object(Dh.E)("div",{target:"e96px410"})("flex-shrink:0;width:24px;height:24px;border-radius:5px;overflow:hidden;"),PO=Object(Dh.E)("img",{target:"e96px411"})("width:100%;height:100%;"),MO=function(e){var t=e.src,n=void 0===t?TO.a:t;return Rt.createElement(AO,null,Rt.createElement(PO,{src:n}))},NO=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={isAnimating:!1,isMomentLoading:!1,momentData:{}},t.getHeightPercentage=function(){var e=t.props.height;return{full:mO,tall:hO,compact:vO}[e||"tall"]},t.handleSendMessage=function(e){var n=e.text,r=t.props,a=r.sendMessage,i=r.onSendMessage;a(n),i&&i(n)},t.handleTransitionStart=function(){t.setState({isAnimating:!0})},t.handleTransitionEnd=function(){t.setState({isAnimating:!1})},t.handleMomentLoadingChanged=function(e){t.setState({isMomentLoading:e})},t.handleMomentDataChanged=function(e){t.setState(function(t){return{momentData:e?Object(h.a)({},t.momentData,e):{}}})},t}return Object(Rh.a)(t,e),t.prototype.render=function(){var e=this.state,t=e.momentData,n=e.isAnimating,r=e.isMomentLoading,a=this.props,i=a.url,o=a.show,c=a.closeMoment,s=a.updateSessionUser,u=n||r,l=this.getHeightPercentage();return Rt.createElement(Mb,null,Rt.createElement(Lb,{shown:o}),Rt.createElement(yO,{show:o,onTransitionEnd:this.handleTransitionEnd,onTransitionStart:this.handleTransitionStart,durationFactor:l/mO},Rt.createElement(OO,{heightPercentage:l},Rt.createElement(SO,{noShrink:!0},Rt.createElement(MO,{src:t.icon}),Rt.createElement(IO,{ellipsis:!0,flexFill:!0},t.title),Rt.createElement(pv,{flexFit:!0,onClick:c},Rt.createElement(rv,null))),Rt.createElement(EO,{url:i,hidden:u,close:c,setAttributes:s,sendMessage:this.handleSendMessage,onMomentDataChanged:this.handleMomentDataChanged,onLoadingChanged:this.handleMomentLoadingChanged}),u&&Rt.createElement(Jg,{size:"large",style:{margin:"auto"}}))))},t}(Rt.Component),zO=zt(function(e,t){var n=t.chatId,r=function(){return Dr(e)},a=function(t){return Lr(t,e)},i=function(t,r){return wr(e,n,t,r)};return function(e){var t=e.getView("Moment"),n=t.show,o=t.data;return Object(h.a)({show:n,closeMoment:r,sendMessage:i,updateSessionUser:a},o)}})(NO),RO=Object(Dh.E)(Dh.i,{target:"e1gju6mz0"})("padding:0;width:32px;height:32px;flex-shrink:0;"),DO=Object(Dh.E)("div",{target:"e1gju6mz1"})("width:24px;height:24px;margin:auto;&:hover{background-color:#ebebeb;border-radius:4px;}"),LO=function(e){var t=e.onClick;return Rt.createElement(RO,{onClick:t},Rt.createElement(DO,null,Rt.createElement(rv,{size:24})))},BO=Object(Dh.E)("div",{target:"ehari690"})("margin:8px 16px;background:#fff;box-shadow:0 0 16px 0px rgba(0,0,0,0.25);",function(e){var t=e.stickToEdge,n=void 0!==t&&t;return{marginBottom:n?"0":"8px",borderRadius:n?"6px 6px 0 0":"6px"}}," @media (orientation:landscape){max-width:50%;margin:",function(e){var t=e.stickToEdge;return void 0!==t&&t?"0 auto":"0 auto 8px"},";}"),qO=Object(Dh.E)("span",{target:"ecbjb5p0"})("flex-grow:1;flex-shrink:1;font-size:14px;font-weight:normal;color:#424d57;"),UO=Object(Dh.E)("div",{target:"ecbjb5p1"})("display:flex;cursor:pointer;justify-content:flex-start;align-items:center;"),FO=Object(Dh.E)(Hh,{target:"ecbjb5p2"})("margin:0 6px;flex-shrink:0;"),VO=function(e){var t=e.count,n=e.previewText,r=e.mobile,a=e.onClose,i=e.onClick,o=Rt.useCallback(function(e){e.stopPropagation(),a()},[]);return Rt.createElement(Ft,null,function(e){return Rt.createElement(BO,{stickToEdge:r},Rt.createElement(UO,{onClick:i},Rt.createElement(FO,null,t<100?t:"99+"),Rt.createElement(qO,{ellipsis:!0},n||e(t>1?"new_messages":"new_message")),Rt.createElement(LO,{onClick:o})))})},GO=Object(Dh.E)("div",{target:"e1tutm620"})("position:relative;background-color:#dde2e6;width:100%;height:5px;border-radius:3px;margin-top:0.4em;"),HO=Object(Dh.E)("div",{target:"e1tutm621"})("position:absolute;background-color:#3e7ce4;width:",function(e){return e.progress},"%;height:5px;border-radius:3px;transition:width 150ms ease;"),WO=Object(Dh.E)("span",{target:"e1tutm622"})("color:",function(e){return e.failed?"red":"inherit"},";"),YO=Object(Dh.E)("span",{target:"e1tutm623"})("color:red;font-size:0.8em;"),JO=Object(Dh.E)("div",{target:"e1tutm624"})("padding:1em;margin:8px 0;"),QO=zt(function(e,t){var n=t.chatId,r=t.eventId,a=function(){e.updateEvent(n,r,{properties:{canceled:!0}})};return function(e){var t=e.getEvent(n,r);if(void 0===t)return{eventPresent:!1};var i=t.properties;return{eventPresent:!0,name:i.name,progress:i.progress,failed:i.failed,failReason:i.failReason,cancelUpload:a}}})(function(e){if(!e.eventPresent)return null;var t=e.name,n=e.progress,r=e.failed,a=e.cancelUpload,i=e.failReason;return Rt.createElement(BO,null,Rt.createElement(JO,null,Rt.createElement(Dh.h,null,Rt.createElement(Dh.s,null,Rt.createElement(WO,{ellipsis:!0,failed:r,flexFill:!0},t),r&&Rt.createElement(Dh.i,{flexFit:!0,onClick:a},Rt.createElement(Dh.g,null))),Rt.createElement(GO,null,Rt.createElement(HO,{progress:Math.floor(100*n)})),i&&Rt.createElement(YO,null,i))))}),KO=Object(Dh.E)("div",{target:"ezpiwsd0"})("position:absolute;bottom:0;left:0;right:0;z-index:100;"),ZO=zt(function(e,t){var n=t.markAsSeen,r=function(){Xt("liveChatChatId",Date.now(),e).forEach(function(e){return n(e.id)})};return function(e){var t=e.getView("uploadList").ids,n=e.getApplicationState("mobile"),a=hn("liveChatChatId",e).unseenCount,i=function(e,t){return Object(m.n)(function(e){return!e.own&&Object(m.z)(e.type,["message","rich_message","url_preview","emoji"])},e.getEvents(t))}(e,"liveChatChatId");return{uploadingFiles:t,previewText:i&&i.properties?i.properties.text:null,unseenCount:a,mobile:n,markAllEventsAsSeen:r}}})(function(e){var t=e.uploadingFiles,n=e.previewText,r=e.unseenCount,a=e.chatId,i=e.mobile,o=e.scrollToBottom,c=e.markAllEventsAsSeen,s=e.isOnBottomSource,u=e.isScrollable,l=ub(s),d=r>0&&!l&&u,p=Rt.useState(d),f=p[0],m=p[1];return!d&&f&&m(!1),Rt.useEffect(function(){if(d){var e=setTimeout(function(){return m(!0)},300);return function(){return clearTimeout(e)}}},[d]),Rt.createElement(KO,null,Rt.createElement(Yh.a,{appear:!0,component:null},t.map(function(e){return Rt.createElement(Ov,{key:e},Rt.createElement(QO,{chatId:a,eventId:e}))}),f&&Rt.createElement(Ov,{key:"unread"},Rt.createElement(VO,{mobile:i,count:r,previewText:n,onClick:o,onClose:c}))))}),XO=Object(Vg.b)(function(e){var t=e.theme,n=Object(v.a)(e,["theme"]),r=t.Maximized.css.background;return Rt.createElement(Jg,Object(h.a)({},n,{adjustToColor:r}))}),$O=Object(Dh.E)("div",{displayName:"View",section:!0,target:"e1u2umur0"})("flex-grow:1;display:flex;height:100%;min-height:0;padding-bottom:1em;"),ex=Object(Dh.E)("div",{displayType:"ViewContent",target:"e1u2umur1"})("overflow-y:auto;height:100%;flex-grow:1;padding:",function(e){return e.full?"0 !important":"1em 1em 0 1em"},";"),tx=Object(Dh.A)("&-enter,&-appear{opacity:0;}&-enter&-enter-active,&-appear&-appear-active{opacity:1;transition:opacity ",200,"ms ","cubic-bezier(0.33, 0, 0, 1)",";}&-exit{opacity:1;}&-exit&-exit-active{opacity:0;transition:opacity ",200,"ms ","cubic-bezier(0.335, 0.520, 0.000, 1.000)",";}"),nx=Object(Dh.A)("width:100%;"),rx=function(e){var t=e.children,n=e.full,r=void 0!==n&&n;return Rt.createElement($O,null,Rt.createElement(Yh.a,{className:nx},Rt.createElement(yv.a,{appear:!0,classNames:tx,timeout:200},Rt.createElement(ex,{full:r},t))))},ax=function(e){return Rt.createElement("svg",Object(h.a)({viewBox:"0 0 32 32",width:"32",height:"32"},e,{className:Object(Dh.A)("*{animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:cubic-bezier(0,0,1,1);}")}),Rt.createElement("g",{className:Object(Dh.A)("fill:none;transform:translate(16px,16px) rotate(0deg) translate(-16px,-16px);animation-fill-mode:backwards;animation-timing-function:cubic-bezier(0,0,1,1);animation-name:",Object(Dh.D)("75%{transform:translate(16px,16px) rotate(0deg) translate(-16px,-16px);}91.67%{transform:translate(16px,16px) rotate(180deg) translate(-16px,-16px);}0%{transform:translate(16px,16px) rotate(0deg) translate(-16px,-16px);}100%{transform:translate(16px,16px) rotate(180deg) translate(-16px,-16px);}"),";")},Rt.createElement("path",{d:"M22,22 L22,26 L10,26 L10,22 L16,16 L22,22 Z M22,10 L16,16 L10,10 L10,6 L22,6 L22,10 Z",strokeLinejoin:"round",className:Object(Dh.A)("stroke:currentColor;stroke-width:2;")})),Rt.createElement("g",{className:Object(Dh.A)("transform:translate(16px,15px) scale(1,1) translate(-16px,-15px);animation-fill-mode:backwards;animation-name:",Object(Dh.D)("0%{transform:translate(16px,15px) scale(1,1) translate(-16px,-15px);}61.67%{transform:translate(16px,15px) scale(0,0) translate(-16px,-15px);}63.33%{transform:translate(16px,15px) scale(1,1) translate(-16px,-15px);}100%{transform:translate(16px,15px) scale(1,1) translate(-16px,-15px);}"),";animation-timing-function:cubic-bezier(0.42,0,1,1);")},Rt.createElement("polygon",{points:"12 11 20 11 16 15",className:Object(Dh.A)("fill:currentColor;opacity:1;animation-fill-mode:backwards;animation-timing-function:cubic-bezier(0,0,1,1);animation-name:",Object(Dh.D)("58.33%{opacity:1;}60%{opacity:0;}91.67%{opacity:0;}96.67%{opacity:1;}0%{opacity:1;}100%{opacity:1;}"),";")})),Rt.createElement("path",{d:"M16,17 L16,23",className:Object(Dh.A)("stroke:currentColor;stroke-width:2;stroke-dashoffset:12;stroke-dasharray:6,0,6,6;animation-fill-mode:backwards,backwards;animation-timing-function:cubic-bezier(0.42,0,1,1),cubic-bezier(0,0,1,1);animation-name:",Object(Dh.D)("0%{stroke-dashoffset:12;}68.33%{stroke-dashoffset:-6;}100%{stroke-dashoffset:-6;}"),",",Object(Dh.D)("0%{stroke-dasharray:6,0,6,6;}100%{stroke-dasharray:6,0,6,6;}"),";")}),Rt.createElement("g",{className:Object(Dh.A)("transform:translate(16px,24px) translate(-16px,-24px) translate(0px,2px);animation-fill-mode:backwards;animation-timing-function:cubic-bezier(0,0,1,1);animation-name:",Object(Dh.D)("0%{transform:translate(16px,24px) translate(-16px,-24px) translate(0px,2px);}40%{transform:translate(16px,24px) translate(-16px,-24px) translate(0px,0px);}75%{transform:translate(16px,24px) translate(-16px,-24px) translate(0px,0px);}76.67%{transform:translate(16px,24px) translate(-16px,-24px) translate(-2px,0px);}78.33%{transform:translate(16px,24px) translate(-16px,-24px) translate(-4px,-1px);}81.67%{transform:translate(16px,24px) translate(-16px,-24px) translate(-8px,-6px);}83.33%{transform:translate(16px,24px) translate(-16px,-24px) translate(-8px,-8px);}85%{transform:translate(16px,24px) translate(-16px,-24px) translate(-8px,-11px);}88.33%{transform:translate(16px,24px) translate(-16px,-24px) translate(-4px,-13px);}91.67%{transform:translate(16px,24px) translate(-16px,-24px) translate(0px,-13px);}96.67%{transform:translate(16px,24px) translate(-16px,-24px) translate(0px,-11px);}100%{transform:translate(16px,24px) translate(-16px,-24px) translate(0px,-11px);}"),";")},Rt.createElement("g",{className:Object(Dh.A)("transform:translate(16px,24px) rotate(0deg) translate(-16px,-24px);animation-fill-mode:backwards;animation-timing-function:cubic-bezier(0,0,1,1);animation-name:",Object(Dh.D)("75%{transform:translate(16px,24px) rotate(0deg) translate(-16px,-24px);}78.33%{transform:translate(16px,24px) rotate(36deg) translate(-16px,-24px);}83.33%{transform:translate(16px,24px) rotate(90deg) translate(-16px,-24px);}91.67%{transform:translate(16px,24px) rotate(180deg) translate(-16px,-24px);}0%{transform:translate(16px,24px) rotate(0deg) translate(-16px,-24px);}100%{transform:translate(16px,24px) rotate(180deg) translate(-16px,-24px);}"),";")},Rt.createElement("g",{className:Object(Dh.A)("transform:translate(16px,24px) scale(1,1) translate(-16px,-24px);animation-fill-mode:backwards;animation-timing-function:cubic-bezier(0,0,1,1);animation-name:",Object(Dh.D)("0%{transform:translate(16px,24px) scale(1,1) translate(-16px,-24px);}40%{transform:translate(16px,24px) scale(1,1.4) translate(-16px,-24px);}68.33%{transform:translate(16px,24px) scale(1,1.6) translate(-16px,-24px);}86.67%{transform:translate(16px,24px) scale(1,1.6) translate(-16px,-24px);}88.33%{transform:translate(16px,24px) scale(1,1.4) translate(-16px,-24px);}91.67%{transform:translate(16px,24px) scale(0.8,1.3) translate(-16px,-24px);}96.67%{transform:translate(16px,24px) scale(0.45,1.6) translate(-16px,-24px);}100%{transform:translate(16px,24px) scale(0.45,1.6) translate(-16px,-24px);}"),";")},Rt.createElement("rect",{x:"10",y:"23",width:"12",height:"2",className:Object(Dh.A)("fill:currentColor;opacity:1;animation-fill-mode:backwards;animation-timing-function:cubic-bezier(0,0,1,1);animation-name:",Object(Dh.D)("75%{opacity:1;}0%{opacity:1;}100%{opacity:1;}"),";")})))))},ix=Object(Dh.E)("div",{target:"e1v4xcti0"})("font-size:14px;color:#424d57;"),ox=zt(function(e){return e.getView("Chat/queue")})(Object(Vg.b)(function(e){var t=e.theme,n=e.template,r=e.numberInQueue,a=e.waitingTime;if(!n)return null;var i=t.colors,o=n.split(/(%number%|%minutes%)/g).filter(Boolean).map(function(e,t){return"%number%"===e?Rt.createElement("strong",{key:t},r):"%minutes%"===e?Rt.createElement("strong",{key:t},Math.floor(a/60)):e});return Rt.createElement(rx,null,Rt.createElement(Tj,{icon:Rt.createElement(_j,{backgroundColor:i.visitorMessageBackground},Rt.createElement(ax,{color:i.visitorMessageText}))},Rt.createElement(ix,{preserveLines:!0},Rt.createElement(oy.a,{component:uy},o))))})),cx=Object(Dh.E)("div",{target:"exztlxx0"})(function(e){return e.theme.typography.basic}),sx=Object(Dh.E)("div",{target:"exztlxx1"})("position:absolute;top:0;right:calc(50% - 21px);width:14px;height:14px;border-radius:50%;border:2px solid white;background-color:#a5a7a9;"),ux=Object(Vg.b)(function(e){var t=e.theme.colors;return Rt.createElement(Ft,null,function(e){return Rt.createElement(Tj,{icon:Rt.createElement(_j,{backgroundColor:t.visitorMessageBackground},Rt.createElement(sx,null),Rt.createElement(uv,{color:t.visitorMessageText}))},Rt.createElement(cx,null,Rt.createElement(oy.a,{component:uy},e("agents_not_available"))))})}),lx=Object(Dh.E)("div",{target:"e1b9v3lg0"})("position:absolute;top:0;left:0;right:0;background:#f5a623;z-index:2;color:#fff;text-align:center;font-size:0.9em;line-height:2.8em;"),dx=Object(Dh.E)("div",{target:"e1b9v3lg1"})("padding:1em;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:0.9em;"),px=Object(Dh.E)("div",{target:"e1b9v3lg2"})("flex-grow:1;height:100%;position:relative;min-height:0;-webkit-overflow-scrolling:touch;"),fx=Object(Dh.A)("background:transparent;overscroll-behavior:contain;"),mx=function(e){return e.events[0].id},hx=function(e){return 0!==e.length?mx(e[0]):null},vx=function(e){var t=Object(m.G)(e);if(!t)return null;var n=Object(m.G)(t.events);return n?n.id:null},bx=function(e){var t=Rt.useRef(e);return Rt.useEffect(function(){t.current=e}),Rt.useMemo(function(){return{handleActionButtonClick:function(e){var n=e.button,r=e.event,a=t.current,i=a.active,o=a.showMoment,c=a.sendPostback,s=a.sendMessage;if(i)switch(n.type){case"webview":return o(n),void c(r,n.postback);case"message":return void s(n.text,{type:"action_button",event:r,button:n});default:return void c(r,n.postback)}},markAsSeen:function(e){return t.current.markAsSeen(e)}}},[])};var gx=Object(U.a)([function(e,t){return e.getTimeline(t)},m.y],function(e,t){var n=Qt(t);return e.map(function(e,r){var a=0===r,i=e.showDate&&!a&&n;return Object(h.a)({},e,{isThreadBoundary:i,authorData:t.getUser(e.author)})})})(function(e,t){return t}),yx=zt(function(e,t){var n=t.id,r=function(){Er(e)},a=function(){Sr(n,e)},i=e.localize,o=function(){return e.updateChat(n,{properties:{loadingHistory:!0}})},c=function(t){return e.requestUpdateEvent(n,t,{seen:!0}).catch(m.P)},s=function(t,r){wr(e,n,t,r)},u=function(t,r){e.sendEvent(n,{type:"rich_message_postback",properties:{eventId:t,id:r,toggled:!0}})},l=function(t){var n=t.webviewHeight,r=t.value;Rr(e,{height:n,url:r})},d=function(t){return Lr(t,e)};return function(e){var t=e.getChat(n),p=t.active,f=t.properties,m=f.agentIsTyping,h=f.loadingHistory,v=f.queued,b=Yt(n,e),g=rn(e,n);return{activeQuickReply:pn(n,e),timeline:gx(e,n,e.getState()),agent:b,agentIsTyping:m&&!!b,active:p,loadHistory:o,hasMoreHistory:g,shouldLoadHistory:g&&!h,showAvatar:Jt("agentAvatar",e).showWithMessage,pageFocused:e.getApplicationState("pageFocused"),markAsSeen:c,sendMessage:s,queued:v,inputMode:mn(e,n),reconnecting:dn(e),sendPostback:u,showPrechat:r,localize:i,resetChat:a,updateSessionUser:d,showMoment:l,displayOfflineInformation:kn(e)}}})(function(e){var t=e.displayOfflineInformation,n=e.activeQuickReply,r=e.agent,a=e.hasMoreHistory,i=e.pageFocused,o=e.id,c=e.inputMode,s=e.loadHistory,u=e.localize,l=e.queued,d=e.reconnecting,p=e.resetChat,f=e.shouldLoadHistory,h=e.showAvatar,v=e.showPrechat,b=e.timeline,g=e.agentIsTyping,y=e.mobile,j=Rt.useRef(),O=sb(!0),x=sb(!1),_=bx(e),w=Rt.useRef(!1),C=Rt.useCallback(function(e){e&&f&&s()},[f,s]),E=fb(j,{firstItemKey:hx(b),lastItemKey:vx(b),onIsScrolledToTopChanged:C,onIsScrolledToBottomChanged:O.next,onIsUserScrollingChanged:x.next}),I=E.scrollToBottom,S=E.getIsOnBottom,k=E.onScroll,T=E.onWheel,A=E.onTouchStart,P=E.getIsScrollable,M=E.setScrollTargetNode,N=Rt.useCallback(function(){S()&&I({duration:0})},[S,I]),z=function(e){return function(){I({duration:0}),e()}},R=lb(function(){S()?I():I({duration:0})},[S,I]),D=Rt.useCallback(function(e){w.current=e},[]),L=[g,l,n,t];Rt.useEffect(function(){S()&&Object(m.fb)(L)&&I()},L);var B=Object(m.k)(function(e){return e.time},b);return Rt.useEffect(function(){if(y){var e=function(){w.current&&I({duration:0})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}},[y]),Rt.createElement(jb,{beginingOfTime:B?B.time:null,rootRef:j},Rt.createElement(Dh.h,{flexFill:!0,noShrink:!0},Rt.createElement(Hy,{chatId:o,isUserScrollingSource:x})),Rt.createElement(Yh.a,{appear:!0,component:null},Rt.createElement(_v,null,Rt.createElement(px,null,d&&Rt.createElement(lx,null,u("reconnecting")+"\u2026"),Rt.createElement(ZO,{chatId:o,isScrollable:P(),isOnBottomSource:O,scrollToBottom:I,markAsSeen:_.markAsSeen}),Rt.createElement(Dh.l,{usePinnedScroll:!1,active:i,className:fx,onScroll:k,onWheel:T,onTouchStart:A,innerRef:function(e){return j.current=e}},a&&Rt.createElement(Dh.s,null,Rt.createElement(XO,{size:"medium",style:{margin:"auto"}})),b.map(function(e,t){return Rt.createElement(Rt.Fragment,{key:mx(e)},e.isThreadBoundary&&Rt.createElement(kb,{timestamp:e.time}),Rt.createElement(Dh.k,{isOwn:e.own,onlyFirstWithMeta:!0,avatar:h&&"carousel"!==e.type&&e.authorData.avatar?e.authorData.avatar:void 0},e.events.map(function(t,n){return Rt.createElement(aO,{chatId:o,id:t.id,key:t.id,showMetaOnClick:0!==n,radiusType:e.radiusType,listItemHandlers:_,setScrollTargetNode:M})})))}),l&&Rt.createElement(Dh.k,null,Rt.createElement(ox,null)),t&&Rt.createElement(Dh.k,null,Rt.createElement(ux,null)),n&&Rt.createElement(sO,{eventId:n.id,onSelect:_.handleActionButtonClick,replies:n.properties.quickReplies}),Rt.createElement(Yh.a,{appear:!0,component:null},g&&Rt.createElement(Ov,{exit:!1},Rt.createElement(Bv,{avatar:h?r.avatar:null}))))))),"requestPrechat"===c?Rt.createElement(dx,null,Rt.createElement(Zg,{onClick:z(v)},u("embedded_greeting_accept"))):"startChatAgain"===c?Rt.createElement(dx,null,Rt.createElement(Zg,{onClick:z(p)},u("embedded_start_chat_again"))):"text"===c?Rt.createElement(fO,{chatId:o,onSendMessage:R,onHeightChange:N,onFocusChanged:D}):null,Rt.createElement(zO,{chatId:o,onSendMessage:R}))}),jx=function(){return Rt.createElement(Ft,null,function(e){return Rt.createElement(rx,null,Rt.createElement(Dh.c,null,Rt.createElement(Dh.o,null,e("lost_connection"))))})},Ox=Object(Dh.D)("50%{opacity:0.0;}"),xx=Object(Dh.A)("background:currentColor;opacity:0.3;animation:",Ox," 1.5s linear 0s infinite;"),_x=Object(Dh.A)(xx,";"),wx=Object(Dh.E)("div",{target:"e1ot76cd0"})("width:",function(e){return e.width||"10em"},";height:1em;margin:0.3em;border-radius:3px;",xx,";"),Cx=Object(Dh.E)("div",{target:"e1ot76cd1"})("width:100%;"),Ex=Object(Dh.E)("div",{target:"e1ot76cd2"})("padding:1em;"),Ix=Object(Dh.E)("div",{target:"e1ot76cd3"})("width:100%;margin-top:0.5em;"),Sx=Object(Dh.E)("div",{displayName:"Message",section:!0,target:"e1ot76cd4"})(),kx=function(){return Rt.createElement(rx,{full:!0},Rt.createElement(Cx,null,Rt.createElement(Dh.a,null,Rt.createElement(Dh.b,{className:_x,letter:" "})),Rt.createElement(Ex,null,Rt.createElement(Ix,null,Rt.createElement(Dh.s,null,Rt.createElement(Sx,null,Rt.createElement(Dh.c,null,Rt.createElement(Dh.o,null,Rt.createElement(wx,null),Rt.createElement(wx,{width:"7em"})))))),Rt.createElement(Ix,null,Rt.createElement(Dh.s,{reverse:!0},Rt.createElement(Sx,null,Rt.createElement(Dh.c,null,Rt.createElement(Dh.o,null,Rt.createElement(wx,null)))))),Rt.createElement(Ix,null,Rt.createElement(Dh.s,null,Rt.createElement(Sx,null,Rt.createElement(Dh.c,null,Rt.createElement(Dh.o,null,Rt.createElement(wx,null)))))))))},Tx=zt(function(e){var t=function(){rn(e,"liveChatChatId")&&e.updateChat("liveChatChatId",{properties:{loadingHistory:!0}})},n=function(t){e.setApplicationState({loadedInitialHistory:t})};return function(e){var r=e.getCurrentView(),a=r&&e.getDefaultView(r),i=e.getApplicationState().loadedInitialHistory,o=e.getChat("liveChatChatId"),c=o.active,s=o.properties,u=s.loadingHistory;return{active:c,ended:s.ended,loadHistory:t,defaultView:a,loadingHistory:u,loadedInitialHistory:i,setLoadedInitialHistory:n,destroyed:e.getApplicationState().destroyed,showLoader:An("liveChatChatId",e)}}})(function(e){var t=e.active,n=e.ended,r=e.destroyed,a=e.showLoader,i=e.loadHistory,o=e.defaultView,c=e.loadingHistory,s=e.loadedInitialHistory,u=e.setLoadedInitialHistory,l=Object(eb.a)(e)||{};return Rt.useEffect(function(){var e=Boolean(l.ended&&!n),a=Boolean(!l.active&&t),d=Boolean(!l.defaultView&&"timeline"===o),p=Boolean(l.loadingHistory&&!c);r||s||((d||e||a)&&i(),p&&u(!0))},[r,i,s,u]),r?Rt.createElement(jx,null):a?Rt.createElement(kx,null):Rt.createElement(yx,{id:"liveChatChatId"})}),Ax=Object(Dh.E)("div",{target:"e5cxvfk0"})("display:flex;justify-content:center;font-size:0.9em;"),Px=Object(Dh.E)("p",{target:"errpamd0"})("text-align:center;"),Mx=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={opened:!1,submitting:!1},t.showModal=function(){t.setState({opened:!0})},t.closeModal=function(){t.setState({opened:!1})},t.handleCloseClick=function(){t.setState({submitting:!0}),t.props.closeChat().then(function(){t.setState({submitting:!1}),t.closeModal()}).catch(function(){t.setState({submitting:!1})})},t}return Object(Rh.a)(t,e),t.prototype.render=function(){var e=this.props.localize,t=this.state.submitting;return Rt.createElement(Rt.Fragment,null,Rt.createElement(Sy,{label:e("close_chat")},Rt.createElement(pv,{onClick:this.showModal},Rt.createElement(rv,null))),Rt.createElement(Yb,{shown:this.state.opened,onClose:this.closeModal},Rt.createElement(vy,null,Rt.createElement(sv,null)),Rt.createElement(Px,null,e("leave_chat_confirm")),Rt.createElement(Ax,null,Rt.createElement(Xg,{destructive:!0,label:e("close_chat"),submitting:t,onClick:this.handleCloseClick}))))},t}(Rt.Component),Nx=27,zx=Object(Dh.E)("div",{target:"e1ixnb8m0"})("position:absolute;z-index:100;background:#fff;box-shadow:0 0.2em 0.8em rgba(0,0,0,0.2);border-radius:8px;margin-top:2.2em;margin-left:0.8em;overflow:hidden;min-width:180px;");var Rx=function(e){var t=e.children,n=e.onClose,r=void 0===n?m.P:n,a=e.triggerRef,i=Rt.useRef(null);return Object($v.a)(i,function(e){a.current.contains(e.target)||r()}),function(e,t){var n=Rt.useRef(t);Rt.useEffect(function(){n.current=t});var r=!!t;Rt.useEffect(function(){if(r){var t=function(t){t.keyCode===e&&n.current&&n.current(t)};return document.addEventListener("keydown",t),function(){return document.removeEventListener("keydown",t)}}},[e,r])}(Nx,r),Rt.createElement(Mb,null,Rt.createElement(zx,{innerRef:i},t))},Dx=Object(Dh.E)("p",{target:"e6vnhqa0"})("text-align:center;");function Lx(e){var t=e.email,n=e.localize,r=e.sent,a=e.opened,i=e.onClose,o=e.onSubmit,c=e.mobile;return Rt.createElement(Yb,{shown:a,onClose:i},a&&(r?Rt.createElement(Rt.Fragment,null,Rt.createElement(vy,null,Rt.createElement(Xh,null)),Rt.createElement(Dx,{textWrap:!0},n("chat_transcript_sent").replace(/%s/g,t)),Rt.createElement(Ax,null,Rt.createElement(Zg,{capitalize:!0,onClick:i},n("hide")))):Rt.createElement(Rt.Fragment,null,Rt.createElement(vy,null,Rt.createElement(Xh,null)),Rt.createElement(Dx,null,n("send_transcript_to_email")),Rt.createElement(ry,{id:"email_transcript",initialValues:{email:t},mobile:c,onSubmit:function(e){return o(e.email).catch(function(){var e;return(e={})[Mj.a]=n("lost_connection"),e})},submitLabel:n("send"),validate:function(e){if(!e.email)return{email:n("survey_fill_in_required_fields")}}},Rt.createElement(Dh.s,null,Rt.createElement(zj,{name:"email",required:!0,mobile:c}))))))}var Bx=Object(Dh.E)("button",{target:"ejny03d0"})("background:transparent;font-family:inherit;font-size:14px;border:0;display:flex;align-items:center;padding:1.3em;width:100%;&:hover{cursor:pointer;}&:active,&:focus{outline:black solid 0px;}"),qx=Object(Dh.E)("ul",{target:"e1qbuf310"})("list-style-type:none;margin:0;padding:0;& >:last-child{border-bottom:0;}"),Ux=Object(Dh.E)("li",{target:"e1qbuf311"})("display:flex;border-bottom:1px solid #e9eef4;pointer-events:",function(e){return e.disabled?"none":"auto"},";&:hover{color:#fff;background-color:",function(e){return e.theme.colors.cta},";cursor:pointer;& > *{color:#fff;}}"),Fx=Object(Dh.A)("margin-right:8px;"),Vx=Object(Dh.A)("&-enter{opacity:0;",qx,"{transform:translate3d(0,20%,0);}}&-enter-active{opacity:1;transition:opacity 100ms ease-in-out;",qx,"{transform:translate3d(0,0%,0);transition:transform 200ms;}}&-exit{opacity:1;",qx,"{transform:translate3d(0,0%,0);}}&-exit-active{opacity:0;transition:opacity 200ms ease-in-out;",qx,"{transform:translate3d(0,20%,0);transition:transform 200ms;}}"),Gx=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={opened:!1,emailTranscriptModalOpened:!1},t.triggerRef=Rt.createRef(),t.toggleMenu=function(){t.setState(function(e){return{opened:!e.opened}})},t.closeMenu=function(){t.setState({opened:!1})},t.handleTranscriptEmail=function(e){return t.props.sendTranscript(e)},t.closeEmailTranscriptModal=function(){t.setState({emailTranscriptModalOpened:!1})},t.showEmailTranscriptModal=function(){t.closeMenu(),t.setState({emailTranscriptModalOpened:!0})},t}return Object(Rh.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.muted,n=e.transcriptSentTo,r=e.enableTranscript,a=e.localize,i=e.showTranscript,o=e.toggleSounds,c=e.customerEmail,s=this.state.emailTranscriptModalOpened,u=!!n;return Rt.createElement(Rt.Fragment,null,Rt.createElement(Sy,{disabled:this.state.opened,label:a("theme_options")},Rt.createElement(Dh.i,{innerRef:this.triggerRef,onClick:this.toggleMenu,style:{padding:0}},Rt.createElement(iv,null))),Rt.createElement(Yh.a,{component:null},this.state.opened&&Rt.createElement(yv.a,{classNames:Vx,timeout:200},Rt.createElement(Rx,{triggerRef:this.triggerRef,onClose:this.closeMenu},Rt.createElement(qx,null,i&&Rt.createElement(Ux,{disabled:!r},Rt.createElement(Bx,{disabled:!r,onClick:this.showEmailTranscriptModal},Rt.createElement(Xh,{className:Fx}),a("send_transcript"))),Rt.createElement(Ux,null,Rt.createElement(Bx,{onClick:o},t?Rt.createElement(ev,{className:Fx}):Rt.createElement($h,{className:Fx}),a(t?"unmute":"mute"))))))),Rt.createElement(Lx,{email:u?n:c,localize:a,onClose:this.closeEmailTranscriptModal,onSubmit:this.handleTranscriptEmail,sent:u,opened:s}))},t}(Rt.Component),Hx=zt(function(e){var t=function(t){return e.requestUpdateChat("liveChatChatId",{properties:{transcriptSentTo:t}})},n=function(){e.setApplicationState({muted:!e.getApplicationState("muted")})};return function(e){var r=e.getChat("liveChatChatId"),a=r.active,i=r.properties,o=i.transcriptSentTo;return{muted:e.getApplicationState("muted"),sendTranscript:t,transcriptSentTo:o,enableTranscript:a||i.ended,showTranscript:Jt("emailTranscript",e).enabled,toggleSounds:n,customerEmail:e.getSessionUser().email}}})(Gx),Wx=function(e){return Object(Dh.A)("flex-grow:0;text-align:left;padding:0 0.8em;font-weight:700;display:flex;align-items:center;transition:0.3s background-color;",e&&"\n\t\tbackground-color: "+e+";\n\t\tcolor: "+(Dn(e)?"#fff":"inherit")+";\n\t",";")},Yx=Object(Dh.E)("div",{displayName:"IconPlaceholder",target:"e7bf83j0"})("width:25px;"),Jx=function(e){return Object(m.ab)(e-1).map(function(e){return Rt.createElement(Yx,{key:"placeholder_"+e})})},Qx=function(e){function t(){return e.apply(this,arguments)||this}return Object(Rh.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.showCloseButton,n=e.closeChat,r=e.localize,a=e.showMinimizedButton,i=e.title,o=e.backgroundColor,c=e.onMinimize,s=function(e,t){var n=e.filter(Boolean),r=t.filter(Boolean);return n.length===r.length?{leftIcons:n,rightIcons:r}:n.length>r.length?{leftIcons:n,rightIcons:Jx(n.length-r.length).concat(r)}:{leftIcons:n.concat(Jx(r.length-n.length)),rightIcons:r}}([Rt.createElement(Hx,{key:"menu",localize:r})],[a&&Rt.createElement(Sy,{key:"minimize",label:r("embedded_minimize_window")},Rt.createElement(pv,{onClick:c},Rt.createElement(av,null))),t&&Rt.createElement(Mx,{closeChat:n,key:"close",localize:r})]),u=s.leftIcons,l=s.rightIcons;return Rt.createElement(Dh.z,{className:Wx(o),leftIcons:u,noShrink:!0,rightIcons:l,title:i})},t}(Rt.Component);Qx.propTypes={minimize:Fh.func,showCloseButton:Fh.bool};var Kx,Zx,Xx=zt(function(e){var t=function(){return e.requestUpdateChat("liveChatChatId",{active:!1})},n=e.getApplicationState("embedded");return function(e){var r=e.getCurrentView(),a=e.getView(r);return{embedded:n,closeChat:t,title:Object(m.v)(e.localize("welcome_title"),"title",a),backgroundColor:Object(m.u)("titleBarColor",a),showCloseButton:e.getChat("liveChatChatId").active&&"Chat"===e.getCurrentView(),localize:e.localize}}})(Qx),$x=Object(Dh.A)("color:#d46d39;"),e_=Object(Dh.E)("div",{displayName:"Footer",section:!0,target:"egii5nj0"})(),t_=Object(Dh.E)("a",{displayName:"FooterLink",target:"egii5nj1"})(),n_=zt(function(e){var t=wn(e),n=e.getApplicationState("license"),r=document.referrer?Object(g.h)(Object(g.d)(document.referrer)):"lc"+n,a=function(e){return e.getApplicationState("config").nonProfitLicense}(e);return{themeName:t,url:"https://www.livechatinc.com/powered-by-livechat/?"+Object(g.a)(Object(h.a)({partner:r,utm_campaign:r,utm_source:"chat_window",utm_medium:"referral"},a&&{utm_term:"nonprofit"})),hidden:Jt("hideTrademark",e).enabled||e.getApplicationState("mobile")}},{shouldHandleStateChanges:!1})(function(e){var t=e.hidden,n=e.url,r=e.themeName;return t?null:Rt.createElement(e_,null,Rt.createElement(t_,{href:n,rel:"noreferrer",target:"blank"},"modern"===r?Rt.createElement("span",null,"Powered by LiveChat"):Rt.createElement(Rt.Fragment,null,Rt.createElement("span",null,"Powered by "),Rt.createElement("strong",null,"Live"),Rt.createElement("strong",{className:$x},"Chat"))))}),r_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.forEach(function(e){e.apply(void 0,n)})}},a_=Object(Dh.E)("div",{displayName:"Maximized",target:"e903lsu0"})("position:relative;display:flex;flex-direction:column;min-width:0;height:100%;box-shadow:0 4px 16px rgba(0,0,0,0.25);overflow:hidden;background:#fff;",function(e){return{borderRadius:e.mobile||!e.embedded?"0":"10px"}},";"),i_=Object(Dh.E)("div",{target:"e903lsu1"})("flex-grow:1;"),o_=Object(Dh.A)("&-enter{opacity:0;transform:translate3d(0,100%,0);}&-enter&-enter-active{opacity:1;transform:translate3d(0,0%,0);transition:opacity 140ms ease 200ms,transform 140ms ease 200ms;}&-exit{opacity:1;transform:translate3d(0,0%,0);}&-exit&-exit-active{opacity:0;transform:translate3d(0,100%,0);transition:opacity 140ms ease,transform 140ms ease;}"),c_=function(e){return Object(Dh.A)("&-enter{transform:translate3d(","right"===e?"":"-","40%,40%,0) scale(0.1);",a_," > *{opacity:0;transform:translate3d(0,20%,0);}}&-enter&-enter-active{transform:translate3d(0%,0%,0) scale(1);transition:transform ",430,"ms ","cubic-bezier(0.33, 0, 0, 1)",";",a_," > *{opacity:1;transform:translate3d(0,0%,0);transition:opacity 160ms ","cubic-bezier(0.33, 0, 0, 1)"," 270ms,transform 160ms ","cubic-bezier(0.33, 0, 0, 1)"," 270ms;}}&-exit{transform:translate3d(0%,0%,0) scale(1);opacity:1;",a_," > *{opacity:1;transform:translate3d(0,0%,0);}}&-exit&-exit-active{opacity:0;transform:translate3d(","right"===e?"":"-","40%,40%,0) scale(0.1);transition:transform ",430,"ms ","cubic-bezier(0.335, 0.520, 0.000, 1.000)",",opacity 300ms ease;",a_," > *{opacity:0;transform:translate3d(0,10%,0);transition:opacity 160ms ","cubic-bezier(0.335, 0.520, 0.000, 1.000)",",transform 160ms ","cubic-bezier(0.335, 0.520, 0.000, 1.000)",";}}")},s_=Object(Dh.E)("div",{displayName:"ApplicationWrapper",target:"e903lsu2"})("position:absolute;top:0;left:auto;right:0;bottom:0;width:100%;height:100%;will-change:tranform,opacity;backface-visibility:hidden;"),u_=Object(Dh.E)("div",{target:"e903lsu3"})("z-index:101;border-radius:inherit;"),l_=Object(Dh.E)("div",{target:"e903lsu4"})("z-index:101;position:relative;"),d_=zt(function(e){var t=function(t){e.setApplicationState({maximized:t})};return function(e){var n=e.getApplicationState("mobile");return{mobile:n,setMaximizedState:t,embedded:e.getApplicationState("embedded"),maximized:e.getApplicationState("maximized"),showMinimized:n?Jt("mobileMinimized",e).enabled:Jt("minimized",e).enabled,screenPosition:nn(e),rtl:e.getApplicationState("rtl"),testGroup:jn(e),shouldPerformTest:On(e)}}})((Zx=Kx=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={isMainViewVisible:t.props.maximized},t.enhanceToggle=function(e){return r_(t.props.embedded?e:m.P,t.props.onClick)},t.handleAnimationEnd=function(){t.props.onAnimationEnd()},t.showMainView=function(){t.setState({isMainViewVisible:!0})},t.hideMainView=function(){t.setState({isMainViewVisible:!1})},t}Object(Rh.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){},n.render=function(){var e=this,t=this.props,n=t.mobile,r=t.embedded,a=t.maximized,i=t.setMaximizedState,o=t.screenPosition,s=t.showMinimizedButton,u=t.showMinimized,l=t.onMinimizedRef,d=t.onMinimizedResize,p=this.state.isMainViewVisible,f=this.props.rtl?"rtl":"ltr";return Rt.createElement(Rt.Fragment,null,Rt.createElement(Mh.LogOnMount,{eventType:c.INIT}),Rt.createElement(Vh.a,{on:a,onToggle:i},function(t){var a=t.on,i=t.toggle,c=e.enhanceToggle(i);return Rt.createElement(Yh.a,{appear:!0},a&&Rt.createElement(yv.a,{classNames:c_(o),onExited:e.handleAnimationEnd,onEntered:e.showMainView,onExit:e.hideMainView,timeout:430},Rt.createElement(s_,{dir:f,expandToEdge:n||!r},Rt.createElement(a_,{embedded:r,mobile:n},Rt.createElement(u_,{id:"app-portal"}),Rt.createElement(l_,{id:"tooltip-portal"}),Rt.createElement(Xx,{onMinimize:c,showMinimizedButton:s}),p?Rt.createElement(Tx,null):Rt.createElement(i_,null),Rt.createElement(n_,null)))),!a&&u&&Rt.createElement(yv.a,{classNames:o_,onExited:e.handleAnimationEnd,timeout:430},Rt.createElement(Zv,{dir:f,onMaximize:c,innerRef:l,onResize:d})))}))},t}(Rt.Component),Kx.propTypes={maximized:Fh.bool.isRequired,onAnimationEnd:Fh.func,onClick:Fh.func,setMaximizedState:Fh.func.isRequired},Kx.defaultProps={onAnimationEnd:m.P,onClick:m.P,showMinimizedButton:!0},Zx)),p_=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={crashed:!1},t}Object(Rh.a)(t,e);var n=t.prototype;return n.componentDidCatch=function(e,t){this.setState({crashed:!0}),this.props.onError(e,t)},n.render=function(){return this.state.crashed?null:this.props.children},t}(Rt.Component);p_.defaultProps={onError:m.P};var f_=Jh(16),m_=Jh(14),h_=Jh(12),v_={fontSize:f_,fontWeight:"bold",color:"#3e3e41"},b_={fontSize:m_,fontWeight:"bold",color:"#3e3e41"},g_={fontSize:m_,fontWeight:"normal",color:"#3e3e41"},y_={fontSize:m_,fontWeight:"normal",color:"#9c9c9f"},j_={fontSize:h_,fontWeight:"normal",color:"#3e3e41"},O_={fontSize:m_,fontWeight:"normal",color:"#3e3e41"},x_={fontSize:m_,fontWeight:"normal",color:"#ffffff"},__={fontSize:h_,fontWeight:"normal",color:"#d64546"},w_={spaceBase:8,typography:s},C_=Object(Dh.D)("100%{opacity:0.3;}"),E_=Object(h.a)({},w_,{vars:{"primary-color":"#2200ff","secondary-color":"#ffffff","tertiary-color":"#e9eef4"},ApplicationWrapper:{css:{padding:{default:"1em 1em 1em 1em",expandToEdge:"0"}}},AgentBar:{Avatar:{size:"40px"},IconButton:{css:{width:"40px",height:"40px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"6px",fontSize:Jh(32),opacity:{default:"1",disabled:"0.15"},color:{active:"#fff"}}},Title:{css:{fontSize:".9em",fontWeight:"bold"}},SubTitle:{css:{fontSize:"0.9em",opacity:"1"}},css:{backgroundColor:"#fff",zIndex:"1",color:"#424d57",padding:"1rem"}},Avatar:{size:"20px",css:{border:0}},Bubble:{sharpBorderRadius:"6px",ovalBorderRadius:"6px",css:{boxShadow:"0 1px 2px rgba(0, 0, 0, 0.1)",border:"0"}},IconButton:{css:{padding:"0 .5em"}},Footer:{css:{fontSize:"0.65em",padding:"0.5em 0",width:"100%",textAlign:"center",backgroundColor:"#f5f5f5"},FooterLink:{css:{textDecoration:"none",color:"#7d7d7d",padding:"0.2em",borderRadius:"6px"}}},Form:{IconButton:{css:{color:{default:"#8f8f8f",active:"#000"},backgroundColor:"#ececec"}}},MessageButtons:{css:{color:"#3e7ce4"}},MessageText:{css:{fontSize:"14px"}},MessageList:{css:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0"}},Message:{css:{animation:{default:"none",sending:C_+" 2s 2s forwards"},display:{system:"block"},opacity:{default:"1",failed:"0.7"},color:"#424d57"},Bubble:{sharpBorderRadius:"6px",ovalBorderRadius:"6px",css:{boxShadow:"0 1px 2px rgba(0, 0, 0, 0.1)",border:"0"}},system:{Bubble:{css:{background:"transparent",textAlign:"center",border:"0",width:"100%",boxShadow:"none"}},MessageText:{css:{padding:"0 1em"}}},fullWidth:{Content:{css:{width:"100%"}}}},MinimizedBar:{Icon:{color:"var(--primary-color)"},css:{position:"relative"}},MinimizedBubble:{Icon:{color:"#fff"},css:{position:"relative",background:{default:"var(--primary-color)",hasAvatar:"transparent"}}},Minimized:{Avatar:{css:{border:"0",backgroundColor:"transparent"}}},Invitation:{IconButton:{css:{visibility:{mobile:"visible"}}},Bubble:{sharpBorderRadius:"6px",ovalBorderRadius:"6px",css:{border:"0"}}},TitleBar:{css:{backgroundColor:"#fff",color:"#424d57",fontWeight:"700!important",fontSize:"1em",textAlign:"center",height:"50px"},TitleBarTitle:{css:{fontSize:Jh(14)}}},TextComposer:{css:{fontSize:{default:"14px",mobile:"16px"},padding:"1em",boxShadow:"0 -1em 1em rgba(0, 0, 0, 0.03)",zIndex:"1",background:{disabled:"#fdedd3"}},TextInput:{css:{background:{disabled:"#fdedd3"}}},IconButton:{css:{opacity:{active:1,default:.4}}}},View:{css:{color:"#424d57"},Bubble:{sharpBorderRadius:"6px",ovalBorderRadius:"6px",css:{boxShadow:"0 1px 2px rgba(0, 0, 0, 0.1)",border:"0"}}},SystemCard:{css:{border:"0",boxShadow:"0px 1px 2px rgba(0, 0, 0, 0.1)",left:{default:"50%",rtl:"auto"},right:{default:"auto",rtl:"50%"},transform:{default:"translateX(-50%)",rtl:"translateX(50%)"}}}}),I_=Object(h.a)({},w_,{TitleBar:{css:{fontWeight:"700!important",fontSize:"1.1em",textAlign:"center!important",height:"46px",justifyContent:"flex-start"},TitleBarTitle:{css:{fontSize:Jh(14)}}},IconButton:{css:{padding:"0 .5em"}},MessageList:{css:{backgroundColor:"#fff"}},Maximized:{css:{borderRadius:"3px 3px 0 0"}},Footer:{css:{position:"relative",right:0,bottom:0,fontSize:"0.6em",color:"#b4b4b4",backgroundColor:"#f5f5f5",textAlign:"right",padding:"1em"},FooterLink:{css:{textDecoration:"none",color:"inherit",fontWeight:"bold"}}},ApplicationWrapper:{css:{padding:{default:"1em 1em 0 1em",expandToEdge:"0"}}},AgentBar:{css:{padding:"0.6em"},Avatar:{size:"60px",css:{borderRadius:"0"}},SubTitle:{css:{fontSize:".8em"}},Title:{css:{fontSize:"1em",fontWeight:"bold"}},IconButton:{css:{fontSize:Jh(24),backgroundColor:"transparent !important",color:{default:"inherit"},opacity:{default:"0.3",disabled:"0.15",active:"0.6"}}}},Button:{css:{boxShadow:"0 2px 0 rgba(0, 0, 0, .1), inset 0 -3px 0 rgba(0, 0, 0, .05)"}},Message:{own:{Content:{css:{alignItems:"flex-start"}}},system:{MessageText:{css:{fontSize:".9em",opacity:"0.6"}}},css:{flexDirection:"row"},Status:{css:{opacity:"0.6"}},Bubble:{sharpBorderRadius:"0px",ovalBorderRadius:"0px",css:{border:"0",padding:"0",background:"transparent",boxShadow:"none"}},MessageButtons:{css:{borderRadius:"6px !important",overflow:"hidden",border:"1px solid rgba(0, 0, 0, 0.2)"}},Button:{css:{borderTop:"0!important"}}},MessageText:{css:{padding:"0",fontSize:"14px"}},MessageGroup:{css:{marginBottom:".5em"}},MinimizedBar:{css:{borderRadius:"3px 3px 0 0",height:"40px"},Icon:{css:{transform:"scale(0.8)"}}},MinimizedBubble:{css:{position:"relative"}},View:{Bubble:{css:{border:"0",padding:"0",background:"transparent",boxShadow:"none"}},ViewContent:{css:{paddingTop:".5em"}},css:{paddingBottom:"0"}},TextInput:{css:{lineHeight:"1.1em"}},MessageMeta:{css:{opacity:"0.6"}},Form:{css:{fontSize:"0.9em"},IconButton:{css:{color:{default:"#8f8f8f",active:"#000"},backgroundColor:"#ececec"}}},Tooltip:{css:{padding:"0.5em 0.8em",fontSize:".7em"}},TooltipArrow:{css:{marginTop:"-1em"}},IconPlaceholder:{css:{width:"0"}},Invitation:{Bubble:{sharpBorderRadius:"6px",ovalBorderRadius:"6px",css:{padding:".5em"}}},InformationField:{css:{fontSize:"1.1em"}},SystemCard:{css:{maxWidth:"368px",width:"calc(100% - 0.6em)",margin:"0.3em",boxShadow:"none",border:"1px solid rgb(221, 221, 230)"}},TextComposer:{IconButton:{css:{opacity:{active:1,default:.4}}}}}),S_=function(e){function t(t){var n;(n=e.call(this,t)||this).id="widget-global-"+Object(m.s)(),Object(Dh.C)("#",n.id," *{font-family:'Noto Sans',sans-serif;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;}");var r="https://fonts.googleapis.com/css?family=Noto+Sans:400,700&subset=latin-ext&display=swap",a=document.querySelector("head"),i=a.querySelectorAll("link");if(Object(m.k)(function(e){return e.href===r},i))return Object(zh.a)(n);var o=document.createElement("link");return o.setAttribute("href",r),o.setAttribute("rel","stylesheet"),a.appendChild(o),n}return Object(Rh.a)(t,e),t.prototype.render=function(){return Rt.createElement("div",{id:this.id},this.props.children)},t}(Rt.Component),k_=zt(function(e){return{mobile:e.getApplicationState("mobile"),theme:e.getApplicationState("config").theme}},{shouldHandleStateChanges:Boolean("")})(function(e){var t=e.mobile,n=e.theme,r=e.children,a=Object(m.N)("modern"===n.name?I_:E_,n);return Rt.createElement(Dh.x,{theme:t?Object(m.N)(a,{typography:{input:{fontSize:"16px"},placeholder:{fontSize:"16px"}}}):a},r)}),T_=function(e,t){var n=t.store,r=t.onError,a=t.amplitudeKey,i=Object(v.a)(t,["store","onError","amplitudeKey"]);ri.render(Rt.createElement(p_,{onError:r},Rt.createElement(Vt,{store:n},Rt.createElement(Nh,{amplitudeKey:a},Rt.createElement(qh,null,Rt.createElement(S_,null,Rt.createElement(k_,null,Rt.createElement(d_,i))))))),e)};var A_,P_=Object(g.g)(window.location.search),M_=Mn(),N_="group"in(A_=P_)?Nn(A_.group):"groups"in A_?Nn(A_.groups):null,z_="1"===P_.unique_groups||"1"===P_.unique_group;if(!M_)throw new Error("No license found in the URL.");var R_=M_+(z_?":"+N_:"")+":state";!function(){var e=Zn({application:{license:M_,group:N_}},{persistKey:R_});(P_.embedded?Ga:function(e,t){var n=t.license,r=t.group,a=t.uniqueGroups;return e.on("protocol_upgraded",function(){window.location.reload()}),e.setApplicationState({embedded:!1,maximized:!0,page:{title:document.title,url:String(document.location),referrer:document.referrer}}),e.updateUser(e.getSessionUserId(),ti()),window.performance&&"function"===typeof window.performance.mark&&window.performance.mark("lc_config_request"),ei({license:n,group:r,uniqueGroups:a}).then(function(t){window.performance&&"function"===typeof window.performance.mark&&window.performance.mark("lc_server_config");var r=t.visitor.groups,i=t.region;e.setApplicationState({group:r,rtl:Fa(t)});var o=e.getApplicationState("mobile"),c={data:{license:n,group:r,uniqueGroups:a,region:i,mobile:o},props:{}};return Qa()?c.props.onClick=function(){return e.emit("mobile_wrapper_minimize_intent")}:c.props.showMinimizedButton=!1,[c,t]})})(e,{license:M_,group:N_,uniqueGroups:z_}).then(function(t){return function(e,t,n,r){var a=t.data,i=t.props,o=i.onError,c=void 0===o?m.P:o,s=Object(v.a)(i,["onError"]),u=t.onBootstrap,l=void 0===u?m.P:u;return new Promise(function(t){("3"===n.license_properties.lc_version?ch:Bp)(a,e,n),e.on("set_application_state",function n(a){if(a.ready){window.performance&&"function"===typeof window.performance.mark&&window.performance.mark("lc_sdk_ready"),e.off("set_application_state",n),e.getApplicationState("embedded")||Ih(e),Ka(e),uh(e,r);var i=document.getElementById("root");T_(i,Object(h.a)({},s,{onError:function(e,t){var n=t.componentStack;j("react_error",e,"componentStack",n),ri.render(null,i),c()},amplitudeKey:!1,store:e})),window.performance&&"function"===typeof window.performance.mark&&window.performance.mark("lc_bootstrap_end"),l(),t()}})})}.apply(void 0,[e].concat(t))})}()},78:function(e,t,n){"use strict";t.a=function(e){return new Promise(function(t){t(e())})}}},[[312,2,1]]]);